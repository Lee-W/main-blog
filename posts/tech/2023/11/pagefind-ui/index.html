
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Pagefind UI 我的超人  - 你也許不會發現，但這裡多了搜尋功能</title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="當我說搜尋功能，我指的是真的可以用的搜尋功能" name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="blog" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="Pagefind UI 我的超人  - 你也許不會發現，但這裡多了搜尋功能" prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="當我說搜尋功能，我指的是真的可以用的搜尋功能" prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale"/>
<meta content="https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui" prefix="og: http://ogp.me/ns#" property="og:url"/>
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2023-11-01 23:10:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="blog" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="Pagefind UI 我的超人  - 你也許不會發現，但這裡多了搜尋功能" name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui" name="twitter:url"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" name="twitter:image:src"/>
<meta content="當我說搜尋功能，我指的是真的可以用的搜尋功能" name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Pagefind UI 我的超人 - 你也許不會發現，但這裡多了搜尋功能",
  "headline": "Pagefind UI 我的超人 - 你也許不會發現，但這裡多了搜尋功能",
  "datePublished": "2023-11-01 23:10:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "https://blog.wei-lee.me//images/cover.jpeg",
  "url": "https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui",
  "description": "當我說搜尋功能，我指的是真的可以用的搜尋功能"
}
</script>
</meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2023", "item": "https://blog.wei-lee.me/posts/tech/2023"}, {"@type": "ListItem", "position": 5, "name": "11", "item": "https://blog.wei-lee.me/posts/tech/2023/11"}, {"@type": "ListItem", "position": 6, "name": "Pagefind ui", "item": "https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "Pagefind UI 我的超人", "about": "Tech", "datePublished": "2023-11-01 23:10"}</script></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-🏠 Home" role="presentation"><a href="/"><span>🏠 Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-👨‍💻 Tech active" role="presentation"><a href="/category/tech.html"><span>👨‍💻 Tech</span></a></li>
<li class="nav-📚 Book Digest" role="presentation"><a href="/category/book.html"><span>📚 Book Digest</span></a></li>
<li class="nav-💬 Gossiping" role="presentation"><a href="/category/gossiping.html"><span>💬 Gossiping</span></a></li>
<li class="nav-🏷️ Tags" role="presentation"><a href="/tags.html"><span>🏷️ Tags</span></a></li>
<li class="nav-🗄️ Archives" role="presentation"><a href="/archives.html"><span>🗄️ Archives</span></a></li>
<li class="nav-📚 Series" role="presentation"><a href="/series_list.html"><span>📚 Series</span></a></li>
<li class="nav-🔍 Search" role="presentation"><a href="/search.html"><span>🔍 Search</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            Pagefind UI 我的超人
            <br/>
<small class="post-subtitle-white">你也許不會發現，但這裡多了搜尋功能</small>
</h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2023/11/01 - Wed">2023/11/01 - Wed</time>
          • 2 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me//images/cover.jpeg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p>當我說搜尋功能，我指的是真的可以用的搜尋功能</p>
<!--more-->
<p>會這麼說是因為之前的真的是不能用的 🥲</p>
<div class="toc">
<ul>
<li><a href="#pagefind-ui">什麼是 Pagefind UI 呢</a></li>
<li><a href="#pagefind-ui-pelican">如何將 Pagefind UI 整合進 Pelican？</a></li>
<li><a href="#search-index-github-actions">將產生 search index 整合進 GitHub Actions</a></li>
<li><a href="#_1">看起來如何呢？</a></li>
<li><a href="#_2">那些你不需要知道的背後故事</a></li>
</ul>
</div>
<h3 id="pagefind-ui">什麼是 <a href="https://pagefind.app/">Pagefind UI</a> 呢</h3>
<p>根據官網的介紹</p>
<blockquote>
<p>Pagefind is a fully static search library that aims to perform well on large sites, while using as little of your users’ bandwidth as possible, and without hosting any infrastructure.</p>
</blockquote>
<ul>
<li>Pagefind 是<ul>
<li><strong>靜態搜尋的函式庫</strong></li>
<li>即使在很大的網站也有不錯的表現</li>
<li>盡可能的減少使用者的頻寬</li>
<li><strong>不用架任何的 infra</strong></li>
</ul>
</li>
</ul>
<p>再往下滑一點還有很多酷功能，但我大多還沒用到 😆<br/>
其中比較重要的是多語言支援，尤其是中文</p>
<p>而設定上很簡單，也是我喜歡 Pagefind UI 的一點</p>
<p>我的 blog 都是使用 <a href="https://getpelican.com/">Pelican</a> 產生，並 host 在 Github Pages 上<br/>
下一段會分享如何將 Pagefind UI 整合進 Pelican<br/>
關於 Pelican 的細節不會贅述太多</p>
<h2 id="pagefind-ui-pelican">如何將 Pagefind UI 整合進 Pelican？</h2>
<p>首先可以在 pelican 的設定檔（i.e., <code>pelicanconf.py</code>）加入 <code>PAGEFIND_ENABLED</code> 變數<br/>
用它來決定是否使用 Pagefind UI</p>
<p>再來要去修改主題<br/>
以我使用的主題 <a href="https://github.com/Lee-W/elegant">elegant</a> 為例<br/>
需要將載入 <a href="https://github.com/Lee-W/elegant/blob/blog-pagefindui-example/templates/base.html#L18-L20">css</a> 和 <a href="https://github.com/Lee-W/elegant/blob/blog-pagefindui-example/templates/base.html#L128-L138">js</a> 的部分加入 <a href="https://github.com/Lee-W/elegant/blob/blog-pagefindui-example/templates/base.html">templates/base.html</a></p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--templates/base.html--&gt;</span>

  {% if PAGEFIND_ENABLED|default(False) %}
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">"/pagefind/pagefind-ui.css"</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span><span class="p">&gt;</span>
  {% endif %}
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--templates/base.html--&gt;</span>

  {% if PAGEFIND_ENABLED|default(True) %}
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/pagefind/pagefind-ui.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">      </span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="ow">new</span><span class="w"> </span><span class="nx">PagefindUI</span><span class="p">({</span>
<span class="w">              </span><span class="nx">element</span><span class="o">:</span><span class="w"> </span><span class="s2">"#search"</span><span class="p">,</span>
<span class="w">              </span><span class="nx">showImages</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">          </span><span class="p">});</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  {% endif %}
</code></pre></div>
<p>理想上應該要把這幾段拆成各自的 template，然後在 <code>templates/base.html</code> include 他們<br/>
但我有點懶，之後想 refactor 再說</p>
<p>搜尋區塊的改動則會根據主題的設計跟你希望如何呈現搜尋有關<br/>
在 elegant 中是把搜尋欄放在 <a href="https://github.com/Lee-W/elegant/blob/blog-pagefindui-example/templates/base.html#L90-L92">base.html</a> 的一個項目<br/>
所在這我用 <code>li</code> 包住 <code>&lt;div id="search"&gt;&lt;/div&gt;</code></p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--templates/base.html--&gt;</span>

{% if PAGEFIND_ENABLED %}
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"search"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
{% else %}
</code></pre></div>
<p>而在我<a href="https://travlog.wei-lee.me/">另一個 blog</a>則把它設定成獨立的頁面<br/>
如果沒意外的話，就大功告成了<br/>
（另一個 blog 因為 css 的調整確實有多花了點時間，但功能上是這樣就完成了）</p>
<p>沒錯！ 就是這麼簡單</p>
<p><img alt="easy" src="/images/posts-image/2023-pagefindui/easy.jpg"/></p>
<p>如果這時候直接把 Pelican 的 local server 跑起來，你就會發現<br/>
什麼都搜尋不到 🔍<br/>
因為沒有產生 search index 給 Pagefind UI 去找</p>
<p>而 search index 可以透過以下指令產生</p>
<div class="highlight"><pre><span></span><code>npx<span class="w"> </span>-y<span class="w"> </span>pagefind<span class="w"> </span>--site<span class="w"> </span>output
</code></pre></div>
<p><code>--site</code> 後面吃的參數是 Pelican 的輸出資料夾<br/>
預設通常是 <code>output</code></p>
<h2 id="search-index-github-actions">將產生 search index 整合進 GitHub Actions</h2>
<p>我的 blog 在寫完文章後，只要推上 main 分支<br/>
GitHub Actions 就會自動幫我產出最新的 blog ，並且部署到 GitHub Pages 上</p>
<p>為了讓 Pagefind UI 有 search index 可以找<br/>
必須在產出 blog 跟部屬的步驟中間，加入以下的步驟讓 GitHub Actions 也幫我產生 search index</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="c1"># steps that build the blog</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GitHub Action for npx</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mikeal/npx@1.0.0</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build search index</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">npx -y pagefind --site output</span>

<span class="w">      </span><span class="c1"># steps that deploy the blog</span>
</code></pre></div>
<h2 id="_1">看起來如何呢？</h2>
<p>這個 blog</p>
<p><img alt="this-blog" src="/images/posts-image/2023-pagefindui/this-blog.jpg"/></p>
<p><a href="https://travlog.wei-lee.me/">另一個 blog</a></p>
<p><img alt="another-blog" src="/images/posts-image/2023-pagefindui/another-blog.jpg"/></p>
<h2 id="_2">那些你不需要知道的背後故事</h2>
<p>以下聽故事</p>
<p>當初使用 <a href="https://github.com/Pelican-Elegant/elegant">elegant</a> 主題，其中一個原因就是它自帶搜尋功能（<a href="https://elegant.oncrashreboot.com/add-search">Add Search to Your Site</a>）<br/>
結果它背後用的 <a href="https://github.com/pelican-plugins/tipue-search">tipue-search</a> 壞掉了，搜尋功能就跟著死掉了</p>
<p>之前有想換到 <a href="https://github.com/pelican-plugins/search">pelican-search</a><br/>
搞了好久才弄起來，但他對中文斷詞的支援很差，基本上可以當作不存在<br/>
👉 <a href="https://github.com/jameslittle230/stork/issues/191#">Search in Chinese seems to be not working#191</a><br/>
後來還跑去玩 <a href="https://lunrjs.com/">luar.js</a>，也是中文支援不行<br/>
之前原本還想寫一篇 "pelican-search does not work for Madarain."<br/>
但一直躺在草稿夾，就躺到死掉惹<br/>
不過也算是這篇的養分，是否也能算是某種轉生呢 🤔</p>
<p>最近心血來潮就想再回來看 <a href="https://github.com/pelican-plugins/search">pelican-search</a><br/>
然後就找到 <a href="https://github.com/pelican-plugins/search/issues/35">Consider alternatives to Stork #35</a> ...<br/>
pelican-search 背後的 Strok 將不再維護 🥲</p>
<p>只好回去翻翻看 <a href="https://github.com/getpelican/pelican-themes">pelican-themes</a> 中，比較有在更新的主題有沒有支援搜尋的<br/>
還真的讓我找到 <a href="https://github.com/hrw/pelican-haerwu-theme/tree/ea01213468a775dcd14e6aa5800f654af5670bc5">pelican-haerwu-theme</a></p>
<p><img alt="pelican-theme" src="/images/posts-image/2023-pagefindui/pelican-theme.jpg"/></p>
<p><img alt="search" src="/images/posts-image/2023-pagefindui/search.jpg"/></p>
<p>去追一下原始碼就找到 Pagefind UI<br/>
恩，整個故事大概就是這樣</p>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=Pagefind UI 我的超人  - 你也許不會發現，但這裡多了搜尋功能&amp;url=https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui&amp;title=Pagefind UI 我的超人" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=Pagefind UI 我的超人&amp;body=https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/blog.html">blog</a> </aside>
<div class="clear"></div>
</section>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2023/11/pagefind-ui" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
<aside class="post-nav">
<div class="clear"></div>
</aside>
</div>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten © 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> • Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> •
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>