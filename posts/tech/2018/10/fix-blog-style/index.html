
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Blog 風格修正 </title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="一直以來都有發現 Blog 的風格有點小問題 但都懶得去好好地找出問題 這次終於下定決定修好它" name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="Develop" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="Blog 風格修正 " prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="一直以來都有發現 Blog 的風格有點小問題 但都懶得去好好地找出問題 這次終於下定決定修好它" prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale"/>
<meta content="https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style" prefix="og: http://ogp.me/ns#" property="og:url"/>
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2018-10-14 21:00:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="Develop" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="Blog 風格修正 " name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style" name="twitter:url"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" name="twitter:image:src"/>
<meta content="一直以來都有發現 Blog 的風格有點小問題 但都懶得去好好地找出問題 這次終於下定決定修好它" name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Blog 風格修正",
  "headline": "Blog 風格修正",
  "datePublished": "2018-10-14 21:00:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "https://blog.wei-lee.me//images/cover.jpeg",
  "url": "https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style",
  "description": "一直以來都有發現 Blog 的風格有點小問題 但都懶得去好好地找出問題 這次終於下定決定修好它"
}
</script>
</meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2018", "item": "https://blog.wei-lee.me/posts/tech/2018"}, {"@type": "ListItem", "position": 5, "name": "10", "item": "https://blog.wei-lee.me/posts/tech/2018/10"}, {"@type": "ListItem", "position": 6, "name": "Fix blog style", "item": "https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "Blog 風格修正", "about": "Tech", "datePublished": "2018-10-14 21:00"}</script></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-🏠 Home" role="presentation"><a href="/"><span>🏠 Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-👨‍💻 Tech active" role="presentation"><a href="/category/tech.html"><span>👨‍💻 Tech</span></a></li>
<li class="nav-📚 Book Digest" role="presentation"><a href="/category/book.html"><span>📚 Book Digest</span></a></li>
<li class="nav-💬 Gossiping" role="presentation"><a href="/category/gossiping.html"><span>💬 Gossiping</span></a></li>
<li class="nav-🏷️ Tags" role="presentation"><a href="/tags.html"><span>🏷️ Tags</span></a></li>
<li class="nav-🗄️ Archives" role="presentation"><a href="/archives.html"><span>🗄️ Archives</span></a></li>
<li class="nav-📚 Series" role="presentation"><a href="/series_list.html"><span>📚 Series</span></a></li>
<li class="nav-🔍 Search" role="presentation"><a href="/search.html"><span>🔍 Search</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            Blog 風格修正
        </h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2018/10/14 - Sun">2018/10/14 - Sun</time>
          • 2 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me//images/cover.jpeg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p>一直以來都有發現 Blog 的風格有點小問題<br/>
但都懶得去好好地找出問題<br/>
這次終於下定決定修好它</p>
<!--more-->
<p>起源其實是我的上一篇文被嘴了 QAQ</p>
<p><img alt="your style is bad" src="/images/posts-image/2018-10-14-fix-blog-style/15385701963828.jpg"/></p>
<p><img alt="problem 1" src="/images/posts-image/2018-10-14-fix-blog-style/15385699268490.jpg"/></p>
<p><img alt="problem 2" src="/images/posts-image/2018-10-14-fix-blog-style/15385700601798.jpg"/></p>
<p>整理下來大概有三個問題</p>
<ol>
<li>大小標的 margin</li>
<li>英文前後也空一格</li>
<li>第二行縮了四分之一字元</li>
</ol>
<h2 id="1-margin">1. 大小標的 margin</h2>
<p>這應該是三個問題中最簡單的<br/>
但我有點懶得動 CSS ，所以就先不修了 xD</p>
<h2 id="2">2. 英文前後也空一格</h2>
<p>剛好最近看到了<a href="https://github.com/sparanoid/chinese-copywriting-guidelines#中文文案排版指北">中文文案排版指北</a></p>
<p>才發現原來</p>
<blockquote>
<p>「有研究顯示，打字的時候不喜歡在中文和英文之間加空格的人，感情路都走得很辛苦，有七成的比例會在 34 歲的時候跟自己不愛的人結婚，而其餘三成的人最後只能把遺產留給自己的貓。畢竟愛情跟書寫都需要適時地留白。與大家共勉之。」<br/>
——vinta/paranoid-auto-spacing</p>
</blockquote>
<p>總之，這也不是特別難處理的問題<br/>
只要透過 <a href="https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk">add-space-between-latin-and-cjk</a> 再加上 <code>os.walk()</code> 就能解決了<br/>
不過還是會遇到一些不該加空格的地方，也被加空格了<br/>
但也只要用 <code>git diff</code> 再確認一下哪裡有被 script 修改過就可以了</p>
<h2 id="3">3. 第二行縮了四分之一字元</h2>
<p>這個問題就比較頭痛了<br/>
因為我在模板找到這段的內容是</p>
<div class="highlight"><pre><span></span><code>{{ article.content }}
</code></pre></div>
<p>也就是説這個多的空白是 <a href="https://github.com/getpelican/pelican">pelican</a> (我用的 static blog generator) 所產生的<br/>
我沒有辦法透過單純的修改 HTML, CSS 來修正這個問題<br/>
必須要找到 pelican 是從哪產生出這個空白的<br/>
於是就開始我的 trace pelican 的之旅</p>
<p>接下來，就是一連串的 trace 過程<br/>
不想看可以透過<a href="#transport">傳送門</a>直接跳到解法</p>
<h3 id="pelicanreaderspy-first-try">pelican/readers.py (first try)</h3>
<p>要找到 Markdown 是在哪被 parse 並產生內容的並不困難<br/>
(<code>pelican/readers.py</code> 的 <a href="https://github.com/getpelican/pelican/blob/ee24ad1821774db2bfb199100eced17270a961d3/pelican/readers.py#L334">334行</a>)<br/>
透過一些測試，發現這段的行為是因為有了多的 <code>\n</code> 造成了多的空白<br/>
第一個猜想是某些情況下的 <code>\n</code> 沒有成功的被移除掉<br/>
所以只要加一行 <code>content.replace('\n', '')</code> 確保全部的 <code>\n</code> 都被移除，應該就可以了</p>
<p>一開始問題也真的解決了<br/>
直到我用到 markdown中的 ``` 語法才又出現問題<br/>
在整個 code block 中的 code 全部都黏在一起沒有斷行<br/>
看來這個做法是行不通...</p>
<p>只好認命的從我平常產生文章的指令一步一步追回去<br/>
trace 的過程還有踩到一個雷是「pip 裝的 pelican 並不是 master 上的版本」<br/>
所以我還必須要切到 <a href="https://github.com/getpelican/pelican/tree/3.7.1">3.7.1版</a> 才能開始解決我遇到的問題</p>
<h4 id="setuppy">setup.py</h4>
<p>平常我都是透過 <code>pelican -r -o output -s pelicanconf.py</code>這個指令來產生文章<br/>
所以第一步就是要從 <a href="https://github.com/getpelican/pelican/blob/master/setup.py#L15">setup.py</a> 找出 pelican 這個指令是哪裡來的</p>
<!-- blacken-docs:off -->
<div class="highlight"><pre><span></span><code>    <span class="o">...</span>
    <span class="s2">"pelican = pelican:main"</span><span class="p">,</span>
    <span class="o">...</span>
</code></pre></div>
<!-- blacken-docs:on -->
<h4 id="pelicaninitpy">pelican/<strong>init</strong>.py</h4>
<p>既然在 <a href="https://github.com/getpelican/pelican/tree/3.7.1/pelican">pelican</a> 這個 package 中沒有 <code>main.py</code><br/>
那 Python 還能找到 <code>main</code> 就只剩下 <code>__init__.py</code><br/>
扣除掉一些 parse 指令參數的程式碼<br/>
接下來最像是產生文章的程式碼就是<a href="https://github.com/getpelican/pelican/blob/master/pelican/__init__.py#L147">147行</a> 的 <code>run</code></p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">generators</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s2">"generate_context"</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">generate_context</span><span class="p">()</span>
</code></pre></div>
<p>下一步就是要從 <code>generators</code> 找出 <code>generate_context</code> 這個函式</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pelican.generators</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ArticlesGenerator</span><span class="p">,</span>
    <span class="n">PagesGenerator</span><span class="p">,</span>
    <span class="n">SourceFileGenerator</span><span class="p">,</span>
    <span class="n">StaticGenerator</span><span class="p">,</span>
    <span class="n">TemplatePagesGenerator</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="pelicangeneratorspy">pelican/generators.py</h4>
<p><code>generators</code>中看起來最有關的就是 <code>ArticlesGenerator</code><br/>
這個 class 也找到了 <code>generate_context</code></p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">article_or_draft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readers</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span>
        <span class="n">base_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
        <span class="n">path</span><span class="o">=</span><span class="n">f</span><span class="p">,</span>
        <span class="n">content_class</span><span class="o">=</span><span class="n">Article</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
        <span class="n">preread_signal</span><span class="o">=</span><span class="n">signals</span><span class="o">.</span><span class="n">article_generator_preread</span><span class="p">,</span>
        <span class="n">preread_sender</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">context_signal</span><span class="o">=</span><span class="n">signals</span><span class="o">.</span><span class="n">article_generator_context</span><span class="p">,</span>
        <span class="n">context_sender</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>這裡找到的是文章被產生的地方<br/>
只要能在找到文章中的內容是在哪產生，應該就能解決我的問題<br/>
所以下一步就是要再去找到 <code>Readers</code></p>
<h4 id="pelicanreaderpy">pelican/reader.py</h4>
<p><code>Readers</code> 在這個檔案的<a href="https://github.com/getpelican/pelican/blob/3.7.1/pelican/readers.py#L486">486行</a><br/>
接著 trace 這個 class 到<a href="https://github.com/getpelican/pelican/blob/3.7.1/pelican/readers.py#L526">526行</a>就真的是文章內容第一次被產生的地方<br/>
到目前為止，文章的內容還是沒有多餘的空白<br/>
所以順利的話只要從這繼續 trace 下去就能找出問題</p>
<div class="highlight"><pre><span></span><code><span class="n">content</span><span class="p">,</span> <span class="n">reader_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cached_data</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">content</span><span class="p">,</span> <span class="n">reader_metadata</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cache_data</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">reader_metadata</span><span class="p">))</span>
</code></pre></div>
<p>最後發現問題是出在 <a href="https://github.com/getpelican/pelican/blob/3.7.1/pelican/readers.py#L555">555行</a></p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="n">content</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">typogrify_wrapper</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>
<p>只要不對 <code>content</code> 做 <code>typogrify_wrapper</code>就不會產生多餘的空白</p>
<p><a id="transport"></a></p>
<h4 id="typogrify">typogrify</h4>
<p>typogrify 是 <code>pelicanconf.py</code> (pelican 的設定檔) 中的一個設定</p>
<div class="highlight"><pre><span></span><code><span class="n">TYPOGRIFY</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
<p>只要關掉 typogrify 就不會再產生出多餘的空白</p>
<p><a href="https://github.com/mintchaos/typogrify">typogrify</a> 看來是某種加強 HTML 的工具<br/>
我試過要把 <code>&lt;br&gt;</code> 跟 <code>&amp;nbsp</code> 加入 <code>TYPOGRIFY_IGNORE_TAGS</code><br/>
不過看來還是沒辦法解決<br/>
最後只好把 typogrify 整個關掉了</p>
<h2 id="_1">後記</h2>
<p>其實這也只是個無傷大雅的小問題<br/>
但真的是花了我不少時間才找到真正的問題所在</p>
<p>前幾次都能透過 trace 原始碼，找到 library 的一些小問題<br/>
也丟了幾個 Pull Request<br/>
不過看來這次沒能再多貢獻什麼<br/>
雖然好像有找到可能從 typogrify 解決掉這個 issue的方式<br/>
但要再把它加入 pelican 變成一種 config 還是有些麻煩 xD</p>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=Blog 風格修正 &amp;url=https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style&amp;title=Blog 風格修正" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=Blog 風格修正&amp;body=https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/develop.html">Develop</a> </aside>
<div class="clear"></div>
</section>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2018/10/fix-blog-style" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
<aside class="post-nav">
<div class="clear"></div>
</aside>
</div>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten © 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> • Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> •
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>