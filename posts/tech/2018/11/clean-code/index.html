
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>[Note] Clean Code </title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2018/11/clean-code" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="既然都把 The Clean Coder 做完了 就順便把原本在 GitBook 的 The Clean Code 一起搬過來好了" name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="Note" name="tags"/>
<meta content="Software Engineering" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="[Note] Clean Code " prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="既然都把 The Clean Coder 做完了 就順便把原本在 GitBook 的 The Clean Code 一起搬過來好了" prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale">
<meta content="https://blog.wei-lee.me/posts/tech/2018/11/clean-code" prefix="og: http://ogp.me/ns#" property="og:url"/>
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2018-11-16 17:08:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="2020-10-08 16:12:00+08:00" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="Note" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="Software Engineering" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="[Note] Clean Code " name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2018/11/clean-code" name="twitter:url"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" name="twitter:image:src"/>
<meta content="既然都把 The Clean Coder 做完了 就順便把原本在 GitBook 的 The Clean Code 一起搬過來好了" name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "[Note] Clean Code",
  "headline": "[Note] Clean Code",
  "datePublished": "2018-11-16 17:08:00+08:00",
  "dateModified": "2020-10-08 16:12:00+08:00",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "https://blog.wei-lee.me//images/cover.jpeg",
  "url": "https://blog.wei-lee.me/posts/tech/2018/11/clean-code",
  "description": "既然都把 The Clean Coder 做完了 就順便把原本在 GitBook 的 The Clean Code 一起搬過來好了"
}
</script>
</meta></meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2018/11/clean-code" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2018", "item": "https://blog.wei-lee.me/posts/tech/2018"}, {"@type": "ListItem", "position": 5, "name": "11", "item": "https://blog.wei-lee.me/posts/tech/2018/11"}, {"@type": "ListItem", "position": 6, "name": "Clean code", "item": "https://blog.wei-lee.me/posts/tech/2018/11/clean-code"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2018/11/clean-code/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "[Note] Clean Code", "about": "Tech", "datePublished": "2018-11-16 17:08"}</script></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-Home" role="presentation"><a href="/"><span>Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-🗄️ Archives" role="presentation"><a href="/archives.html"><span>🗄️ Archives</span></a></li>
<li class="nav-🔍 Search" role="presentation"><a href="/pages/search.html"><span>🔍 Search</span></a></li>
<li role="presentation"><a href="https://blog.wei-lee.me/category/book.html"><span>Book</span></a></li>
<li role="presentation"><a href="https://blog.wei-lee.me/category/gossiping.html"><span>Gossiping</span></a></li>
<li class="nav-tech active" role="presentation"><a href="https://blog.wei-lee.me/category/tech.html"><span>Tech</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            [Note] Clean Code
        </h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2018/11/16 - Fri">2018/11/16 - Fri</time>
          • <time datetime="2020/10/08 - Thu"> Updated on 2020/10/08 - Thu</time>
          • 3 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me//images/cover.jpeg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p>既然都把 The Clean Coder 做完了<br/>
就順便把原本在 GitBook 的 The Clean Code 一起搬過來好了</p>
<p><img alt="clean code" src="/images/books/clean code.jpg"/></p>
<!--more-->
<blockquote>
<p>Lee-W @ 2020-10-08<br/>
隔了兩年又再回來翻這本書<br/>
這次除了打算把後面的章節全部看完外，也會重新把筆記順過一次</p>
<p>第四次把前十章看完後，感到一些原本似懂非懂的概念，變得理所當然<br/>
但依然會對巧妙的地方感到讚嘆</p>
</blockquote>
<div class="toc">
<ul>
<li><a href="#1">第1章：無暇的程式碼</a></li>
<li><a href="#2">第2章：有意義的命名</a></li>
<li><a href="#3">第3章：函式</a><ul>
<li><a href="#_1">錯誤處理</a></li>
<li><a href="#_2">參數</a></li>
<li><a href="#_3">如何寫出這樣函式？？？</a></li>
</ul>
</li>
<li><a href="#4">第4章：註解</a><ul>
<li><a href="#_4">有用的註解</a></li>
<li><a href="#_5">糟糕的註解</a></li>
</ul>
</li>
<li><a href="#5">第5章：編排</a><ul>
<li><a href="#_6">函式間的編排</a></li>
<li><a href="#_7">使用空行、空白</a></li>
</ul>
</li>
<li><a href="#6">第6章：物件及資料結構</a></li>
<li><a href="#7">第7章：錯誤處理</a></li>
<li><a href="#8">第8章：邊界</a></li>
<li><a href="#9">第9章：單元測試</a></li>
<li><a href="#10">第10章：類別</a><ul>
<li><a href="#_8">職責</a></li>
<li><a href="#_9">凝聚性</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="1">第1章：無暇的程式碼</h2>
<ul>
<li>LeBlanc's Law: 待會而等於永不<ul>
<li>待會兒再回來整理程式，等於讓程式一直限於髒亂</li>
</ul>
</li>
<li>髒亂的程式只會讓開發速度更慢。<strong>趕上期限的方法是隨時都確保程式儘可能的乾淨</strong></li>
<li>What is Clean Code?<ul>
<li>只做好一件事</li>
<li>可以被原作者以外的開發者閱讀與擴充的</li>
<li>Beck's rules for simple code<ul>
<li>通過所有測試</li>
<li>沒有重複的程式碼</li>
<li>充份表達系統設計的構思</li>
<li>具有最少的 entities (e.g., class, methods, functions, and etc.)</li>
</ul>
</li>
</ul>
</li>
<li>每一次修改程式碼之後，都得讓程式碼變得比修改之前再更乾淨<ul>
<li>童子軍原則: 每次你到過的營地，離開後要比之前更乾淨</li>
</ul>
</li>
</ul>
<h2 id="2">第2章：有意義的命名</h2>
<ul>
<li>Variables, methods, classes 要能解釋他們為什麼在這、做什麼用和怎麼使用它</li>
<li>變數名稱要唸得出來 (e.g., <del>genYMDHMS</del>)</li>
<li>較小的名稱如果能表達足夠的意義，通常比較長的名稱好，儘量減少再命名上不必要的文字</li>
<li>不要用變數型態作為變數名稱<ul>
<li>e.g., <code>accountList</code> → <code>accountGroup</code> or <code>accounts</code></li>
</ul>
</li>
<li>要區別名稱，用<strong>讀者能分辨的區別方式</strong>！！！<ul>
<li>e.g.,<ul>
<li><del>moneyAmount</del> → <code>money</code></li>
<li><del>customerInfo</del> → <code>customer</code></li>
</ul>
</li>
</ul>
</li>
<li>命名的長度應該要與 scope 大小對應<ul>
<li>一個常用到的變數或常數，最好給它一個容易被搜尋的名子</li>
</ul>
</li>
<li>詞性<ul>
<li>class, object → 名詞</li>
<li>method → 動詞</li>
</ul>
</li>
<li>替單一的概念選一個詞<ul>
<li>e.g., get, fetch, retrieve 混用是一件很糟的事</li>
</ul>
</li>
<li>避免用雙關語，或可以表達兩個意思的字<ul>
<li>e.g., 加入一個新的值 : <del>add</del> → append, insert</li>
</ul>
</li>
</ul>
<h2 id="3">第3章：函式</h2>
<ul>
<li>寫一個好的函式有兩個守則<ul>
<li>簡短</li>
<li>比簡短來得更簡短</li>
</ul>
</li>
<li>準則<ul>
<li>每行應該少於150字，函式應該少於20行</li>
<li>但最重要的是，<strong>每個函式都要能清楚的告訴你本身的意圖，並帶領你到下個函式</strong></li>
</ul>
</li>
<li><strong>別去害怕取較長的函數名稱</strong><ul>
<li>長但具描述性質 &gt; 註解 &gt; 短而無法理解</li>
</ul>
</li>
<li>降層準則： 由上而下閱讀的程式</li>
<li>Don't repeat yourself at any cost!!!</li>
<li><code>if</code>, <code>else</code>, <code>while</code> 這些敘述最好都只有一行，而那行通常是函式呼叫<ul>
<li>避免巢狀結構，<strong>函式內的縮排不該超過一或兩層</strong></li>
</ul>
</li>
<li><strong>函式應該只做好做一件事情</strong><ul>
<li>做一件事的函式不應該被合理的分成不同的段落 (e.g., 宣告區, 初始區... and etc.)</li>
</ul>
</li>
<li>函式要能<strong>做好某件事</strong>，或<strong>回答某個問題</strong>，而這代表<strong>兩者不該同時發生！！！</strong></li>
</ul>
<div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">set</span><span class="p">(</span><span class="s">"username"</span><span class="p">,</span><span class="w"> </span><span class="s">"bob"</span><span class="p">))</span><span class="w"> </span><span class="p">......</span>

<span class="c1">// refactored</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">attrExists</span><span class="p">(</span><span class="s">"userName"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">setAttr</span><span class="p">(</span><span class="s">"userName"</span><span class="p">,</span><span class="w"> </span><span class="s">"bob"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3 id="_1">錯誤處理</h3>
<ul>
<li>用例外處理取代錯誤碼回傳<ul>
<li>而錯誤處理是會混淆程式結構的，比較好的作法就是把 try catch 區塊提出來</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">deletePage</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">E_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">registry</span><span class="p">.</span><span class="na">deleteReference</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">E_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">configKeys</span><span class="p">.</span><span class="na">deleteKey</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">makeKey</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">E_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">"page deleted"</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">"configKey not delete"</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">"deleteReference from registry failed"</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">"delete failed"</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// refactored</span>
<span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">deletePage</span><span class="p">(</span><span class="n">page</span><span class="p">);</span>
<span class="w">    </span><span class="n">registry</span><span class="p">.</span><span class="na">deleteReference</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">);</span>
<span class="w">    </span><span class="n">configKeys</span><span class="p">.</span><span class="na">deleteKey</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">makeKey</span><span class="p">());</span>
<span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// even more refactored</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="n">Page</span><span class="w"> </span><span class="n">page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">deletePageAndAllReferences</span><span class="p">(</span><span class="n">page</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">logError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deletePageAndAllReferences</span><span class="p">(</span><span class="n">Page</span><span class="w"> </span><span class="n">page</span><span class="p">)</span>
<span class="w">            </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">deletePage</span><span class="p">(</span><span class="n">page</span><span class="p">);</span>
<span class="w">    </span><span class="n">registry</span><span class="p">.</span><span class="na">deleteReference</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">);</span>
<span class="w">    </span><span class="n">configKeys</span><span class="p">.</span><span class="na">deleteKey</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">makeKey</span><span class="p">());</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">logError</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
<h3 id="_2">參數</h3>
<ul>
<li>函式最好是不使用到參數，可以的話不要超過3個<ul>
<li>除非有非常特殊的理由，否則都不該超過3個</li>
</ul>
</li>
<li><strong>別傳flag參數(e.g. isSutie)進入函式</strong>，那代表這個函式一定做超過一件事！！！</li>
<li>單一參數函式<ul>
<li>問與這個參數有關的問題 (e.g., <code>fileExists("MyFile")</code>)</li>
<li>對這個參數進行操作，並且 <strong>回傳</strong></li>
<li>事件，利用參數去改變系統的狀態</li>
</ul>
</li>
<li>2 ~ 3 個參數<ul>
<li>注意參數順序性</li>
</ul>
</li>
<li>利用建立物件的方式，減少函式參數的數量</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">Circle</span><span class="w"> </span><span class="nf">makeCircle</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span>
<span class="c1">// refactored</span>
<span class="n">Circle</span><span class="w"> </span><span class="nf">makeCirecle</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">center</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">radiue</span><span class="p">);</span>
</pre></div>
<ul>
<li>避免使用輸出型參數，這十分的讓人困惑</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">appendFooter</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>

<span class="c1">// refactored</span>
<span class="n">s</span><span class="p">.</span><span class="na">appendFooter</span><span class="p">();</span>
</pre></div>
<h3 id="_3">如何寫出這樣函式？？？</h3>
<p>一直修改和重構，直到足夠精簡<br/>
不用一開始就要寫到最精簡，實際上那也是辦不到的</p>
<h2 id="4">第4章：註解</h2>
<ul>
<li><strong>不要替糟糕的程式碼寫註解 ─ 重寫它！！！</strong></li>
<li>即使是適當的使用註解，也只是用來彌補程式碼表達意思的失敗<ul>
<li>每次要寫註解時，先思考是否能<strong>直接用程式碼表達</strong></li>
</ul>
</li>
<li>註解只應該描述附近的程式碼，不要在區域性註解內放入系統全域資訊</li>
<li>替只做一件事的小函式選一個好名稱，多半比將註解寫在函式標頭優雅</li>
</ul>
<h3 id="_4">有用的註解</h3>
<ul>
<li>提供資訊的註解</li>
</ul>
<div class="highlight"><pre><span></span><span class="c1">//format matched kk:mm:ss EEE, MMM dd, yyyy</span>
<span class="n">Pattern</span><span class="w"> </span><span class="n">tiMatcher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Pattern</span><span class="p">.</span><span class="na">compile</span><span class="p">(</span>
<span class="w">    </span><span class="s">"\\d*:\\d*:\\d* \\w*, \\w* \\d*, \\d*"</span>
<span class="p">)</span>
</pre></div>
<ul>
<li>對後果的告誡： 警告會出現某種特殊後果的註解</li>
<li>TODO</li>
<li>公開 API 中的 Javadoc</li>
</ul>
<h3 id="_5">糟糕的註解</h3>
<ul>
<li>大部分的註解</li>
<li>多餘的註解： 沒比程式碼本身透露更多資訊的註解</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nf">Person</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">person</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<ul>
<li><del>每個函式，每個變數都該有註解來說明</del>。<strong>不，別這麼做</strong></li>
<li>把暫時無用的程式碼註解掉並留著，是很惱人的 → 版本控制會幫我們記下它</li>
</ul>
<h2 id="5">第5章：編排</h2>
<ul>
<li>選擇一些簡單的縮排規則，並持續的運用它<ul>
<li>如果在一個團隊，所有成員都該依循著一套統一的編排規則</li>
</ul>
</li>
<li>團隊合作時，事先決定編排方式是值得的<ul>
<li>該在哪裡放括號</li>
<li>縮排寬度多少</li>
<li>如何命名變數、類別、方法</li>
</ul>
</li>
<li>編排是一種溝通方式，可以嚴重影響可讀性，所以我們要很重視它</li>
<li>垂直邊排： 一份程式檔大概多長比較好？<ul>
<li>一份重要的大型專案也可以在大多數程式檔都只有200行左右的情況下完成</li>
<li>這沒有硬性規定。但要知道<strong>簡短的程式檔總是比大型的程式檔容易理解</strong></li>
</ul>
</li>
<li>變數應該被宣告在接近它被使用的地方<ul>
<li>區域變數應該在函式的最上方被宣告</li>
<li>迴圈的控制變數應該在回圈敘述內宣告</li>
</ul>
</li>
</ul>
<h3 id="_6">函式間的編排</h3>
<ul>
<li>如果一個函式呼叫了另一個函式，這個函式最好放在被呼叫函式的上方</li>
<li>概念高度相似的函式也應該垂直的放在一起<ul>
<li>也許是類似的命名或相同工作的變異版本，就算沒相互呼叫，還是應該放在一起</li>
</ul>
</li>
<li>談到了垂直的寬度後，那水平的寬度呢?<ul>
<li>雖然我們喜歡較短的程式碼，但只要是<strong>不需要用到捲軸捲到右方就可以稱為適當的寬度</strong></li>
</ul>
</li>
<li>有時候if, while或簡單的函式，可以被縮減為一行，讓我們違反一般的縮排規則，<strong>不建議這麼做</strong></li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">render</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="s">""</span><span class="p">;}</span>

<span class="c1">//better</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">render</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">""</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3 id="_7">使用空行、空白</h3>
<ul>
<li>每一段程式碼都代表一個完整思緒，而我們用空行來區隔它們<ul>
<li>而如果程式碼們是相關的，它們就該是垂直緊密的</li>
<li>相似的概念應該要放在同一份檔案中</li>
</ul>
</li>
<li>我們用水平的空白來區分高度和低度相關的概念，也可以作為強調用，下面的程式碼是書中一個很棒的例子<ul>
<li>注意到return那行，這裡用空格來強調運算子的優先權</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Quadratic</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">root1</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">determinant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">determinant</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">sqrt</span><span class="p">(</span><span class="n">determinant</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="p">......</span>
<span class="p">}</span>
</pre></div>
<h2 id="6">第6章：物件及資料結構</h2>
<ul>
<li><strong>資料結構容易新增函式，而物件容易增加新類別。</strong> 反之亦然</li>
<li>模組不該知道它操作的物件的內部操作</li>
<li>別使用一連串的程式呼叫</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">outputDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctxt</span><span class="p">.</span><span class="na">getOptions</span><span class="p">().</span><span class="na">getScratchDir</span><span class="p">().</span><span class="na">getAbsolutePaty</span><span class="p">();</span>

<span class="c1">//refactored</span>
<span class="n">Option</span><span class="w"> </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctxt</span><span class="p">.</span><span class="na">getOptions</span><span class="p">();</span>
<span class="n">File</span><span class="w"> </span><span class="n">scratchDir</span><span class="w"> </span><span class="o">=</span><span class="n">opts</span><span class="p">.</span><span class="na">getScractchDir</span><span class="p">();</span>
<span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">outputDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scratchDir</span><span class="p">.</span><span class="na">getAbsolutePath</span><span class="p">();</span>
</pre></div>
<h2 id="7">第7章：錯誤處理</h2>
<ul>
<li>例外處理應該要能提供<strong>有用的錯誤訊息</strong>，<ul>
<li>e.g, 哪裡發生錯誤、錯誤型態是什麼</li>
</ul>
</li>
<li>別回傳 null，試著拋出例外事件是更好的作法<ul>
<li>函式回傳 null 已經夠糟了，但傳遞 null 進去更是糟糕透頂</li>
</ul>
</li>
<li>Wrapper: 從呼叫者的角度定義例外class -&gt; 減少依賴</li>
</ul>
<p>Wrapper Example</p>
<div class="highlight"><pre><span></span><span class="c1">// original</span>
<span class="n">ACMEPort</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ACMEPort</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>

<span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">port</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">DeviceResponseException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">reportPortError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">"Device response exception"</span><span class="p">,</span><span class="w"> </span><span class="s">"e"</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ATM1212UnlockedException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">reportPortError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">"ATM1212UnlockedException"</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">HMXError</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">reportPortError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">"Device response exception"</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>


<span class="c1">// refactored</span>
<span class="n">LocalPort</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LocalPort</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
<span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">port</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">PortDeviceFailure</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">reportPortError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LocalPort</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ACMEPort</span><span class="w"> </span><span class="n">innerPort</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">LocalPort</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">portNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">innerPort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ACMEPort</span><span class="p">(</span><span class="n">portNumber</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">innerPort</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">DeviceResponseException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PortDeviceFailure</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ATM1212UnlockedException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PortDeviceFailure</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">GMXError</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PortDeviceFailure</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h2 id="8">第8章：邊界</h2>
<ul>
<li>學習型測試： 不在產品程式（production）裡實驗新的東西，而是另外寫測試程式，來了解第三方軟體<ul>
<li>學習型測試不會花太多額外時間（因為原本就要研究 API），而且能用來<strong>確認第三方軟體是否能照我們預期的執行</strong></li>
<li>如果沒有這種<strong>邊界測試</strong>來減輕版本更新時的整合負擔，我們<strong>只能一直停留在舊的版本</strong></li>
</ul>
</li>
<li>避免我們的程式過度的使用第三方軟體的特殊之處，最好是依靠在可以控制的程式之上。免得到最後反而受到第三方軟體的控制</li>
<li>使用尚未存在的程式（e.g., 尚未開定義好）<ul>
<li>自行定義介面，並用 adapter 封裝與 API 的互動<ul>
<li>額外的好處是如果 API 升級，也只需要改動 adapter</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="9">第9章：單元測試</h2>
<ul>
<li>為什麼要寫測試？<ul>
<li>測試讓程式保有彈性</li>
<li>不用怕修改程式會造成程式結果不如預期</li>
</ul>
</li>
<li>測試程式跟產品程式一樣重要，一樣需要整潔<ul>
<li><strong>可讀性</strong>造就了整潔的測試程式</li>
<li>但是測試程式並不需要產品程式一樣的有效率</li>
</ul>
</li>
<li>整潔測試程式的 5 個原則 F.I.R.S.T.<ol>
<li>Fast: 能快速的被執行</li>
<li>Independent: 測試程式不該相互依賴</li>
<li>Repeatable: 可以在任何環境重複執行</li>
<li>Self-Validating: 輸出 boolean ，你不該手動比較兩個檔案才知道有沒有通過測試</li>
<li>Timely: 單元測試要在恰好能使其通過的產品程式<strong>之前</strong>不久撰寫</li>
</ol>
</li>
<li>BUILD-OPERATE-CHECK<ol>
<li>建立測試資料</li>
<li>操作測試資料</li>
<li>檢查「操作測試資料」後的結果是否如預期</li>
</ol>
</li>
<li><del>一個測試只能有一個assert</del> → <strong>一個測試只測試一個概念</strong></li>
<li>TDD (Test Driven Development) 三大法則<ol>
<li>在撰寫一個單元測試前，不可撰寫任何產品程式</li>
<li>只撰寫剛好無法通過的單元測試，不能編譯也算無法通過</li>
<li>只撰寫剛好能通過當前測試的產品程式</li>
</ol>
</li>
</ul>
<h2 id="10">第10章：類別</h2>
<ul>
<li>Java的慣例<ul>
<li>類別以變數開頭<ul>
<li><code>public static final</code> → <code>private static</code> → <code>private</code> &gt;&gt;&gt;&gt;&gt; <code>public</code> (幾乎很少有理由要用到)</li>
</ul>
</li>
<li>public 函式緊跟在變數</li>
<li>private 的工具函式，會跟在呼叫它的函式後</li>
</ul>
</li>
<li>不用過度執著於封裝，有時候為了讓測試程式存取， protected 是必要的</li>
<li>設計程式時，一次只專注在「讓程式運作」或「讓程式整潔」之一，而兩者是同樣重要的</li>
<li>系統應該要由很多小的 class 組成，而不是少數的大 class 組成</li>
<li>我們架構的系統，在未來想新增或修改功能時，應該要儘可能不動到其他程式碼</li>
<li><strong>開放閉合原則</strong>： 類別應該要對擴充有開放性，對修改有封閉性</li>
<li><strong>相依性反向原則</strong>： 類別應該要相依於抽象概念，而不是相依在具體細節</li>
</ul>
<h3 id="_8">職責</h3>
<ul>
<li>class 除了簡短還是要簡短<ul>
<li>在函式計算行數，class算的是<strong>職責的數量</strong></li>
</ul>
</li>
<li>class的命名要能足夠描寫他的職責<ul>
<li>如果無法取個明確的名稱，這個 class 可能就太大了</li>
<li>模稜兩可的名稱，代表 class 可能包含愈多的職責，而這是我們不希望的</li>
<li>用 25 個字詞為這個 class 寫出簡短的描述，而不使用到模糊的字眼，這樣的 class 就是職責數量恰當</li>
</ul>
</li>
<li><strong>單一職責原則</strong>： 一個 class 或 module 應該有也只能有一個修改的理由</li>
</ul>
<h3 id="_9">凝聚性</h3>
<ul>
<li>class 只應該要有少量的實體變數， class 的每個方法都應該操作一個或更多這些變數</li>
<li>不用也不太可能產生最大凝聚性類別<ul>
<li>但當凝聚性增加，就代表方法和變數結合成一個邏輯的整體，這是我們所希望的</li>
</ul>
</li>
<li>class 累積越來越多實體變數，但只有少數函式操作著他們，就會開始喪失凝聚性<ul>
<li>而這就是應該拆開 class 的時候了！！！</li>
<li>不用重新撰寫程式，而是應該改變它<ul>
<li>先寫好一套驗證的測試程式，一次一個地改變</li>
<li>每一次變動都重新驗證是否如預期執行</li>
<li>重構完成</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=[Note] Clean Code &amp;url=https://blog.wei-lee.me/posts/tech/2018/11/clean-code" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2018/11/clean-code" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2018/11/clean-code&amp;title=[Note] Clean Code" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=[Note] Clean Code&amp;body=https://blog.wei-lee.me/posts/tech/2018/11/clean-code" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/note.html">Note</a><a href="https://blog.wei-lee.me/tag/software-engineering.html">Software Engineering</a> </aside>
<div class="clear"></div>
</section>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2018/11/clean-code" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
<aside class="post-nav">
<div class="clear"></div>
</aside>
</div>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten © 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> • Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> •
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>