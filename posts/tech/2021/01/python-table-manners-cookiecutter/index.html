
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Python Table Manners - Cookiecutter 專案模板 </title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="Python Table Manners 系列 整理了各種開發 Python 專案能用到的工具們 如果每次重新開啟新專案都得重複設定的步驟就很浪費時間 所以我將它們整理成專案模板 cookiecutter-python-template..." name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="Python" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="Python Table Manners - Cookiecutter 專案模板 " prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="Python Table Manners 系列 整理了各種開發 Python 專案能用到的工具們 如果每次重新開啟新專案都得重複設定的步驟就很浪費時間 所以我將它們整理成專案模板 cookiecutter-python-template..." prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale"/>
<meta content="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter" prefix="og: http://ogp.me/ns#" property="og:url"/>
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2021-01-01 13:30:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="Python" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="Python Table Manners - Cookiecutter 專案模板 " name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter" name="twitter:url"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" name="twitter:image:src"/>
<meta content="Python Table Manners 系列 整理了各種開發 Python 專案能用到的工具們 如果每次重新開啟新專案都得重複設定的步驟就很浪費時間 所以我將它們整理成專案模板 cookiecutter-python-template..." name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Python Table Manners - Cookiecutter 專案模板",
  "headline": "Python Table Manners - Cookiecutter 專案模板",
  "datePublished": "2021-01-01 13:30:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "https://blog.wei-lee.me//images/cover.jpeg",
  "url": "https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter",
  "description": "Python Table Manners 系列 整理了各種開發 Python 專案能用到的工具們 如果每次重新開啟新專案都得重複設定的步驟就很浪費時間 所以我將它們整理成專案模板 cookiecutter-python-template..."
}
</script>
</meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2021", "item": "https://blog.wei-lee.me/posts/tech/2021"}, {"@type": "ListItem", "position": 5, "name": "01", "item": "https://blog.wei-lee.me/posts/tech/2021/01"}, {"@type": "ListItem", "position": 6, "name": "Python table manners cookiecutter", "item": "https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "Python Table Manners - Cookiecutter 專案模板", "about": "Tech", "datePublished": "2021-01-01 13:30"}</script></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-🏠 Home" role="presentation"><a href="/"><span>🏠 Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-👨‍💻 Tech active" role="presentation"><a href="/category/tech.html"><span>👨‍💻 Tech</span></a></li>
<li class="nav-📚 Book Digest" role="presentation"><a href="/category/book.html"><span>📚 Book Digest</span></a></li>
<li class="nav-💬 Gossiping" role="presentation"><a href="/category/gossiping.html"><span>💬 Gossiping</span></a></li>
<li class="nav-🗄️ Archives" role="presentation"><a href="/archives.html"><span>🗄️ Archives</span></a></li>
<li class="nav-📚 Series" role="presentation"><a href="/series_list.html"><span>📚 Series</span></a></li>
<li class="nav-🔍 Search" role="presentation"><a href="/search.html"><span>🔍 Search</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            Python Table Manners - Cookiecutter 專案模板
        </h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2021/01/01 - Fri">2021/01/01 - Fri</time>
          • 2 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me//images/cover.jpeg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p><a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-series">Python Table Manners 系列</a> 整理了各種開發 Python 專案能用到的工具們<br/>
如果每次重新開啟新專案都得重複設定的步驟就很浪費時間<br/>
所以我將它們整理成專案模板 <a href="https://github.com/Lee-W/cookiecutter-python-template">cookiecutter-python-template</a><br/>
下次創立新專案的時候，只要透過這個模板就能快速產生已經設定好的空白專案<br/>
這篇文章會跟大家聊聊如何使用這個專案模板和如何建立自己的專案模板</p>
<!--more-->
<div class="toc">
<ul>
<li><a href="#cookiecutter">什麼是 Cookiecutter？</a></li>
<li><a href="#cookiecutter_1">如何使用 Cookiecutter 模板？</a></li>
<li><a href="#cookiecutter_2">如何製作 Cookiecutter 模板？</a><ul>
<li><a href="#hook">hook</a></li>
</ul>
</li>
<li><a href="#reference">Reference</a></li>
</ul>
</div>
<h2 id="cookiecutter">什麼是 Cookiecutter？</h2>
<p><a href="https://github.com/cookiecutter/cookiecutter">Cookiecutter</a> 是以 Python 撰寫，透過已有的專案模板產生新專案的工具<br/>
雖然是用 Python 撰寫，但不限於只能使用在 Python 專案<br/>
甚至也不太需要會寫 Python，就能製作屬於自己的專案模板<br/>
目前在 Github 上，已經有超過 5,000 個已經製作好的 cookiecutter 模板</p>
<p>相較於每次都從前一個專案或空專案複製設定的做法<br/>
Cookiecutter 能確保我們不會少代換掉舊的設定（e.g., 舊專案名稱）<br/>
並減少需要代換這些內容的人力</p>
<h2 id="cookiecutter_1">如何使用 Cookiecutter 模板？</h2>
<p>以我製作的模板 <a href="https://github.com/Lee-W/cookiecutter-python-template">cookiecutter-python-template</a> 為例</p>
<p>首先要安裝 cookiecutter ，建議使用 pipx</p>
<div class="highlight"><pre><span></span><code>pipx<span class="w"> </span>install<span class="w"> </span>cookiecutter
</code></pre></div>
<p>再來要指定產生新專案要用的模板</p>
<div class="highlight"><pre><span></span><code>cookiecutter<span class="w"> </span>https://github.com/Lee-W/cookiecutter-python-template
</code></pre></div>
<p>接著會進入互動式介面，詢問專案相關的設定<br/>
每個問題依序會以 <code>值 [預設值]: 使用者輸入</code> 的形式出現<br/>
有的<code>值</code>會因為前面的回答不同，而產生對應的預設值<br/>
<code>值</code> (e.g., python_table_manners) 會被帶回專案模板去取代模板中的變數 (e.g., project_slug)</p>
<div class="highlight"><pre><span></span><code><span class="n">project_name</span><span class="w"> </span><span class="p">[</span><span class="n">Python</span><span class="w"> </span><span class="n">Project</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">manners</span>
<span class="n">project_slug</span><span class="w"> </span><span class="p">[</span><span class="n">python_table_manners</span><span class="p">]</span><span class="o">:</span>
<span class="n">project_description</span><span class="w"> </span><span class="p">[</span><span class="n">Short</span><span class="w"> </span><span class="n">Description</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Python</span><span class="w"> </span><span class="n">Project</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">cookiecutter</span><span class="w"> </span><span class="n">template</span>
<span class="n">github_username</span><span class="w"> </span><span class="p">[</span><span class="n">Lee</span><span class="o">-</span><span class="n">W</span><span class="p">]</span><span class="o">:</span>
<span class="n">github_url</span><span class="w"> </span><span class="p">[</span><span class="n">http</span><span class="o">:</span><span class="c1">//github.com/Lee-W/python_table_manners]:</span>
<span class="n">author_name</span><span class="w"> </span><span class="p">[</span><span class="n">Wei</span><span class="w"> </span><span class="n">Lee</span><span class="p">]</span><span class="o">:</span>
<span class="n">author_email</span><span class="w"> </span><span class="p">[</span><span class="n">weilee</span><span class="p">.</span><span class="n">rx</span><span class="p">@</span><span class="n">gmail</span><span class="p">.</span><span class="n">com</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="n">test</span><span class="p">@</span><span class="n">test</span><span class="p">.</span><span class="n">com</span>
<span class="n">python_version</span><span class="w"> </span><span class="p">[</span><span class="mf">3.7</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="mf">3.9</span>
<span class="n">Select</span><span class="w"> </span><span class="n">dependency_management_tool</span><span class="o">:</span>
<span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pipenv</span>
<span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">poetry</span>
<span class="n">Choose</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span>
<span class="n">use_strict_mypy_config</span><span class="w"> </span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="n">n</span>
<span class="n">Select</span><span class="w"> </span><span class="n">open_source_license</span><span class="o">:</span>
<span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">MIT</span><span class="w"> </span><span class="n">license</span>
<span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">BSD</span><span class="w"> </span><span class="n">license</span>
<span class="mi">3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">ISC</span><span class="w"> </span><span class="n">license</span>
<span class="mi">4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">Software</span><span class="w"> </span><span class="n">License</span><span class="w"> </span><span class="mf">2.0</span>
<span class="mi">5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">GNU</span><span class="w"> </span><span class="n">General</span><span class="w"> </span><span class="n">Public</span><span class="w"> </span><span class="n">License</span><span class="w"> </span><span class="n">v3</span>
<span class="mi">6</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Not</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="n">source</span>
<span class="n">Choose</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
</code></pre></div>
<p>所有問題都回答完之後就會出現新的資料夾 python_table_manners<br/>
（模板以 project_slug 作為產生的資料夾名稱）<br/>
可以看到資料夾裡面已經有前幾篇提到會用到的相關檔案</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>tree<span class="w"> </span>python_table_manners

.
├──<span class="w"> </span>CHANGELOG.md
├──<span class="w"> </span>LICENSE
├──<span class="w"> </span>docs
│<span class="w">   </span>├──<span class="w"> </span>README.md
│<span class="w">   </span>└──<span class="w"> </span>contributing.md
├──<span class="w"> </span>mkdocs.yml
├──<span class="w"> </span>pyproject.toml
├──<span class="w"> </span>python_table_manners
│<span class="w">   </span>├──<span class="w"> </span>__init__.py
│<span class="w">   </span>└──<span class="w"> </span>python_table_manners.py
├──<span class="w"> </span>setup.cfg
├──<span class="w"> </span>tasks
│<span class="w">   </span>├──<span class="w"> </span>__init__.py
│<span class="w">   </span>├──<span class="w"> </span>build.py
│<span class="w">   </span>├──<span class="w"> </span>common.py
│<span class="w">   </span>├──<span class="w"> </span>doc.py
│<span class="w">   </span>├──<span class="w"> </span>env.py
│<span class="w">   </span>├──<span class="w"> </span>git.py
│<span class="w">   </span>├──<span class="w"> </span>secure.py
│<span class="w">   </span>├──<span class="w"> </span>style.py
│<span class="w">   </span>└──<span class="w"> </span>test.py
└──<span class="w"> </span>tests
<span class="w">    </span>├──<span class="w"> </span>__init__.py
<span class="w">    </span>└──<span class="w"> </span>test_python_table_manners.py

<span class="m">4</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">20</span><span class="w"> </span>files
</code></pre></div>
<h2 id="cookiecutter_2">如何製作 Cookiecutter 模板？</h2>
<p>在新的專案內，先開個名稱為 <code>{{ cookiecutter.project_slug }}</code> 的資料夾<br/>
所有模板的內容都將放在這裡<br/>
e.g., <a href="https://github.com/Lee-W/cookiecutter-python-template/tree/0.6.1/%7B%7Bcookiecutter.project_slug%7D%7D">cookiecutter-python-template/{{ cookiecutter.project_slug }}</a></p>
<p>接著將想問使用者的問題寫進 <code>cookiecutter.json</code><br/>
可以參考 <a href="https://github.com/Lee-W/cookiecutter-python-template/blob/0.6.1/cookiecutter.json">cookiecutter-python-template/cookiecutter.json</a><br/>
key 就是詢問使用者的問題，value 就是預設值</p>
<p>對 <a href="https://jinja.palletsprojects.com/en/2.11.x/">jinja2</a> 熟悉的讀者，可能看到 <code>{{ }}</code> 就發現了<br/>
cookiecutter 背後是透過 jinja2 來取代這些值<br/>
模板中所有 <code>{{ cookiecutter.key_from_cookiecutter_json }}</code> 都會被代換成 cookiecutter.json 裡面的值<br/>
因為是使用 jinja2 ，當然也能運用它方便的語法<br/>
並且不限定於模板內才能使用，甚至在 cookiecutter.json 裡面都能使用</p>
<p>e.g.,</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"project_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Python Project"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"project_slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{ cookiecutter.project_name.lower().replace(' ', '_').replace('-', '_') }}"</span><span class="p">,</span>
<span class="w">    </span><span class="err">...</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"_template_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.6.1"</span>
<span class="p">}</span>
</code></pre></div>
<p>（from <a href="https://github.com/Lee-W/cookiecutter-python-template/blob/0.6.1/cookiecutter.json">cookiecutter-python-template/cookiecutter.json @ 0.6.1</a>）</p>
<p>如果有一些值不想問使用者，可以在 key 的最前面加上 <code>_</code><br/>
(e.g., <code>_template_version</code>)</p>
<p>當然也能使用 jinja2 的 if/else 語法，針對使用者的回答產生不同的模板內容<br/>
以下的範例就是使用者選擇不同的 dependency_management_tool 時，env.py 的指令內容會跟著改變</p>
<!-- blacken-docs:off -->
<div class="highlight"><pre><span></span><code><span class="nd">@task</span>
<span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Install production dependencies"""</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">cookiecutter</span><span class="o">.</span><span class="n">dependency_management_tool</span> <span class="o">==</span> <span class="s1">'pipenv'</span> <span class="o">-%</span><span class="p">}</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">"pipenv install --deploy"</span><span class="p">)</span>
    <span class="p">{</span><span class="o">%-</span> <span class="k">elif</span> <span class="n">cookiecutter</span><span class="o">.</span><span class="n">dependency_management_tool</span> <span class="o">==</span> <span class="s1">'poetry'</span> <span class="o">-%</span><span class="p">}</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">"poetry install --no-dev"</span><span class="p">)</span>
    <span class="p">{</span><span class="o">%-</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<p>（from <a href="https://github.com/Lee-W/cookiecutter-python-template/blob/0.6.1/%7B%7Bcookiecutter.project_slug%7D%7D/tasks/env.py#L18">cookiecutter-python-template/{{cookiecutter.project_slug}}/tasks/env.py @ 0.6.1</a>）</p>
<!-- blacken-docs:on -->
<p>除了預設基本的 jinja2 語法外， cookiecutter 還提供了常用的 jinja2 extensions<br/>
這些可以在 <a href="https://cookiecutter.readthedocs.io/en/latest/advanced/hooks.html">Template Extensions</a> 找到</p>
<p>比較可惜的是 Cookiecutter 並不支援追加問答<br/>
假設你想在使用者回答 dependency_management_tool 後<br/>
因為使用者選擇了 poetry，接續問要用哪個 poetry 版本<br/>
但當使用者選 pipenv 則不問這個問題<br/>
這樣的設計在 cookiecutter 是做不到的<br/>
（Read the discussion 👉 <a href="https://github.com/cookiecutter/cookiecutter/issues/913#issuecomment-286571701">Conditional follow-up questions based on prior answers #913</a>）</p>
<h3 id="hook">hook</h3>
<p>如果有嘗試用我的專案模板產生專案，並且選擇不同的 dependency_management_tool<br/>
你會發現在選擇 pipenv 的時候會有 Pipfile，但選 poetry 的時候不會有<br/>
這就是透過 post_gen_project.py 做到的</p>
<p><a href="https://github.com/Lee-W/cookiecutter-python-template/tree/0.6.1/hooks">cookiecutter-python-template/hooks/</a>中，可以看到以下兩個檔案</p>
<ul>
<li><code>pre_gen_project.py</code>: 建立專案前要執行的內容</li>
<li><code>post_gen_project.py</code>: 建立專案後要執行的內容</li>
</ul>
<p>在 post_gen_project.py 中會做判斷，只要使用者不是選 pipenv ，就會把 Pipfile 刪除</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">if</span> <span class="s2">"{{ cookiecutter.dependency_management_tool }}"</span> <span class="o">!=</span> <span class="s2">"pipenv"</span><span class="p">:</span>
        <span class="n">remove_pipfile</span><span class="p">()</span>
</code></pre></div>
<p>（from <a href="https://github.com/Lee-W/cookiecutter-python-template/blob/0.6.1/hooks/post_gen_project.py#L8">cookiecutter-python-template/hooks/post_gen_project.py</a>）</p>
<p>（Read more 👉 <a href="https://cookiecutter.readthedocs.io/en/latest/advanced/hooks.html">Using Pre/Post-Generate Hooks (0.7.0+)</a>）</p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://realpython.com/python-application-layouts/">Python Application Layouts: A Reference</a></li>
<li><a href="https://github.com/audreyr/cookiecutter-pypackage">audreyr/cookiecutter-pypackage</a></li>
<li><a href="https://github.com/wemake-services/wemake-python-package">wemake-services/wemake-python-package</a></li>
<li><a href="https://sourcery.ai/blog/python-best-practices/">How to set up a perfect Python project</a></li>
<li><a href="https://medium.com/better-programming/understanding-best-practice-python-tooling-by-comparing-popular-project-templates-6eba49229106">Understanding Best Practice Python Tooling by Comparing Popular Project Templates</a></li>
</ul>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=Python Table Manners - Cookiecutter 專案模板 &amp;url=https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter&amp;title=Python Table Manners - Cookiecutter 專案模板" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=Python Table Manners - Cookiecutter 專案模板&amp;body=https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/python.html">Python</a> </aside>
<div class="clear"></div>
<div class="series">
<p>This post is part 12 of the "Python Table Manners" series:</p>
<ol class="parts">
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-series">Python Table Manners 系列</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-dependency-mangement">Python Table Manners - 虛擬環境和套件管理</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-test-1">Python Table Manners - 測試 (一)</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-test-2">Python Table Manners - 測試 (二)</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style">Python Table Manners - 程式碼風格</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-manage-trivial-tasks">Python Table Manners - 管理繁瑣任務</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-pre-commit">Python Table Manners - pre-commit: git commit 前做完檢查</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen">Python Table Manners - Commitizen: 規格化 commit message</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security">Python Table Manners - 安全性檢查</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/04/python-table-manners-documentation">Python Table Manners - 文件</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/12/python-table-manner-continuous-integration">Python Table Manners - 持續整合/部署</a>
</li>
<li class="active">
<a href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter">Python Table Manners - Cookiecutter 專案模板</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manner-editor">Python Table Manners 番外 - 編輯器</a>
</li>
</ol>
</div>
</section>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
<aside class="post-nav">
<div class="clear"></div>
</aside>
</div>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten © 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> • Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> •
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>