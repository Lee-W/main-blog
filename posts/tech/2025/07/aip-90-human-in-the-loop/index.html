
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>AIP-90 - 圓環之理的人們  - Airflow 也要簽訂契約成為魔法少女了嗎</title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="Human in the loop Loop...loop...圓環 圓環，圓環，圓環之理！ 原來是在圓環之理的人類們 那不就是魔法少女嗎！" name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="Airflow" name="tags"/>
<meta content="Airflow 3.1" name="tags"/>
<meta content="Airflow Improvement Proposal" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="AIP-90 - 圓環之理的人們  - Airflow 也要簽訂契約成為魔法少女了嗎" prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="Human in the loop Loop...loop...圓環 圓環，圓環，圓環之理！ 原來是在圓環之理的人類們 那不就是魔法少女嗎！" prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale">
<meta content="https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" prefix="og: http://ogp.me/ns#" property="og:url">
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2025-07-04 19:00:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="Airflow" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="Airflow 3.1" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="Airflow Improvement Proposal" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me/images/posts-image/2025-aip-90/law-of-cycles.jpg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="AIP-90 - 圓環之理的人們  - Airflow 也要簽訂契約成為魔法少女了嗎" name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" name="twitter:url"/>
<meta content="https://blog.wei-lee.me/images/posts-image/2025-aip-90/law-of-cycles.jpg" name="twitter:image:src"/>
<meta content="Human in the loop Loop...loop...圓環 圓環，圓環，圓環之理！ 原來是在圓環之理的人類們 那不就是魔法少女嗎！" name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "AIP-90 - 圓環之理的人們 - Airflow 也要簽訂契約成為魔法少女了嗎",
  "headline": "AIP-90 - 圓環之理的人們 - Airflow 也要簽訂契約成為魔法少女了嗎",
  "datePublished": "2025-07-04 19:00:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "",
  "url": "https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop",
  "description": "Human in the loop Loop...loop...圓環 圓環，圓環，圓環之理！ 原來是在圓環之理的人類們 那不就是魔法少女嗎！"
}
</script>
</meta></meta></meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2025", "item": "https://blog.wei-lee.me/posts/tech/2025"}, {"@type": "ListItem", "position": 5, "name": "07", "item": "https://blog.wei-lee.me/posts/tech/2025/07"}, {"@type": "ListItem", "position": 6, "name": "Aip 90 human in the loop", "item": "https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "AIP-90 - 圓環之理的人們", "about": "Tech", "datePublished": "2025-07-04 19:00"}</script><meta content="summary" name="twitter:card"/><meta content="https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" property="og:url"/><meta content="article" property="og:type"/><meta content="AIP-90 - 圓環之理的人們" property="og:title"/><meta content="C" property="og:locale"/></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-🏠 Home" role="presentation"><a href="/"><span>🏠 Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-👨‍💻 Tech active" role="presentation"><a href="/category/tech.html"><span>👨‍💻 Tech</span></a></li>
<li class="nav-📚 Book Digest" role="presentation"><a href="/category/book.html"><span>📚 Book Digest</span></a></li>
<li class="nav-💬 Gossiping" role="presentation"><a href="/category/gossiping.html"><span>💬 Gossiping</span></a></li>
<li class="nav-🏷️ Tags" role="presentation"><a href="/tags.html"><span>🏷️ Tags</span></a></li>
<li class="nav-🗄️ Archives" role="presentation"><a href="/archives.html"><span>🗄️ Archives</span></a></li>
<li class="nav-📚 Series" role="presentation"><a href="/series_list.html"><span>📚 Series</span></a></li>
<li class="nav-🔍 Search" role="presentation"><a href="/search.html"><span>🔍 Search</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            AIP-90 - 圓環之理的人們
            <br/>
<small class="post-subtitle-white">Airflow 也要簽訂契約成為魔法少女了嗎</small>
</h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2025/07/04 - Fri">2025/07/04 - Fri</time>
          • 2 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me/images/posts-image/2025-aip-90/law-of-cycles.jpg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p>Human in the loop<br/>
Loop...loop...圓環<br/>
圓環，圓環，圓環之理！<br/>
原來是在圓環之理的人類們<br/>
那不就是魔法少女嗎！</p>
<!--more-->
<p>不過 Human In The Loop 這個詞其實已經有其他的中文翻譯<br/>
我最先找到的是<code>人機迴圈</code>（<a href="https://cloud.google.com/discover/human-in-the-loop?hl=zh-TW">AI 與機器學習中的人機迴圈 (HITL) 是什麼？</a>）<br/>
後來朋友推薦<code>人類參與流程</code> (<a href="https://www.pmi.org.tw/?p=14924">【PMI Insight 翻譯精選】人類參與流程（Human-in-the-Loop）：那些專案經理需要知道的事 - 社團法人國際專案管理學會台灣分會</a>)，我比較喜歡這個</p>
<p><img alt="law-of-cycles" src="/images/posts-image/2025-aip-90/law-of-cycles.jpg"/></p>
<p>話說回來，圓環之理（円環の理），其實也有自己的英文翻譯<br/>
Law of Cycles<br/>
看來不管怎樣這都不是 Airflow 會成為魔法少女的世界線<br/>
<del>這樣的世界線沒有留戀的必要</del></p>
<div class="toc">
<ul>
<li><a href="#_1">筆記</a><ul>
<li><a href="#_2">動機</a></li>
<li><a href="#_3">考量因素</a></li>
<li><a href="#_4">技術細節</a></li>
<li><a href="#_5">使用者會如何被影響</a></li>
<li><a href="#_6">其他考慮？</a></li>
<li><a href="#aip">AIP 完成要件</a></li>
</ul>
</li>
<li><a href="#_7">後記</a></li>
<li><a href="#reference">Reference</a></li>
</ul>
</div>
<h2 id="_1">筆記</h2>
<ul>
<li>原文連結: <a href="https://cwiki.apache.org/confluence/display/AIRFLOW/AIP-90+Human+in+the+loop">AIP-90</a></li>
</ul>
<h3 id="_2">動機</h3>
<ul>
<li>部分 workflow 需要人類決策介入（尤其是 GenAI）</li>
<li>常見情境<ol>
<li>human branch operator ，由人決定下一個該執行的任務 (e.g., 內容審核)</li>
<li>同意 / 拒絕</li>
<li>由人提供輸入</li>
</ol>
</li>
</ul>
<h3 id="_3">考量因素</h3>
<ul>
<li>獨立於 airflow 核心，並且是可選用的 provider</li>
<li>特定身份的人才能回應這種任務<ul>
<li>如果未來 Airflow 支援使用者群組，應該要改用使用者群組而非身份（目前是 <a href="https://airflow.apache.org/docs/apache-airflow-providers-fab/stable/index.html">fab</a> 的概念）</li>
<li>當存在多個擁有身份的人，第一位動作者將被視為完成任務的人，其他人將不再能執行動作</li>
</ul>
</li>
<li>等待輸入中的任務的狀態是 <code>已延後</code></li>
<li>UI<ul>
<li>在 UI 顯示正等待使用者輸入的任務們</li>
<li>使用者可以根據任務需求，透過以下兩種做法完成任務<ul>
<li><code>多個選項中擇一</code>或 <code>同意 / 拒絕</code>（UI 應顯示選項）</li>
<li>輸入（UI 顯示輸入表格，類似 dag Param）</li>
</ul>
</li>
</ul>
</li>
<li>API<ul>
<li>URL 端點<ol>
<li>取得待輸入的任務的細節 (e.g., 包含上游 XCom 或可選選項)</li>
<li>標記任務為完成（要輸入任務或下一個任務所需的資料）</li>
<li>產生分享連結<ol>
<li>直接開啟，並導向所需細節的頁面</li>
<li>在使用者已登入的情況下，直接一鍵完成任務（e.g., 電子郵件中的同意連結）</li>
<li><strong>資安考量</strong><ul>
<li>這個端點預設為不開啟，要在 airflow 設定開啟</li>
<li>產生連結時，應產生 token，以避免 CSRF</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ul>
</li>
<li>不受這個 AIP 影響，但相關的現有 dag 、 任務行爲<ul>
<li>Airflow 管理員或有權限者，可以直接將任務標記為"成功" 或 "失敗"（同一般任務）<ul>
<li>"成功" / "失敗"，不代表 "同意" / "拒絕"</li>
</ul>
</li>
<li>等待輸入中的 Dag執行 的狀態會是 <code>執行中</code> (同 deferrable operator)</li>
<li>XCom 輸入可以作為人類輸入的參考，同理 XCom 輸出也可能在任務中受人類輸入改變，並且被下游任務使用</li>
</ul>
</li>
<li>待解決<ul>
<li>通知跟設定應該要能依據組織或人的層級做設定，而不是 dag 層級</li>
</ul>
</li>
</ul>
<h3 id="_4">技術細節</h3>
<ul>
<li>Provider 名稱<ul>
<li>apache-airflow-providers-human (Human Interaction)</li>
</ul>
</li>
<li>任務操作器<ul>
<li><code>HumanOperator(BaseOperator)</code><ul>
<li>參數<ul>
<li><code>subject: str</code> (templated 欄位)</li>
<li><code>body: str | None</code> (templated 欄位)</li>
<li><code>params: ParamDict | None</code>: 讓使用者輸入的表格，可以放入驗證</li>
<li><code>options: list[str]</code></li>
<li><code>default: str | None</code></li>
</ul>
</li>
</ul>
</li>
<li><code>ApprovalOperator(HumanOperator)</code><ul>
<li>參數<ul>
<li><code>options: list[str] = ["Approve", "Reject"]</code></li>
</ul>
</li>
</ul>
</li>
<li><code>HumanTerminationOperator(HumanOperator)</code><ul>
<li>參數<ul>
<li><code>options: list[str] = ["Approve", "Reject"]</code></li>
</ul>
</li>
</ul>
</li>
<li><code>HumanBranchOperator(HumanOperator)</code><ul>
<li>參數<ul>
<li><code>multiple: bool</code>: 是否可以多選</li>
</ul>
</li>
</ul>
</li>
<li><code>HumanEntryOperator(HumanOperator)</code></li>
</ul>
</li>
</ul>
<h3 id="_5">使用者會如何被影響</h3>
<p>大部分不受引響，但這個 provider 要新增一個新的資料表 (table) 用來存這些 human 任務的狀態，另外也要記錄被誰同意或拒絕</p>
<h3 id="_6">其他考慮？</h3>
<ul>
<li>相關 AIP<ul>
<li><a href="https://cwiki.apache.org/confluence/display/AIRFLOW/AIP-68+Extended+Plugin+Interface+for+React+Views">AIP-68</a> Extended Plugin Interface for React Views<ul>
<li>讓 UI 可以被 provider 客製化（e.g., 同意頁面）</li>
</ul>
</li>
</ul>
</li>
<li>如果人類沒有及時回應<ul>
<li>可以設定超時時間 (timeout)，超過就視為消極同意<ul>
<li>
<blockquote>
<p>咦？這樣對嗎？</p>
</blockquote>
</li>
</ul>
</li>
<li>如何達到重複通知、通知升級 (escalations)、超時？<ul>
<li>直接用現有的 dag 邏輯去整合</li>
<li>為了將降低複雜度，<strong>一個任務只能有一個完成活動</strong></li>
<li>初版先不做這些現有 dag 邏輯能整合的流程的最佳化，之後再說</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="aip">AIP 完成要件</h3>
<ul>
<li>provider 要被發佈到 PyPI 上，並且能跟 Airflow 3.1+ 一起安裝</li>
<li>最前面提到的三個 flow ，要可以透過 UI 跟 API 達到</li>
<li>足夠的範例跟文件</li>
</ul>
<h2 id="_7">後記</h2>
<p>在 GitHub 上用 <a href="https://github.com/orgs/apache/projects/508">AIP-90 - Human in the loop</a> 來記錄實作進度<br/>
雖然不是我提出，但是由我主導實作</p>
<p>筆記是 AIP-90 的原文<br/>
但經過一段時間的實作，實際上的程式碼已經跟原文有點分歧了<br/>
原本希望是個全新的 provider<br/>
在上一次的討論 <a href="https://lists.apache.org/thread/s3n1fgcql4l2l2h75qc50bb2l44brvwc">[Discussion] AIP-90: Should It Be Implemented in the Standard Provider or as a standalone provider?</a>，大家決定整進 standard provider<br/>
也統一了要用 HITL (Human in the Loop) ，而不是 Human 或我起初使用的 Interactive<br/>
一開始看到 Human 就覺得很危，至少翻譯成漢語是真的很危</p>
<ul>
<li><code>HumanOperator</code>（人類操作器）<ul>
<li>這是什麼 PUA 的功能嗎？</li>
</ul>
</li>
<li><code>HumanTerminationOperator</code>（人類終結操作器）<ul>
<li>我現在是跟 Galen Erso 團隊一樣被騙來做死星了嗎？</li>
</ul>
</li>
<li><code>HumanBranchOperator</code>（人類分支操作器）<ul>
<li>我不知道，但這聽起來像是暮蟬的劇情 🔪</li>
</ul>
</li>
</ul>
<p>峰迴路轉，昨天討論過後，這個功能可能又會整個進 Airflow 核心了<br/>
之後再寫一篇記錄一下實作的故事</p>
<p>在這篇文章中，我盡可能使用 Airflow 名詞的漢語翻譯，而不是原文<br/>
響應 Airflow 3.1 即將追加的的多國語系<br/>
畢竟我現在也是負責校對台灣漢語的程式碼負責人 (code owner) 跟翻譯負責人 (translation owner)</p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://www.bookwalker.com.tw/search?series=15248">劇場版 魔法少女小圓 [新篇]叛逆物語</a></li>
</ul>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=AIP-90 - 圓環之理的人們  - Airflow 也要簽訂契約成為魔法少女了嗎&amp;url=https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop&amp;title=AIP-90 - 圓環之理的人們" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=AIP-90 - 圓環之理的人們&amp;body=https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/airflow.html">Airflow</a><a href="https://blog.wei-lee.me/tag/airflow-31.html">Airflow 3.1</a><a href="https://blog.wei-lee.me/tag/airflow-improvement-proposal.html">Airflow Improvement Proposal</a> </aside>
<div class="clear"></div>
<div class="series">
<p>This post is part 4 of the "帶我讀 AIP" series:</p>
<ol class="parts">
<li>
<a href="https://blog.wei-lee.me/posts/tech/2024/11/aip-72">AIP-72 - Task Execution Interface aka Task SDK - Airflow 的 task 要支援 Python 以外的語言了！</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2024/11/aip-83">AIP-83 - Rename execution_date -&gt; logical_date and remove unique constraint - DAG 即將走入歷史</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2025/02/aip-83-amendment">AIP-83 修正案 - 把 execution date 都移掉，我們就能自由了嗎</a>
</li>
<li class="active">
<a href="https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop">AIP-90 - 圓環之理的人們 - Airflow 也要簽訂契約成為魔法少女了嗎</a>
</li>
</ol>
</div>
</section>
<aside class="post-nav">
<a class="post-nav-next" href="https://blog.wei-lee.me/posts/tech/2025/07/2025-06-30-07-06-open-source-report">
<section class="post-nav-teaser">
<i class="icon icon-arrow-left"></i>
<h2 class="post-nav-title">2025/06/30 - 07/06 開源貢獻週報</h2>
<p class="post-nav-excerpt">下個禮拜就要出發前往 EuroPython 了 這段期間除了上班以外的時間，都會拿來旅遊 大概沒什麼機會貢獻開源，所以就回來再說吧～</p>
<p class="post-nav-meta"><time datetime="2025/07/06 - Sun">2025/07/06 - Sun</time></p>
</section>
</a>
<a class="post-nav-prev" href="https://blog.wei-lee.me/posts/tech/2025/07/2025-06-23-06-29-open-source-report">
<section class="post-nav-teaser">
<i class="icon icon-arrow-right"></i>
<h2 class="post-nav-title">2025/06/23 - 06/29 開源貢獻週報</h2>
<p class="post-nav-excerpt">這是個充滿 PyCon TW 的一週</p>
<p class="post-nav-meta"><time datetime="2025/07/01 - Tue">2025/07/01 - Tue</time></p>
</section>
</a>
<div class="clear"></div>
</aside>
</div>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2025/07/aip-90-human-in-the-loop" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten © 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> • Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> •
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<!-- Add MathJax and FontAwesome for Asciidoc -->\
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    var mdSelector=".highlight pre code";
    var rstSelector=".highlight pre code";
    // For ":source-highlighter: highlight.js`" in asciidoc
    var adocSelector="pre.highlight > code[data-lang]"
    var selector=mdSelector;
    // Format code blocks and add line numbers
    function codestyling() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
        // No lines for plain text blocks
        if (!$(this).hasClass('language-text')) {
          var code = $(this);
          // Calculate amount of lines
          var lines = code.html().split(/\n(?!$)/g).length;
          var numbers = [];
          if (lines > 1) {
            lines++;
          }
          for (i = 1; i < lines; i++) {
            numbers += '<span class="line" aria-hidden="true">' + i + '</span>';
          }
          code.parent().append('<div class="lines">' + numbers + '</div>');
        }
      });
    }

    // Format code blocks only
    function codestylingWithoutLineNumbers() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
      });
    }

    codestylingWithoutLineNumbers();
    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>