
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼ </title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="æ¥ä¸‹ä¾†è¦ä»‹ç´¹çš„æ˜¯ linters å®ƒå€‘æ˜¯ç”¨ä¾†æª¢æŸ¥ç¨‹å¼æ˜¯å¦ç¬¦åˆç‰¹å®šç¨‹å¼ç¢¼é¢¨æ ¼çš„ä¸€é¡å·¥å…· ä»¥ Python ä¾†èªªï¼Œå‰‡å¯èƒ½æ˜¯åˆ¤æ–·æœ‰æ²’æœ‰éµå®ˆ PEP 8 linter é™¤äº†èƒ½æª¢æŸ¥æ˜¯å¦ä¸ç¬¦é¢¨æ ¼ï¼Œé€šå¸¸ä¹Ÿèƒ½ç”¨ä¾†æª¢æŸ¥èªæ³•éŒ¯èª¤" name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="Python" name="tags"/>
<meta content="Code Quality" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼ " prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="æ¥ä¸‹ä¾†è¦ä»‹ç´¹çš„æ˜¯ linters å®ƒå€‘æ˜¯ç”¨ä¾†æª¢æŸ¥ç¨‹å¼æ˜¯å¦ç¬¦åˆç‰¹å®šç¨‹å¼ç¢¼é¢¨æ ¼çš„ä¸€é¡å·¥å…· ä»¥ Python ä¾†èªªï¼Œå‰‡å¯èƒ½æ˜¯åˆ¤æ–·æœ‰æ²’æœ‰éµå®ˆ PEP 8 linter é™¤äº†èƒ½æª¢æŸ¥æ˜¯å¦ä¸ç¬¦é¢¨æ ¼ï¼Œé€šå¸¸ä¹Ÿèƒ½ç”¨ä¾†æª¢æŸ¥èªæ³•éŒ¯èª¤" prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale">
<meta content="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style" prefix="og: http://ogp.me/ns#" property="og:url"/>
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2020-02-26 18:39:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="2020-10-04 15:57:00+08:00" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="Python" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="Code Quality" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼ " name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style" name="twitter:url"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" name="twitter:image:src"/>
<meta content="æ¥ä¸‹ä¾†è¦ä»‹ç´¹çš„æ˜¯ linters å®ƒå€‘æ˜¯ç”¨ä¾†æª¢æŸ¥ç¨‹å¼æ˜¯å¦ç¬¦åˆç‰¹å®šç¨‹å¼ç¢¼é¢¨æ ¼çš„ä¸€é¡å·¥å…· ä»¥ Python ä¾†èªªï¼Œå‰‡å¯èƒ½æ˜¯åˆ¤æ–·æœ‰æ²’æœ‰éµå®ˆ PEP 8 linter é™¤äº†èƒ½æª¢æŸ¥æ˜¯å¦ä¸ç¬¦é¢¨æ ¼ï¼Œé€šå¸¸ä¹Ÿèƒ½ç”¨ä¾†æª¢æŸ¥èªæ³•éŒ¯èª¤" name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼",
  "headline": "Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼",
  "datePublished": "2020-02-26 18:39:00+08:00",
  "dateModified": "2020-10-04 15:57:00+08:00",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "https://blog.wei-lee.me//images/cover.jpeg",
  "url": "https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style",
  "description": "æ¥ä¸‹ä¾†è¦ä»‹ç´¹çš„æ˜¯ linters å®ƒå€‘æ˜¯ç”¨ä¾†æª¢æŸ¥ç¨‹å¼æ˜¯å¦ç¬¦åˆç‰¹å®šç¨‹å¼ç¢¼é¢¨æ ¼çš„ä¸€é¡å·¥å…· ä»¥ Python ä¾†èªªï¼Œå‰‡å¯èƒ½æ˜¯åˆ¤æ–·æœ‰æ²’æœ‰éµå®ˆ PEP 8 linter é™¤äº†èƒ½æª¢æŸ¥æ˜¯å¦ä¸ç¬¦é¢¨æ ¼ï¼Œé€šå¸¸ä¹Ÿèƒ½ç”¨ä¾†æª¢æŸ¥èªæ³•éŒ¯èª¤"
}
</script>
</meta></meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2020", "item": "https://blog.wei-lee.me/posts/tech/2020"}, {"@type": "ListItem", "position": 5, "name": "02", "item": "https://blog.wei-lee.me/posts/tech/2020/02"}, {"@type": "ListItem", "position": 6, "name": "Python table manners coding style", "item": "https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼", "about": "Tech", "datePublished": "2020-02-26 18:39"}</script></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-ğŸ  Home" role="presentation"><a href="/"><span>ğŸ  Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-ğŸ‘¨â€ğŸ’» Tech active" role="presentation"><a href="/category/tech.html"><span>ğŸ‘¨â€ğŸ’» Tech</span></a></li>
<li class="nav-ğŸ“š Book Digest" role="presentation"><a href="/category/book.html"><span>ğŸ“š Book Digest</span></a></li>
<li class="nav-ğŸ’¬ Gossiping" role="presentation"><a href="/category/gossiping.html"><span>ğŸ’¬ Gossiping</span></a></li>
<li class="nav-ğŸ—„ï¸ Archives" role="presentation"><a href="/archives.html"><span>ğŸ—„ï¸ Archives</span></a></li>
<li class="nav-ğŸ“š Series" role="presentation"><a href="/series_list.html"><span>ğŸ“š Series</span></a></li>
<li class="nav-ğŸ” Search" role="presentation"><a href="/search.html"><span>ğŸ” Search</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼
        </h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2020/02/26 - Wed">2020/02/26 - Wed</time>
          â€¢ <time datetime="2020/10/04 - Sun"> Updated on 2020/10/04 - Sun</time>
          â€¢ 4 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me//images/cover.jpeg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p>æ¥ä¸‹ä¾†è¦ä»‹ç´¹çš„æ˜¯ linters<br/>
å®ƒå€‘æ˜¯ç”¨ä¾†æª¢æŸ¥ç¨‹å¼æ˜¯å¦ç¬¦åˆç‰¹å®šç¨‹å¼ç¢¼é¢¨æ ¼çš„ä¸€é¡å·¥å…·<br/>
ä»¥ Python ä¾†èªªï¼Œå‰‡å¯èƒ½æ˜¯åˆ¤æ–·æœ‰æ²’æœ‰éµå®ˆ <a href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a><br/>
linter é™¤äº†èƒ½æª¢æŸ¥æ˜¯å¦ä¸ç¬¦é¢¨æ ¼ï¼Œé€šå¸¸ä¹Ÿèƒ½ç”¨ä¾†æª¢æŸ¥èªæ³•éŒ¯èª¤</p>
<!--more-->
<div class="toc">
<ul>
<li><a href="#-flake8">é¢¨æ ¼æª¢æŸ¥ - flake8</a><ul>
<li><a href="#_1">ä½¿ç”¨</a></li>
<li><a href="#_2">è¨­å®š</a></li>
<li><a href="#_3">å±€éƒ¨è·³éæª¢æŸ¥</a></li>
</ul>
</li>
<li><a href="#-pylint">é¢¨æ ¼æª¢æŸ¥ - pylint</a><ul>
<li><a href="#_4">ä½¿ç”¨</a></li>
<li><a href="#_5">è¨­å®š</a></li>
<li><a href="#_6">å±€éƒ¨è·³éæª¢æŸ¥</a></li>
</ul>
</li>
<li><a href="#flake8-vs-pylint">flake8 v.s. pylint</a></li>
<li><a href="#-mypy">å‹åˆ¥æª¢æŸ¥ - mypy</a><ul>
<li><a href="#_7">ä½¿ç”¨</a></li>
<li><a href="#_8">è¨­å®š</a></li>
</ul>
</li>
<li><a href="#-black">è‡ªå‹•æ’ç‰ˆ - black</a><ul>
<li><a href="#_9">ä½¿ç”¨</a></li>
<li><a href="#_10">è¨­å®š</a></li>
</ul>
</li>
<li><a href="#-isort">æ’åºå‡½å¼åº« - isort</a><ul>
<li><a href="#_11">åŸ·è¡Œ</a></li>
<li><a href="#_12">è¨­å®š</a></li>
</ul>
</li>
<li><a href="#_13">å…¶ä»–å·¥å…·</a></li>
<li><a href="#bonus">Bonus: è¨­å®šæª”çš„é¸ç”¨</a></li>
<li><a href="#reference">Reference</a></li>
</ul>
</div>
<h2 id="-flake8">é¢¨æ ¼æª¢æŸ¥ - flake8</h2>
<p><a href="https://flake8.pycqa.org/en/latest/">flake8</a> æ˜¯ Python æœ€å¸¸è¢«ä½¿ç”¨çš„ linter ä¹‹ä¸€<br/>
å¹¾ä¹æ˜¯æ‰€æœ‰ Python é–‹æºå°ˆæ¡ˆçš„æ¨™æº–é…å‚™</p>
<h3 id="_1">ä½¿ç”¨</h3>
<p>ä»¥ä¸‹é¢é€™æ®µç¨‹å¼ç¢¼ç‚ºä¾‹</p>
<!-- blacken-docs:off -->
<div class="highlight"><pre><span></span><code><span class="c1"># bad_code.py</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span> <span class="o">=</span>  <span class="s2">"My Operating system"</span>
</code></pre></div>
<!-- blacken-docs:on -->
<p>é€™æ®µç¨‹å¼ç¢¼å‡ºç¾äº†å…©å€‹å•é¡Œ</p>
<ul>
<li>æŠŠæ¨¡çµ„ <code>os</code> æŒ‡æ´¾æˆä¸€å€‹å­—ä¸²ï¼Œæœƒå°è‡´ç„¡æ³•ä½¿ç”¨ <code>os</code> æ¨¡çµ„å…§çš„å‡½å¼ï¼ˆå› ç‚º <code>os</code> å·²ç¶“è®Šæˆä¸€å€‹å­—ä¸²ï¼‰</li>
<li><code>os</code> çš„ <code>=</code> å¾Œé¢åŠ ä¸Šå…©å€‹ç©ºç™½æ˜¯ä¸å¿…è¦çš„ï¼Œä¸ç¬¦åˆ PEP 8 çš„è¦ç¯„</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># å®‰è£ flake8</span>
pipenv<span class="w"> </span>install<span class="w"> </span>flake8<span class="w"> </span>--dev

<span class="c1"># åŸ·è¡Œ flake8</span>
pipenv<span class="w"> </span>run<span class="w"> </span>flake8
</code></pre></div>
<p>flake8 é è¨­å°ç•¶å‰ç›®éŒ„ä¸‹æ‰€æœ‰ Python çš„æª”æ¡ˆåšæª¢æŸ¥</p>
<p>åŸ·è¡Œå¾Œï¼Œ<code>flake8</code> æœƒå°‡é€™äº›éŒ¯èª¤æ‰¾å‡ºä¾†</p>
<div class="highlight"><pre><span></span><code>./bad_code.py:4:1: F811 redefinition of unused 'os' from line 1
./bad_code.py:4:5: E222 multiple spaces after operator
</code></pre></div>
<p>é€ééŒ¯èª¤ç¢¼ï¼ˆe.g., <code>F811</code>ï¼‰å¯ä»¥åœ¨ <a href="https://www.flake8rules.com/">flake8 rules</a> æ‰¾åˆ°ç‚ºä»€éº¼é€™æ˜¯å€‹éŒ¯èª¤å’Œæ€éº¼ä¿®æ­£æ¯”è¼ƒå¥½</p>
<h3 id="_2">è¨­å®š</h3>
<p>æŸäº›ç‹€æ³ä¸‹ï¼Œæˆ‘å€‘æœƒä¸å®Œå…¨ä¾ç…§ flake8 çš„é¢¨æ ¼<br/>
ä¾‹å¦‚ <a href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a> çš„æ¯è¡Œåªèƒ½æœ‰ 79 å€‹å­—å…ƒï¼Œå·²ç¶“è¶Šä¾†è¶Šä¸è¢«ä½¿ç”¨</p>
<p>é™¤äº†å¯ä»¥ç›´æ¥åœ¨ <code>flake8</code> æŒ‡ä»¤å¾Œé¢åŠ ä¸Šåƒæ•¸<br/>
ä¹Ÿå¯ä»¥ç›´æ¥å¯«å…¥è¨­å®šæª” <code>setup.cfg</code> (æˆ– <code>.flake8</code>, <code>tox.ini</code>ï¼‰<br/>
ä»¥ä¸‹æ˜¯æˆ‘æ‰€ä½¿ç”¨çš„è¨­å®š</p>
<div class="highlight"><pre><span></span><code><span class="k">[flake8]</span>
<span class="na">ignore</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="c1"># F632: use ==/!= to compare str, bytes, and int literals</span>
<span class="w">    </span><span class="na">F632,</span>
<span class="w">    </span><span class="c1"># W503: Line break occurred before a binary operator</span>
<span class="w">    </span><span class="na">W503,</span>
<span class="w">    </span><span class="c1"># E501: Line too long</span>
<span class="w">    </span><span class="na">E501,</span>
<span class="w">    </span><span class="c1"># E203: Whitespace before ':' (for black)</span>
<span class="w">    </span><span class="na">E203</span>
<span class="na">exclude</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">.git,</span>
<span class="w">    </span><span class="na">__pycache__,</span>
<span class="w">    </span><span class="na">build,</span>
<span class="w">    </span><span class="na">dist</span>

<span class="na">max-line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">88</span>
</code></pre></div>
<ul>
<li><code>ignore</code>: æŒ‡å®šè¦å¿½ç•¥çš„éŒ¯èª¤é¡å‹ï¼ˆå¯ä»¥å¾ <a href="https://www.flake8rules.com/">flake8 rules</a> æ‰¾åˆ°é€™äº›éŒ¯èª¤ç¢¼ï¼‰</li>
<li><code>exclude</code>: ä¸ç”¨è¢«æª¢æŸ¥çš„æª”æ¡ˆ</li>
<li><code>max-line-length</code>: æ¯è¡Œæœ€é•·é•·åº¦ï¼ˆé€™è£¡è¨­å®šçš„ 88ï¼Œæ˜¯å¾Œé¢æœƒä»‹ç´¹åˆ°çš„ <a href="https://black.readthedocs.io/en/stable/">black</a> çš„é è¨­å€¼ï¼‰</li>
</ul>
<p>Read More ğŸ‘‰ <a href="https://flake8.pycqa.org/en/latest/user/configuration.html">Configuring Flake8</a></p>
<h3 id="_3">å±€éƒ¨è·³éæª¢æŸ¥</h3>
<p>å¦ä¸€ç¨®ç‹€æ³æ˜¯ï¼Œæˆ‘å€‘åªæƒ³åœ¨è®“ä¸€å…©è¡Œç¨‹å¼ç¢¼è·³é flake8 çš„æª¢æŸ¥<br/>
ä½†é€™ä»½æª”æ¡ˆçš„å…¶ä»–åœ°æ–¹é‚„æ˜¯å¸Œæœ›èƒ½è¢«æª¢æŸ¥<br/>
é€™æ™‚å€™å¯ä»¥åœ¨é‚£è¡Œç¨‹å¼ç¢¼åŠ ä¸Š <code># noqa: [error]</code></p>
<p>e.g.,</p>
<div class="highlight"><pre><span></span><code><span class="n">example</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">"example"</span>  <span class="c1"># noqa: E731</span>
</code></pre></div>
<h2 id="-pylint">é¢¨æ ¼æª¢æŸ¥ - pylint</h2>
<p><a href="https://www.pylint.org/">pylint</a> åŒæ¨£æ˜¯ç›¸ç•¶å¸¸è¦‹çš„ Python linter<br/>
ä¸€èˆ¬ä¾†èªªï¼Œæ¯” <code>flake8</code> æª¢æŸ¥çš„æ›´åŠ åš´æ ¼</p>
<h3 id="_4">ä½¿ç”¨</h3>
<p>èˆ‡ flake8 ä¸åŒï¼Œ <code>pylint</code> æŒ‡ä»¤éœ€è¦æŒ‡å®šæ¨¡çµ„æˆ–å¥—ä»¶åç¨±æ‰èƒ½é€²è¡Œæª¢æŸ¥</p>
<div class="highlight"><pre><span></span><code><span class="c1"># å®‰è£ pylint</span>
pipenv<span class="w"> </span>install<span class="w"> </span>pylint<span class="w"> </span>--dev

<span class="c1"># åŸ·è¡Œ pylint</span>
pipenv<span class="w"> </span>run<span class="w"> </span>pylint<span class="w"> </span>&lt;package&gt;<span class="w"> </span>......
</code></pre></div>
<h3 id="_5">è¨­å®š</h3>
<p>åŸæœ¬æˆ‘å»ºè­°ä½¿ç”¨ <code>pipenv run pylint --generate-rcfile &gt;&gt; .pylintrc</code> ä¾†ç”¢ç”Ÿè¨­å®šæª”<br/>
ä½†ç¾åœ¨æˆ‘æ›´å‚¾å‘åœ¨ pyproject.toml ä¸­åªå¯«å…¥æƒ³è¦å®¢è£½åŒ–çš„è¨­å®š<br/>
åŸå…ˆçš„åšæ³•æœƒåœ¨è¨­å®šæª” .pylintrc ä¸­æœ‰è‘—å¤§é‡çš„é è¨­å€¼ï¼Œä¸å®¹æ˜“æ‰¾åˆ°å“ªäº›æ˜¯ä¿®æ”¹éçš„è¨­å®šï¼Œé€ æˆç¶­è­·ä¸Šçš„å›°é›£<br/>
ä¸ééœ€è¦æ³¨æ„çš„æ˜¯åœ¨æŸäº›ç‰ˆæœ¬çš„ pylint é€™å€‹è¨­å®šæ–¹å¼æœƒå‡ºéŒ¯ï¼Œæ‰€ä»¥å»ºè­°å®‰è£ç‰ˆæœ¬ 2.6.0 ä»¥ä¸Šçš„ pylint</p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.pylint]</span>
<span class="w">    </span><span class="k">[tool.pylint.messages_control]</span>
<span class="w">    </span><span class="n">disable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">"bad-continuation"</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"missing-function-docstring"</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"missing-module-docstring"</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"invalid-name"</span>
<span class="w">    </span><span class="p">]</span>

<span class="w">    </span><span class="k">[tool.pylint.format]</span>
<span class="w">    </span><span class="n">max-line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">88</span>
</code></pre></div>
<p>å…¶ä¸­ disable çš„éŒ¯èª¤å¯ä»¥åœ¨ <a href="http://pylint-messages.wikidot.com/all-codes">pylint-messages</a> æ‰¾åˆ°</p>
<h3 id="_6">å±€éƒ¨è·³éæª¢æŸ¥</h3>
<p>åªè¦åœ¨è¦å¿½ç•¥çš„ç¨‹å¼ç¢¼å‰é¢ä¸€è¡ŒåŠ ä¸Š <code># pylint: disable=[error]</code><br/>
ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€™è¡Œä»¥å¾Œå…¨éƒ¨çš„æª¢æŸ¥éƒ½æœƒè¢«é—œé–‰<br/>
æ‰€ä»¥è¦è¨˜å¾—åœ¨éœ€è¦é–‹å•Ÿæª¢æŸ¥çš„åœ°æ–¹å†åŠ ä¸Š <code># pylint: enable=[error]</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># pylint: disable=line-too-long</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Imagine this is a really long line!"</span><span class="p">)</span>
<span class="c1"># pylint: enable=line-too-long</span>
</code></pre></div>
<h2 id="flake8-vs-pylint">flake8 v.s. pylint</h2>
<p>é™¤äº†ç›¸é—œçš„æª¢æŸ¥å¤–ï¼Œ pylint æœƒæ¯” flake8 åšæ›´åš´æ ¼çš„æª¢æŸ¥<br/>
ä¹Ÿå¯ä»¥åšæ›´å¤šçš„è¨­å®šï¼Œä½†åœ¨åŸ·è¡Œä¸Šä¹Ÿæœƒæ¯”è¼ƒæ…¢</p>
<p>åœ¨ PyCon US 2018 çš„ <a href="https://wei-lee.me/pycon-note/posts/pycon-us-2018/2019/09/automating-code-quality/">Automating Code Quality</a>ï¼ŒKyle Knapp å¾ˆè©³ç´°çš„æ¯”è¼ƒäº†é€™å…©å€‹å·¥å…·</p>
<p>æˆ‘çš„ä½¿ç”¨ä¸ŠæœƒæŠŠ flake8 ä½œç‚ºå¼·åˆ¶æª¢æŸ¥ç¨‹å¼ç¢¼é¢¨æ ¼çš„ä¸€ç’°<br/>
åªè¦æ²’æœ‰é€šé flake8 çš„æª¢æŸ¥ï¼Œå°±æ‡‰è©²åšä¿®æ­£<br/>
è€Œ pylint çš„è­¦å‘Šå‰‡æ˜¯åªä½œç‚ºåƒè€ƒ</p>
<p>flake8 åœ¨å¤§å¤šæ•¸ç‹€æ³å·²ç¶“è¶³å¤ <br/>
èŠ±æ™‚é–“å»ä¿®æ”¹æˆç¬¦åˆæŸäº› pylint éæ–¼åš´æ ¼çš„æª¢æŸ¥ï¼Œæˆ–è¨­å®š <code>.pylint</code>ï¼Œå°æˆ‘ä¾†èªªä¸¦ä¸å€¼å¾—<br/>
è€Œä¸” Guido ä¹Ÿæ˜¯é€™éº¼èªªçš„ XD</p>
<p><img alt="because-guido-say-so" src="/images/posts-image/2020-02-22-python-table-manner-series/because-guido-say-so.png"/></p>
<h2 id="-mypy">å‹åˆ¥æª¢æŸ¥ - mypy</h2>
<p><a href="http://mypy-lang.org/">mypy</a> æ˜¯ Python åšéœæ…‹å‹åˆ¥æª¢æŸ¥çš„å·¥å…·<br/>
Python æ˜¯ä¸€å€‹å‹•æ…‹å‹åˆ¥çš„èªè¨€ï¼Œæ‰€ä»¥å¯ä»¥éš¨æ„åœ°ä¸åŒå‹åˆ¥çš„å€¼æŒ‡æ´¾çµ¦åŒä¸€å€‹è®Šæ•¸<br/>
e.g.,</p>
<div class="highlight"><pre><span></span><code><span class="n">str_var</span> <span class="o">=</span> <span class="s2">"This is a string"</span>

<span class="n">str_var</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>
<p>ä½†é€™éº¼åšæœ‰æ™‚å€™æœƒé€ æˆé‚è¼¯ä¸Šçš„éŒ¯èª¤<br/>
ä¾‹å¦‚ <code>import csv</code> æ™‚ï¼Œå¦‚æœä½¿ç”¨äº† <code>csv</code> ä½œç‚ºå…¶ä»–çš„è®Šæ•¸åç¨±<br/>
å°±æœƒå°‡è®Šæ•¸çš„å€¼å–ä»£æ‰åŸæœ¬å¼•å…¥çš„æ¨¡çµ„</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå‹åˆ¥æ¨™è¨˜çš„ç¨‹å¼ç¢¼ä¹Ÿæœƒå¢åŠ å¯è®€æ€§<br/>
å› æ­¤è¿‘å¹¾å¹´è¶Šä¾†è¶Šå¤šäººæ³¨æ„ Python çš„å‹åˆ¥æ¨™è¨˜</p>
<p>PyCon US 2017 ä¸­ Lisa Guo å’Œ Hui Ding çš„ Keynote Session <a href="https://blog.wei-lee.me/posts/tech/2017/06/Python-at-IG">Python@Instagram</a> è¬›äº† Instagram æ˜¯ç‚ºä»€éº¼è¦å’Œå¦‚ä½•å°‡é¾å¤§çš„ç¨‹å¼åº«åŠ ä¸Šå‹åˆ¥æ¨™ç¤º<br/>
<a href="https://wei-lee.me/pycon-note/posts/pycon-us-2020/2020/05/static-typing-in-python/">Static Typing in Python</a> å‰‡æ˜¯ PyCon US 2020 å¹´ Dustin å°å‹åˆ¥æ¨™ç¤ºå’Œæª¢æŸ¥çš„è©³ç´°ä»‹ç´¹<br/>
è€Œ Vita Smid åœ¨ EuroPython 2019 çš„ <a href="https://wei-lee.me/pycon-note/posts/europython-2019/2020/03/static-typing-beyond-the-basics-of-def-foo-x-int-str/">Static typing: beyond the basics of def foo(x: int) -str:</a> å‰‡è¬›åˆ°äº†å‹åˆ¥æª¢æŸ¥æ›´é€²éšä¸€é»çš„æ‡‰ç”¨<br/>
é€™å¹¾å ´æ¼”è¬›éƒ½éå¸¸æ¨è–¦å¯ä»¥è§€çœ‹ï¼</p>
<h3 id="_7">ä½¿ç”¨</h3>
<p>ä»¥ä¸‹åˆ—çš„ç¨‹å¼ç¢¼ç‚ºä¾‹</p>
<div class="highlight"><pre><span></span><code><span class="c1"># wrong_type_hint.py</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>


<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>


<span class="n">func</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</code></pre></div>
<p><code>func</code> çš„åƒæ•¸ <code>val</code> æ¨™è¨˜ç‚º <code>List[str]</code><br/>
ä½†åœ¨å‘¼å«çš„æ™‚å€™å»å‚³å…¥æ•´æ•¸é™£åˆ—</p>
<div class="highlight"><pre><span></span><code><span class="c1"># å®‰è£ mypy</span>
pipenv<span class="w"> </span>install<span class="w"> </span>--dev

<span class="c1"># åŸ·è¡Œ mypy</span>
pipenv<span class="w"> </span>run<span class="w"> </span>mypy<span class="w"> </span><span class="o">[</span>files<span class="o">]</span><span class="w"> </span>--ignore-missing-imports
</code></pre></div>
<p>åŸ·è¡Œ <code>mypy</code> å¾Œï¼Œå®ƒå°±æœƒå‘Šè¨´è·³å‡ºå‹åˆ¥éŒ¯èª¤çš„è­¦å‘Š</p>
<div class="highlight"><pre><span></span><code>wrong_type_hint.py:8:<span class="w"> </span>error:<span class="w"> </span>List<span class="w"> </span>item<span class="w"> </span><span class="m">0</span><span class="w"> </span>has<span class="w"> </span>incompatible<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="s2">"int"</span><span class="p">;</span><span class="w"> </span>expected<span class="w"> </span><span class="s2">"str"</span>

wrong_type_hint.py:8:<span class="w"> </span>error:<span class="w"> </span>List<span class="w"> </span>item<span class="w"> </span><span class="m">1</span><span class="w"> </span>has<span class="w"> </span>incompatible<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="s2">"int"</span><span class="p">;</span><span class="w"> </span>expected<span class="w"> </span><span class="s2">"str"</span>

wrong_type_hint.py:8:<span class="w"> </span>error:<span class="w"> </span>List<span class="w"> </span>item<span class="w"> </span><span class="m">2</span><span class="w"> </span>has<span class="w"> </span>incompatible<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="s2">"int"</span><span class="p">;</span><span class="w"> </span>expected<span class="w"> </span><span class="s2">"str"</span>
</code></pre></div>
<p>mypy é è¨­æœƒå»æ‰¾æ‰€æœ‰å¼•å…¥çš„å‡½å¼åº«æ˜¯å¦ä¹Ÿæœ‰åšå¥½å‹åˆ¥æ¨™è¨˜<br/>
æ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨ä¸Šéƒ½æœƒåŠ ä¸Šåƒæ•¸ <code>--ignore-missing-imports</code><br/>
åªè¦ç¢ºä¿æˆ‘å€‘æ’°å¯«çš„éƒ¨åˆ†éƒ½æ˜¯æ­£ç¢ºçš„</p>
<h3 id="_8">è¨­å®š</h3>
<p>ä»¥ä¸‹æ˜¯æˆ‘ç”¨ä¾†è¨­å®š mypy çš„ <code>setup.cfg</code></p>
<div class="highlight"><pre><span></span><code><span class="k">[mypy]</span>
<span class="na">files</span><span class="o">=</span><span class="s">[your files]</span>
<span class="na">ignore_missing_imports</span><span class="o">=</span><span class="s">true</span>
</code></pre></div>
<h2 id="-black">è‡ªå‹•æ’ç‰ˆ - black</h2>
<p>æ¯”èµ· flake8, pylint åªåšé¢¨æ ¼æª¢æŸ¥<br/>
<a href="https://github.com/psf/black">black</a> æœƒæ›´é€²ä¸€æ­¥çš„ç›´æ¥ä¿®æ­£ä¸ç¬¦åˆé¢¨æ ¼çš„ç¨‹å¼ç¢¼<br/>
åŸæœ¬æˆ‘ä¸å¤ªå–œæ­¡ä½¿ç”¨é€™ç¨®çš„å·¥å…·<br/>
åŸå› æ˜¯æ¯æ¬¡åŸ·è¡Œçš„çµæœä¸ä¸€å®šç›¸åŒï¼Œä¿®æ­£çš„çµæœä¸è¦‹å¾—ç¬¦åˆæˆ‘çš„éœ€æ±‚ï¼Œé€™æ™‚å°±è¦å†å»åšè¨­å®š</p>
<p>black æŸç¨®ç¨‹åº¦ä¸Šçš„è§£æ±ºäº†é€™äº›å•é¡Œ<br/>
black æ¯æ¬¡åŸ·è¡Œçš„çµæœéƒ½æœƒæ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”å¤§è‡´ä¸Šä¿®æ­£çµæœæˆ‘é‚„ç®—æ»¿æ„<br/>
å®ƒæœ€ç‰¹åˆ¥çš„åœ°æ–¹æ˜¯ï¼Œä¸å¤ªèƒ½åšå®¢è£½åŒ–è¨­å®šï¼Œä¹Ÿä¸èƒ½åªåšå±€éƒ¨ç¨‹å¼ç¢¼ä¿®æ­£</p>
<p>å¼•è¿°è‡ª black çš„æ–‡ä»¶</p>
<blockquote>
<p>The Black code style</p>
<p>Black reformats entire files in place. It is not configurable. It doesn't take previous formatting into account. It doesn't reformat blocks that start with # fmt: off and end with # fmt: on. # fmt: on/off have to be on the same level of indentation. It also recognizes YAPF's block comments to the same effect, as a courtesy for straddling code.</p>
</blockquote>
<p>ç‚ºä»€éº¼é€™å¯èƒ½æ˜¯ä»¶å¥½äº‹ï¼Ÿ<br/>
å› ç‚ºé€™èƒ½è®“å¤§å®¶æ›´å°ˆæ³¨æ–¼ç¨‹å¼ç¢¼çš„åŠŸèƒ½æœ¬èº«<br/>
è€Œä¸æ˜¯é€™è£¡è¦ä¸è¦åŠ é€—è™Ÿï¼Ÿè¦ä¸è¦æ–·è¡Œï¼Ÿå¦‚ä½•å»èª¿æ•™è¨­å®šæª”ï¼Ÿ</p>
<blockquote>
<p>â€œThere should be one-- and preferably only one --obvious way to do it.â€<br/>
â€“The Zen of Python, by Tim Peters</p>
</blockquote>
<h3 id="_9">ä½¿ç”¨</h3>
<p>å› ç‚º black é‚„æ˜¯ beta ç‰ˆ<br/>
é€é pipenv å®‰è£æ™‚é‚„è¦åŠ ä¸Š <code>--pre</code> åƒæ•¸</p>
<div class="highlight"><pre><span></span><code><span class="c1"># å®‰è£ black</span>
pipenv<span class="w"> </span>install<span class="w"> </span>black<span class="w"> </span>--dev<span class="w"> </span>--pre

<span class="c1"># åŸ·è¡Œ black ä¿®æ­£ç¨‹å¼ç¢¼é¢¨æ ¼</span>
pipenv<span class="w"> </span>run<span class="w"> </span>black<span class="w"> </span>&lt;package&gt;
</code></pre></div>
<p>å› ç‚º black æ˜¯ç›´æ¥é‡æ–°æ’ç‰ˆç¨‹å¼ç¢¼<br/>
æˆ‘ç¯€éŒ„äº†éƒ¨åˆ†æˆ‘åœ¨ pycontw-postevent-report-generator <a href="https://github.com/pycontw/pycontw-postevent-report-generator/tree/e64a1202c2af08fe9ca5a44b1e52fdafeac2098d">commit e64a</a> ä¿®æ­£é¢¨æ ¼çš„çµæœ<br/>
ä¸Šé¢ç´…è‰²çš„éƒ¨åˆ†æ˜¯åŸæœ¬çš„ç¨‹å¼ç¢¼ï¼Œä¸‹é¢ç¶ è‰²æ˜¯ä¿®æ­£éçš„çµæœ<br/>
(p.s. ç•¶æ™‚è¨­å®šçš„é•·åº¦æ˜¯ 119)</p>
<p><img alt="black-fix-1" src="/images/posts-image/2020-02-22-python-table-manner-series/black-fix-1.jpg"/></p>
<p><img alt="black-fix-2" src="/images/posts-image/2020-02-22-python-table-manner-series/black-fix-2.jpg"/></p>
<p><img alt="black-fix-3" src="/images/posts-image/2020-02-22-python-table-manner-series/black-fix-3.jpg"/></p>
<p>å¦‚æœåªæƒ³è¦æª¢æŸ¥ç¨‹å¼ç¢¼æ˜¯å¦ç¬¦åˆ black çš„é¢¨æ ¼<br/>
è€Œä¸è¦ç›´æ¥åšä¿®æ­£ï¼Œå¯ä»¥åœ¨æŒ‡ä»¤å¾Œé¢åŠ å…¥ <code>--check</code> åƒæ•¸</p>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>run<span class="w"> </span>black<span class="w"> </span>&lt;package&gt;<span class="w"> </span>--check
</code></pre></div>
<h3 id="_10">è¨­å®š</h3>
<p>é›–ç„¶èªª black ä¸èƒ½å°é¢¨æ ¼åšå¤ªå¤šçš„è¨­å®š<br/>
æˆ‘å€‘é‚„æ˜¯èƒ½å…ˆæŒ‡å®šå“ªäº›æª”æ¡ˆæ˜¯è¦ä¿®æ­£ï¼Œå“ªäº›æ˜¯ä¸ç”¨çš„<br/>
ä»¥ä¸‹æ˜¯æˆ‘æ”¾åœ¨ <code>pyproject.toml</code> çš„è¨­å®š<br/>
ï¼ˆp.s. <code>line-length = 88</code> æ˜¯ black çš„é è¨­å€¼ï¼‰</p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.black]</span>
<span class="n">line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">88</span>
<span class="n">include</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'\.pyi?$'</span>
<span class="n">exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'''</span>
<span class="s1">/(</span>
<span class="s1">    \.eggs</span>
<span class="s1">  | \.git</span>
<span class="s1">  | \.hg</span>
<span class="s1">  | \.mypy_cache</span>
<span class="s1">  | \.tox</span>
<span class="s1">  | \.venv</span>
<span class="s1">  | _build</span>
<span class="s1">  | buck-out</span>
<span class="s1">  | build</span>
<span class="s1">  | dist</span>
<span class="s1">)/</span>
<span class="s1">'''</span>
</code></pre></div>
<h2 id="-isort">æ’åºå‡½å¼åº« - isort</h2>
<p><a href="https://github.com/timothycrosley/isort">isort</a> æ˜¯è‡ªå‹•æ’åˆ—å‡½å¼åº«å¼•å…¥é †åºçš„çš„å·¥å…·<br/>
PEP 8 å»ºè­°å°‡å¼•å…¥çš„å‡½å¼åº«åˆ†ç‚ºä¸‰é¡åšæ’åº</p>
<ol>
<li>æ¨™æº–å‡½å¼åº«</li>
<li>ç¬¬ä¸‰æ–¹å‡½å¼åº«</li>
<li>æœ¬åœ°çš„å‡½å¼åº«</li>
</ol>
<p>ä¸¦åœ¨æ¯ä¸€å€‹ç¨®é¡é–“ç©ºä¸€è¡Œ<br/>
e.g.,</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">import</span> <span class="nn">flask</span>

<span class="kn">import</span> <span class="nn">models</span>
</code></pre></div>
<p>ä½¿ç”¨ isort çš„åŸå› è·Ÿ black å·®ä¸å¤š<br/>
å°±æ˜¯è®“ç¨‹å¼ä¾†æ±ºå®šæ¯”è¼ƒæå¾®æœ«ç¯€çš„äº‹ï¼Œå°ˆæ³¨åœ¨é–‹ç™¼æœ¬èº«ä¸Šé¢</p>
<h3 id="_11">åŸ·è¡Œ</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># å®‰è£ isort</span>
pipenv<span class="w"> </span>install<span class="w"> </span>isort<span class="w"> </span>--dev

<span class="c1"># åŸ·è¡Œ isort ä¿®æ­£å‡½å¼åº«æ’åº</span>
pipenv<span class="w"> </span>run<span class="w"> </span>isort<span class="w"> </span>--atomic<span class="w"> </span>.
</code></pre></div>
<ul>
<li><code>--atomic</code>: åªæœ‰é‡æ–°æ’åºå¾Œçš„çµæœæ²’æœ‰èªæ³•éŒ¯èª¤ï¼Œæ‰æœƒå„²å­˜</li>
</ul>
<h3 id="_12">è¨­å®š</h3>
<p>è‡ªå¾ 5.0.0 å¾Œï¼Œ isort ç›´æ¥æŠŠå¸¸è¦‹çš„è¨­å®šå¯«æˆ <a href="https://pycqa.github.io/isort/docs/configuration/profiles/">profile</a><br/>
åªè¦æŒ‡å®š profile å°±èƒ½ç›´æ¥å¥—ç”¨ç›¸å®¹çš„è¨­å®š</p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.isort]</span>
<span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span>
</code></pre></div>
<p>ä¸éæœ‰ä¸€å€‹ç›¸é—œçš„ bug åˆ° 5.0.5 å¾Œæ‰ä¿®æ­£ (Ref: <a href="https://github.com/PyCQA/isort/issues/1295">Black profile not compatible with Black (ensure_newline_before_comments not working) #1295</a>)<br/>
æ‰€ä»¥é‚„æ˜¯å»ºè­°å®‰è£æœ€æ–°çš„ç‰ˆæœ¬</p>
<h2 id="_13">å…¶ä»–å·¥å…·</h2>
<ul>
<li><a href="https://github.com/mgedmin/check-manifest">check-manifest</a>: æª¢æŸ¥æœ‰æ²’æœ‰å°‘æ”¾å…¥ <code>MANIFEST.in</code> çš„æª”æ¡ˆ</li>
<li><a href="https://github.com/asottile/seed-isort-config">seed-isort-config</a></li>
</ul>
<h2 id="bonus">Bonus: è¨­å®šæª”çš„é¸ç”¨</h2>
<p>å¾å‰é¢çš„æ¸¬è©¦ç¯‡åˆ°ç¾åœ¨æœ‰æåˆ°å¾ˆå¤šè¨­å®šæª”çš„æ ¼å¼<br/>
é€šå¸¸æ¯å€‹å·¥å…·éƒ½æœƒæœ‰è‡ªå·±çš„è¨­å®šæª” (e.g., <code>.coveragerc</code>, <code>.flake8</code>) æˆ–è€…ç”¨ Python æ¯”è¼ƒé€šç”¨çš„æ ¼å¼ (e.g., <code>pyproject.toml</code>, <code>setup.cfg</code>)<br/>
å…¶ä¸­ <code>pyproject.toml</code> æ˜¯åœ¨ <a href="https://www.python.org/dev/peps/pep-0518/">PEP 518</a> æå‡ºçš„è¨­å®šæª”æ ¼å¼<br/>
ä¸éé‚„æ²’æœ‰è¢«æ‰€æœ‰çš„å·¥å…·æ”¯æ´<br/>
<a href="https://github.com/carlosperate/awesome-pyproject">awesome-pyproject</a> æ•´ç†äº†ç›®å‰å·²ç¶“æ”¯æ´æˆ–è¨è«–æ˜¯å¦è¦æ”¯æ´ <code>proproject.toml</code> çš„å·¥å…·</p>
<p>æ¯”èµ·è®“å¤šå€‹å·¥å…·çš„è¨­å®šæ•£è½åœ¨å„å€‹è¨­å®šæª”<br/>
æˆ‘å‚¾å‘çµ±ä¸€ç®¡ç†åœ¨ <code>pyproject.toml</code> æˆ– <code>setup.cfg</code></p>
<ul>
<li><code>pyproject.toml</code><ul>
<li>black</li>
<li>isort</li>
<li>pylint</li>
<li>coverage</li>
<li>pytest</li>
<li>commitizen (ä¹‹å¾Œæ‰æœƒä»‹ç´¹åˆ°)</li>
</ul>
</li>
<li>setup.cfg<ul>
<li>flake8</li>
<li>mypy</li>
</ul>
</li>
</ul>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://wei-lee.me/pycon-note/posts/pycon-us-2018/2019/09/automating-code-quality/">Automating Code Quality - PyCon US 2018</a></li>
<li><a href="https://wei-lee.me/pycon-note/posts/pycon-us-2019/2019/11/life-is-better-painted-black-or-how-to-stop-worrying-and-embrace-auto-formatting/">Life Is Better Painted Black, or: How to Stop Worrying and Embrace Auto-Formatting - PyCon US 2019</a></li>
<li><a href="https://www.youtube.com/watch?v=wf-BqAjZb8M&amp;feature=youtu.be">Beyond PEP 8 -- Best practices for beautiful intelligible code - PyCon 2015</a></li>
</ul>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼ &amp;url=https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style&amp;title=Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼&amp;body=https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/python.html">Python</a><a href="https://blog.wei-lee.me/tag/code-quality.html">Code Quality</a> </aside>
<div class="clear"></div>
<div class="series">
<p>This post is part 5 of the "Python Table Manners" series:</p>
<ol class="parts">
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-series">Python Table Manners ç³»åˆ—</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-dependency-mangement">Python Table Manners - è™›æ“¬ç’°å¢ƒå’Œå¥—ä»¶ç®¡ç†</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-test-1">Python Table Manners - æ¸¬è©¦ (ä¸€)</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-test-2">Python Table Manners - æ¸¬è©¦ (äºŒ)</a>
</li>
<li class="active">
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style">Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-manage-trivial-tasks">Python Table Manners - ç®¡ç†ç¹ç‘£ä»»å‹™</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-pre-commit">Python Table Manners - pre-commit: git commit å‰åšå®Œæª¢æŸ¥</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen">Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security">Python Table Manners - å®‰å…¨æ€§æª¢æŸ¥</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/04/python-table-manners-documentation">Python Table Manners - æ–‡ä»¶</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/12/python-table-manner-continuous-integration">Python Table Manners - æŒçºŒæ•´åˆ/éƒ¨ç½²</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter">Python Table Manners - Cookiecutter å°ˆæ¡ˆæ¨¡æ¿</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manner-editor">Python Table Manners ç•ªå¤– - ç·¨è¼¯å™¨</a>
</li>
</ol>
</div>
</section>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
<aside class="post-nav">
<div class="clear"></div>
</aside>
</div>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten Â© 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> â€¢ Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> â€¢
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>