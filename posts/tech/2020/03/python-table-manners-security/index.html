
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Python Table Manners - 安全性檢查 </title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="果然在沒有寫作松的督促下，馬上就拖稿了 XD 接下來要介紹在 Python 專案中做安全性檢查的工具" name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="Python" name="tags"/>
<meta content="Security" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="Python Table Manners - 安全性檢查 " prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="果然在沒有寫作松的督促下，馬上就拖稿了 XD 接下來要介紹在 Python 專案中做安全性檢查的工具" prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale">
<meta content="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" prefix="og: http://ogp.me/ns#" property="og:url"/>
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2020-03-22 13:10:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="2020-10-04 16:13:00+08:00" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="Python" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="Security" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me/images/cover.jpeg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="Python Table Manners - 安全性檢查 " name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" name="twitter:url"/>
<meta content="https://blog.wei-lee.me/images/cover.jpeg" name="twitter:image:src"/>
<meta content="果然在沒有寫作松的督促下，馬上就拖稿了 XD 接下來要介紹在 Python 專案中做安全性檢查的工具" name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Python Table Manners - 安全性檢查",
  "headline": "Python Table Manners - 安全性檢查",
  "datePublished": "2020-03-22 13:10:00+08:00",
  "dateModified": "2020-10-04 16:13:00+08:00",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "https://blog.wei-lee.me//images/cover.jpeg",
  "url": "https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security",
  "description": "果然在沒有寫作松的督促下，馬上就拖稿了 XD 接下來要介紹在 Python 專案中做安全性檢查的工具"
}
</script>
</meta></meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2020", "item": "https://blog.wei-lee.me/posts/tech/2020"}, {"@type": "ListItem", "position": 5, "name": "03", "item": "https://blog.wei-lee.me/posts/tech/2020/03"}, {"@type": "ListItem", "position": 6, "name": "Python table manners security", "item": "https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "Python Table Manners - 安全性檢查", "about": "Tech", "datePublished": "2020-03-22 13:10"}</script><meta content="summary" name="twitter:card"/><meta content="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" property="og:url"/><meta content="article" property="og:type"/><meta content="Python Table Manners - 安全性檢查" property="og:title"/><meta content="C" property="og:locale"/></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-🏠 Home" role="presentation"><a href="/"><span>🏠 Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-👨‍💻 Tech active" role="presentation"><a href="/category/tech.html"><span>👨‍💻 Tech</span></a></li>
<li class="nav-📚 Book Digest" role="presentation"><a href="/category/book.html"><span>📚 Book Digest</span></a></li>
<li class="nav-💬 Gossiping" role="presentation"><a href="/category/gossiping.html"><span>💬 Gossiping</span></a></li>
<li class="nav-🏷️ Tags" role="presentation"><a href="/tags.html"><span>🏷️ Tags</span></a></li>
<li class="nav-🗄️ Archives" role="presentation"><a href="/archives.html"><span>🗄️ Archives</span></a></li>
<li class="nav-📚 Series" role="presentation"><a href="/series_list.html"><span>📚 Series</span></a></li>
<li class="nav-🔍 Search" role="presentation"><a href="/search.html"><span>🔍 Search</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            Python Table Manners - 安全性檢查
        </h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2020/03/22 - Sun">2020/03/22 - Sun</time>
          • <time datetime="2020/10/04 - Sun"> Updated on 2020/10/04 - Sun</time>
          • 1 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me/images/cover.jpeg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p>果然在沒有寫作松的督促下，馬上就拖稿了 XD<br/>
接下來要介紹在 Python 專案中做安全性檢查的工具</p>
<!--more-->
<div class="toc">
<ul>
<li><a href="#safety-">Safety - 檢查相依套件</a><ul>
<li><a href="#_1">安裝</a></li>
<li><a href="#_2">執行</a></li>
</ul>
</li>
<li><a href="#bandit-">bandit - 程式碼靜態分析</a><ul>
<li><a href="#_3">安裝</a></li>
<li><a href="#_4">使用</a></li>
<li><a href="#_5">局部跳過檢查</a></li>
</ul>
</li>
<li><a href="#reference">Reference</a></li>
</ul>
</div>
<h2 id="safety-">Safety - 檢查相依套件</h2>
<p><img alt="depbot" src="/images/posts-image/2020-02-22-python-table-manner-series/depbot.jpg"/></p>
<p>不知道大家有沒有在 GitHub 上看過這樣的畫面<br/>
這個訊息告訴我們，專案的相依套件中可能有安全漏洞</p>
<p>透過 <a href="https://github.com/pyupio/safety">Safety</a> 就能在本地做相依套件安全漏洞的檢查<br/>
它會到 <a href="https://github.com/pyupio/safety-db">safety-db</a> 去查找已知的安全性漏洞<br/>
這個資料庫則是從 <a href="https://cve.mitre.org/">CVE</a> (Common Vulnerabilities and Exposures) 整理出來的<br/>
如果是免費版，一個月會更新一次資料庫<br/>
付費版則可以達到即時更新</p>
<h3 id="_1">安裝</h3>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>install<span class="w"> </span>safety<span class="w"> </span>--dev
</code></pre></div>
<h3 id="_2">執行</h3>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>run<span class="w"> </span>safety<span class="w"> </span>check
</code></pre></div>
<p><img alt="safety-not-found" src="/images/posts-image/2020-02-22-python-table-manner-series/safety-not-found.jpg"/></p>
<p>在 <a href="https://github.com/pycontw/pycontw-postevent-report-generator/commit/128d271942099b94faca3693d6c146c879e3b414">pycontw-postevent-report-generator commit 128d</a> ，透過 safety 不會找到任何安全漏洞</p>
<p>如果想要測試 Safety 的功能可以安裝套件 <a href="https://pypi.org/project/insecure-package/">insecure-package</a> (<strong>這個套件是真的存在的，而且是不安全的，僅作為測試用途</strong>)</p>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>install<span class="w"> </span>insecure-package<span class="w"> </span>--dev
</code></pre></div>
<p>再試一次就能看到 Safety 將 insecure-package 列為不安全的套件</p>
<p><img alt="safety-found-insecure" src="/images/posts-image/2020-02-22-python-table-manner-series/safety-found-insecure.jpg"/></p>
<p>另外需要注意的是 <code>safety check</code> 是對當前環境做檢查<br/>
務必確定已經有進入專案的虛擬環境，不然 Safety 只會檢查到本機使用的套件有沒有漏洞</p>
<p>如果想要對 <code>requirements.txt</code> 做檢查，則可以加上參數 <code>-r</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># 因為這個 case 不是針對 pipenv ，所以前面沒有加上 pipenv run</span>
safety<span class="w"> </span>check<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>
<p>雖然 Safety 並不支援對 Pipfile 進行檢查 (Ref: <a href="https://github.com/pyupio/safety/issues/47">Add Pipfile support #47</a>)，但 pipenv 就內建有安全性檢查的指令</p>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>check
</code></pre></div>
<h2 id="bandit-">bandit - 程式碼靜態分析</h2>
<p>除了套件安全性的分析外，接著還能透過 <a href="https://github.com/PyCQA/bandit">bandit</a> 來對自己的程式碼做靜態分析找出常見的漏洞</p>
<h3 id="_3">安裝</h3>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>install<span class="w"> </span>bandit<span class="w"> </span>--dev
</code></pre></div>
<h3 id="_4">使用</h3>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>run<span class="w"> </span>bandit<span class="w"> </span>-r<span class="w"> </span>&lt;package&gt;
</code></pre></div>
<p><img alt="bandit-result" src="/images/posts-image/2020-02-22-python-table-manner-series/bandit-result.jpg"/></p>
<p>執行後就會看到一個列表，整理出專案中可能有的安全性漏洞<br/>
每一個項目中會有以下五個欄位</p>
<ul>
<li>Issue: 問題</li>
<li>Severity: 嚴重性</li>
<li>Confidence: 可信度</li>
<li>Location: 位置（在程式碼的哪一行）</li>
<li>More Info: 詳細的原因和可能的解決方案 （也可以從 <a href="https://bandit.readthedocs.io/en/latest/plugins/#complete-test-plugin-listing">Complete Test Plugin Listing</a> 找到全部的列表）</li>
</ul>
<p>加上參數 <code>-i</code> (可信度) 和 <code>-l</code> （嚴重性），就可以讓 bandit 只回報特定程度的漏洞<br/>
越多的 i / l 代表程度越高<br/>
以下指令就是讓 bandit 只回報高嚴重性 (<code>-lll</code>)、高可信度 (<code>-iii</code>)的漏洞</p>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>run<span class="w"> </span>bandit<span class="w"> </span>-iii<span class="w"> </span>-lll<span class="w"> </span>-r<span class="w"> </span>&lt;package&gt;
</code></pre></div>
<h3 id="_5">局部跳過檢查</h3>
<p>有時候 bandit 給的警告不會在所有狀況都適用<br/>
以 <a href="https://bandit.readthedocs.io/en/latest/plugins/b101_assert_used.html#module-bandit.plugins.asserts">B101: assert_used</a> 為例<br/>
警告不該使用 <code>assert</code><br/>
在使用 <code>python -o</code> 指令產生優化過的 byte code 時，會跳過 <code>assert</code><br/>
如果系統使用 <code>assert</code> 來進行登入的檢查，就會讓使用者在完全沒驗證的情況下成功登入<br/>
但大部分的時候，我們不太會這麼實作<br/>
而 <code>assert</code> 也是在測試中很常使用到的語法</p>
<p>這時候就可以在專案的最上層加入設定檔 <code>.bandit</code><br/>
而它的格式會長這樣</p>
<div class="highlight"><pre><span></span><code>[bandit]
# 要執行 bandit 檢查的檔案或資料夾（逗號分隔）
targets:
# 跳過 bandit 檢查的檔案或資料夾（逗號分隔）
exclude:
# 要跳過的檢查種類 （逗號分隔）
skips:
# 要執行的檢查種類 （逗號分隔）
tests:
</code></pre></div>
<p>執行 bandit 時要加上 <code>--ini .bandit</code> 讓 bandit 知道要找這份設定檔</p>
<div class="highlight"><pre><span></span><code>bandit<span class="w"> </span>--ini<span class="w"> </span>.bandit
</code></pre></div>
<p>如果不是整個檔案或種類要跳過，則可以在程式碼後面加上 <code># nosec</code></p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://wei-lee.me/pycon-note/posts/pycon-us-2019/2019/10/python-security-tool/">Python Security Tool - PyCon US 2019</a></li>
<li><a href="https://wei-lee.me/pycon-note/posts/pycon-au-2018/2019/08/watch-out-for-safety-bandits/">Watch out for Safety Bandits! - PyCon AU 2018</a></li>
<li><a href="https://myapollo.com.tw/zh-tw/secure-your-python-code-with-bandit/">用 Bandit 靜態掃描工具，掃描 Python 專案中的安全性問題</a></li>
</ul>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=Python Table Manners - 安全性檢查 &amp;url=https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security&amp;title=Python Table Manners - 安全性檢查" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=Python Table Manners - 安全性檢查&amp;body=https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/python.html">Python</a><a href="https://blog.wei-lee.me/tag/security.html">Security</a> </aside>
<div class="clear"></div>
<div class="series">
<p>This post is part 9 of the "Python Table Manners" series:</p>
<ol class="parts">
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-series">Python Table Manners 系列</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-dependency-mangement">Python Table Manners - 虛擬環境和套件管理</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-test-1">Python Table Manners - 測試 (一)</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-test-2">Python Table Manners - 測試 (二)</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style">Python Table Manners - 程式碼風格</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-manage-trivial-tasks">Python Table Manners - 管理繁瑣任務</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-pre-commit">Python Table Manners - pre-commit: git commit 前做完檢查</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen">Python Table Manners - Commitizen: 規格化 commit message</a>
</li>
<li class="active">
<a href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security">Python Table Manners - 安全性檢查</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/04/python-table-manners-documentation">Python Table Manners - 文件</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/12/python-table-manner-continuous-integration">Python Table Manners - 持續整合/部署</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter">Python Table Manners - Cookiecutter 專案模板</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manner-editor">Python Table Manners 番外 - 編輯器</a>
</li>
</ol>
</div>
</section>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
<aside class="post-nav">
<div class="clear"></div>
</aside>
</div>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten © 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> • Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> •
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<!-- Add MathJax and FontAwesome for Asciidoc -->\
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    var mdSelector=".highlight pre code";
    var rstSelector=".highlight pre code";
    // For ":source-highlighter: highlight.js`" in asciidoc
    var adocSelector="pre.highlight > code[data-lang]"
    var selector=mdSelector;
    // Format code blocks and add line numbers
    function codestyling() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
        // No lines for plain text blocks
        if (!$(this).hasClass('language-text')) {
          var code = $(this);
          // Calculate amount of lines
          var lines = code.html().split(/\n(?!$)/g).length;
          var numbers = [];
          if (lines > 1) {
            lines++;
          }
          for (i = 1; i < lines; i++) {
            numbers += '<span class="line" aria-hidden="true">' + i + '</span>';
          }
          code.parent().append('<div class="lines">' + numbers + '</div>');
        }
      });
    }

    // Format code blocks only
    function codestylingWithoutLineNumbers() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
      });
    }

    codestylingWithoutLineNumbers();
    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>