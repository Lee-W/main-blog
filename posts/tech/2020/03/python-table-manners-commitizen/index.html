
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message </title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="æ¥çºŒè‘—å‰ä¸€ç¯‡çš„ pre-commit ï¼Œç¹¼çºŒè«‡ git ç›¸é—œçš„å·¥å…· é€™ç¯‡ä¾†èŠèŠå¦‚ä½•é€é commitizen è¦ç¯„ commit message é‚„æœ‰è¦ç¯„éçš„ commit message èƒ½æ‹¿ä¾†åšä»€éº¼" name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="Python" name="tags"/>
<meta content="Git" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message " prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="æ¥çºŒè‘—å‰ä¸€ç¯‡çš„ pre-commit ï¼Œç¹¼çºŒè«‡ git ç›¸é—œçš„å·¥å…· é€™ç¯‡ä¾†èŠèŠå¦‚ä½•é€é commitizen è¦ç¯„ commit message é‚„æœ‰è¦ç¯„éçš„ commit message èƒ½æ‹¿ä¾†åšä»€éº¼" prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale">
<meta content="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" prefix="og: http://ogp.me/ns#" property="og:url"/>
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2020-03-01 00:45:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="2020-07-19 16:47:00+08:00" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="Python" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="Git" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me/images/cover.jpeg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message " name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" name="twitter:url"/>
<meta content="https://blog.wei-lee.me/images/cover.jpeg" name="twitter:image:src"/>
<meta content="æ¥çºŒè‘—å‰ä¸€ç¯‡çš„ pre-commit ï¼Œç¹¼çºŒè«‡ git ç›¸é—œçš„å·¥å…· é€™ç¯‡ä¾†èŠèŠå¦‚ä½•é€é commitizen è¦ç¯„ commit message é‚„æœ‰è¦ç¯„éçš„ commit message èƒ½æ‹¿ä¾†åšä»€éº¼" name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message",
  "headline": "Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message",
  "datePublished": "2020-03-01 00:45:00+08:00",
  "dateModified": "2020-07-19 16:47:00+08:00",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "https://blog.wei-lee.me//images/cover.jpeg",
  "url": "https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen",
  "description": "æ¥çºŒè‘—å‰ä¸€ç¯‡çš„ pre-commit ï¼Œç¹¼çºŒè«‡ git ç›¸é—œçš„å·¥å…· é€™ç¯‡ä¾†èŠèŠå¦‚ä½•é€é commitizen è¦ç¯„ commit message é‚„æœ‰è¦ç¯„éçš„ commit message èƒ½æ‹¿ä¾†åšä»€éº¼"
}
</script>
</meta></meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2020", "item": "https://blog.wei-lee.me/posts/tech/2020"}, {"@type": "ListItem", "position": 5, "name": "03", "item": "https://blog.wei-lee.me/posts/tech/2020/03"}, {"@type": "ListItem", "position": 6, "name": "Python table manners commitizen", "item": "https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message", "about": "Tech", "datePublished": "2020-03-01 00:45"}</script><meta content="summary" name="twitter:card"/><meta content="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" property="og:url"/><meta content="article" property="og:type"/><meta content="Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message" property="og:title"/><meta content="C" property="og:locale"/></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-ğŸ  Home" role="presentation"><a href="/"><span>ğŸ  Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-ğŸ‘¨â€ğŸ’» Tech active" role="presentation"><a href="/category/tech.html"><span>ğŸ‘¨â€ğŸ’» Tech</span></a></li>
<li class="nav-ğŸ“š Book Digest" role="presentation"><a href="/category/book.html"><span>ğŸ“š Book Digest</span></a></li>
<li class="nav-ğŸ’¬ Gossiping" role="presentation"><a href="/category/gossiping.html"><span>ğŸ’¬ Gossiping</span></a></li>
<li class="nav-ğŸ·ï¸ Tags" role="presentation"><a href="/tags.html"><span>ğŸ·ï¸ Tags</span></a></li>
<li class="nav-ğŸ—„ï¸ Archives" role="presentation"><a href="/archives.html"><span>ğŸ—„ï¸ Archives</span></a></li>
<li class="nav-ğŸ“š Series" role="presentation"><a href="/series_list.html"><span>ğŸ“š Series</span></a></li>
<li class="nav-ğŸ” Search" role="presentation"><a href="/search.html"><span>ğŸ” Search</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message
        </h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2020/03/01 - Sun">2020/03/01 - Sun</time>
          â€¢ <time datetime="2020/07/19 - Sun"> Updated on 2020/07/19 - Sun</time>
          â€¢ 4 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me/images/cover.jpeg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p>æ¥çºŒè‘—å‰ä¸€ç¯‡çš„ pre-commit ï¼Œç¹¼çºŒè«‡ git ç›¸é—œçš„å·¥å…·<br/>
é€™ç¯‡ä¾†èŠèŠå¦‚ä½•é€é <a href="https://github.com/commitizen-tools/commitizen">commitizen</a> è¦ç¯„ commit message<br/>
é‚„æœ‰è¦ç¯„éçš„ commit message èƒ½æ‹¿ä¾†åšä»€éº¼</p>
<!--more-->
<div class="toc">
<ul>
<li><a href="#commit-message">ç‚ºä»€éº¼è¦å¥½å¥½å¯« commit message</a></li>
<li><a href="#commitizen">Commitizen</a></li>
<li><a href="#commitizen_1">å®‰è£èˆ‡è¨­å®š Commitizen</a></li>
<li><a href="#commitizen_2">ä½¿ç”¨ Commitizen</a></li>
<li><a href="#commit-message_1">å¼·åˆ¶æª¢æŸ¥ commit message</a></li>
<li><a href="#_1">è‡ªå‹•æå‡ç‰ˆæœ¬è™Ÿ</a></li>
<li><a href="#commit">å®¢è£½åŒ– commit è¦ç¯„</a><ul>
<li><a href="#_2">ç›´æ¥åœ¨è¨­å®šæª”è¨­å®š</a></li>
<li><a href="#commit-python">å°‡å®¢è£½åŒ–çš„ commit è¦ç¯„å¯«æˆ Python å¥—ä»¶ç™¼ä½ˆ</a></li>
</ul>
</li>
<li><a href="#changelog">è‡ªå‹•ç”¢ç”Ÿæ›´æ–°æ—¥èªŒï¼ˆChangelogï¼‰</a></li>
<li><a href="#commitizen_3">å…¶ä»– commitizen æŒ‡ä»¤å’Œå¸¸ç”¨åƒæ•¸</a></li>
<li><a href="#commitizen_4">é—œæ–¼ commitizen çš„é›œè«‡</a><ul>
<li><a href="#java-script-commitizen">ç‚ºä»€éº¼ä¸ç”¨ Java Script çš„ commitizen å°±å¥½äº†</a></li>
<li><a href="#_3">æŒçºŒè²¢ç»</a></li>
</ul>
</li>
<li><a href="#reference">Reference</a></li>
</ul>
</div>
<h2 id="commit-message">ç‚ºä»€éº¼è¦å¥½å¥½å¯« commit message</h2>
<p><img alt="no-good-commit" src="/images/posts-image/2020-02-22-python-table-manner-series/no-good-commit.jpg"/></p>
<p>å¦‚æœä¸å¥½å¥½å¯«æœ‰æ„ç¾©çš„ commit messageï¼Œæ¯æ¬¡éƒ½åªç”¨ "update" ç•¶è¨Šæ¯<br/>
ç•¶ä½ ä¸‹äº† <code>git log</code> æŒ‡ä»¤ï¼Œå°±æœƒçœ‹åˆ°ä¸€å † "update"<br/>
ç„¶å¾Œå“ªå¤©ç³»çµ±å‡ºéŒ¯çš„æ™‚å€™ï¼Œä½ ä¹Ÿæœƒä¸çŸ¥é“è¦å›æœ”åˆ°å“ªä¸€å€‹ç‰ˆæœ¬</p>
<p><img alt="bad-commit" src="/images/posts-image/2020-02-22-python-table-manner-series/bad-commit.jpg"/><br/>
(from <a href="https://github.com/hackjutsu/bad-commit-example/commits/master">hackjutsu/bad-commit-example</a>)</p>
<p>æ’°å¯«å¥½çš„ commit messageï¼Œé™¤äº†è®“æœªä¾†çš„è‡ªå·±çŸ¥é“è‡ªå·±åœ¨å¹¹å˜›<br/>
ä¹Ÿèƒ½è®“åœ˜éšŠä¹‹é–“çš„æºé€šæ›´é †åˆ©</p>
<ul>
<li>é€ Pull Request / Merge Request æ™‚ï¼Œå¯©æ ¸è€…èƒ½æ›´å¿«é€Ÿåœ°çŸ¥é“å¢åŠ äº†å“ªäº›åŠŸèƒ½</li>
<li>æ–°é€²äººå“¡å¯ä»¥å¾éå¾€çš„ commit message æ‰¾åˆ°æ•´å€‹å°ˆæ¡ˆç™¼å±•çš„è„ˆçµ¡ï¼Œæ›´å®¹æ˜“ä¸Šæ‰‹å°ˆæ¡ˆ</li>
</ul>
<h2 id="commitizen">Commitizen</h2>
<p>é™¤äº†æä¾›çš„ commit message æ’°å¯«å»ºè­°å’Œè¦ç¯„ ï¼ˆğŸ‘‰ <a href="https://commitizen-tools.github.io/commitizen/tutorials/writing_commits/">Writing commits</a>ï¼‰<br/>
<a href="https://commitizen-tools.github.io/commitizen/">commitizen</a> æ›´é€²ä¸€æ­¥æä¾›äº’å‹•å¼ä»‹é¢ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥å¤ è¼•é¬†åœ°ç”¢ç”Ÿç¬¦åˆè¦ç¯„çš„ commit message<br/>
åŒæ™‚ä¹Ÿæ•´åˆäº†å‰ä¸€ç¯‡æ‰€æåˆ°çš„ pre-commit hookï¼Œé¿å…ä½¿ç”¨è€…å°‡ä¸ç¬¦åˆè¦ç¯„çš„ commit message å¯«å…¥<br/>
é™¤äº†æ¡ç”¨ä¾†è‡ª Angular ç¤¾ç¾¤çš„ <a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a> (ç´„å®šå¼æäº¤) å¤–ï¼Œ commitizen æä¾›äº†é«˜åº¦çš„å®¢è£½åŒ–ï¼Œè®“æ¯å€‹åœ˜éšŠæˆ–å°ˆæ¡ˆéƒ½å¯ä»¥ä¾ç…§è‡ªå·±çš„éœ€æ±‚ï¼Œæ’°å¯«ç›¸å°æ‡‰çš„è¦ç¯„<br/>
è¦ç¯„äº† commit message å¾Œï¼Œé™¤äº†å¢åŠ å¯è®€æ€§å¢åŠ å¤–ï¼Œä¹Ÿè®“è¨Šæ¯æœ‰å¯ä»¥è¢«è§£æåšå…¶ä»–é‹ç”¨<br/>
e.g., æå‡ç‰ˆæœ¬è™Ÿ, ç”¢ç”Ÿæ›´æ–°æ—¥èªŒ</p>
<h2 id="commitizen_1">å®‰è£èˆ‡è¨­å®š Commitizen</h2>
<p>è·Ÿ invoke ä¸€æ¨£ï¼Œæˆ‘æœƒæŠŠ commitizen åŒæ™‚å®‰è£åœ¨ç³»çµ±å’Œè™›æ“¬ç’°å¢ƒ<br/>
å®‰è£åœ¨è™›æ“¬ç’°å¢ƒä¸»è¦æ˜¯ç‚ºäº†èƒ½åœ¨ CI/CD ä¼ºæœå™¨ä¸Šè‡ªå‹•å‡ç‰ˆ</p>
<div class="highlight"><pre><span></span><code><span class="c1"># å®‰è£ commitizen åˆ°ç³»çµ±</span>
pipx<span class="w"> </span>install<span class="w"> </span>commitizen

<span class="c1"># å®‰è£ commitizen åˆ°è™›æ“¬ç’°å¢ƒä¸­</span>
pipenv<span class="w"> </span>install<span class="w"> </span>commitizen<span class="w"> </span>--dev
</code></pre></div>
<p>åœ¨å°ˆæ¡ˆä¸­ç¬¬ä¸€æ¬¡ä½¿ç”¨ commitizen å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–æŒ‡ä»¤ä¾†å®ŒæˆåŸºæœ¬çš„è¨­å®š</p>
<div class="highlight"><pre><span></span><code>cz<span class="w"> </span>init
</code></pre></div>
<p>ä¸€é–‹å§‹æœƒå…ˆå•æƒ³ä½¿ç”¨å“ªç¨®è¨­å®šæª”</p>
<p><img alt="cz-init-1" src="/images/posts-image/2020-02-22-python-table-manner-series/cz-init-1.png"/></p>
<p>æ¥è‘—è¦é¸æ“‡ä¸€å¥— commit è¦ç¯„ï¼Œé è¨­æœ‰ä¸‰ç¨®<br/>
å¦‚æœæœ‰å®‰è£å…¶ä»–çš„ commit è¦ç¯„ï¼Œå®ƒå€‘ä¹Ÿæœƒå‡ºç¾åœ¨é¸é …ä¸­ï¼ˆSee more ğŸ‘‰ <a href="https://commitizen-tools.github.io/commitizen/third-party-commitizen/">Third-Party Commitizen Templates</a>ï¼‰</p>
<p><img alt="cz-init-2" src="/images/posts-image/2020-02-22-python-table-manner-series/cz-init-2.png"/></p>
<p>å†ä¾†æœƒå•æœ€æ–°çš„ git tag æ˜¯å¦ç‚ºæœ€æ–°çš„ç‰ˆæœ¬è™Ÿ<br/>
å¦‚æœä¸æ˜¯ï¼Œå°±æœƒåˆ—å‡º <code>git tag</code> æ‰€æœ‰çš„çµæœ<br/>
å¦‚æœå®Œå…¨æ²’æœ‰ç”¨é git tagï¼Œé è¨­æœƒæ˜¯ <code>0.0.1</code></p>
<p><img alt="cz-init-3" src="/images/posts-image/2020-02-22-python-table-manner-series/cz-init-3.jpg"/></p>
<p>ä¹‹å¾Œæœƒè©¢å•ç‰ˆæœ¬çš„æ ¼å¼è¦æ˜¯å¦‚ä½•<br/>
å¸¸ç”¨çš„æ ¼å¼æœ‰ <code>$version</code> (e.g., <code>1.0.0</code>) æˆ– <code>v$version</code> (e.g., <code>v1.0.0</code>)</p>
<p><img alt="cz-init-4" src="/images/posts-image/2020-02-22-python-table-manner-series/cz-init-4.jpg"/></p>
<p>æœ€å¾Œæœƒç¢ºèªè¦ä¸è¦å°‡é©—è­‰ commit message çš„ pre-commit hook è¨­å®šå¥½</p>
<p><img alt="cz-init-5.jpg" src="/images/posts-image/2020-02-22-python-table-manner-series/cz-init-5.jpg"/></p>
<p>å®Œæˆå¾Œå°±æœƒçœ‹åˆ°ä»¥ä¸‹ç•«é¢</p>
<p><img alt="cz-init-6.jpg" src="/images/posts-image/2020-02-22-python-table-manner-series/cz-init-6.jpg"/></p>
<p>ç›¸å°æ‡‰çš„è¨­å®šä¹ŸæœƒåŠ å…¥åˆ°è¨­å®šæª” <code>pyproject.toml</code> (æˆ– <code>.cz.toml</code>)</p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.commitizen]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cz_conventional_commits"</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1.0.2"</span>
<span class="n">tag_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$version"</span>
</code></pre></div>
<h2 id="commitizen_2">ä½¿ç”¨ Commitizen</h2>
<div class="highlight"><pre><span></span><code><span class="c1"># ä½¿ç”¨ commitizen åš commit</span>
<span class="c1"># (ä¹Ÿå¯ä»¥ç”¨ç°¡çŸ­ç‰ˆçš„ cz c)</span>
cz<span class="w"> </span>commit
</code></pre></div>
<p>ä»¥ <code>cz_conventional_commits</code> é€™å¥—è¦å‰‡ç‚ºä¾‹<br/>
æœƒå…ˆè©¢å•é€™æ¬¡çš„ commit åšäº†å“ªä¸€ç¨®æ”¹å‹•</p>
<p><img alt="commitizen-1" src="/images/posts-image/2020-02-22-python-table-manner-series/commitizen-1.jpg"/></p>
<p>æ¥è‘—æœƒè¦æ±‚è¼¸å…¥é€™æ¬¡æ”¹å‹•å„é …ç´°ç¯€</p>
<ul>
<li>Scopeï¼š æ”¹å‹•ç¯„åœ</li>
<li>Subjectï¼š ç°¡çŸ­æ•˜è¿°é€™æ¬¡çš„æ”¹å‹•</li>
<li>Bodyï¼š è©³ç´°æ•˜è¿°é€™æ¬¡çš„æ”¹å‹•</li>
<li>Is this a BREAKING CHANGEï¼Ÿï¼š é€™æ˜¯å¦æ˜¯ä¸€å€‹é‡å¤§æ”¹å‹•</li>
<li>Footerï¼š å…¶ä»–åƒè€ƒè³‡è¨Šï¼Œé€šå¸¸å¯ä»¥å°‡ Issue çš„ç·¨è™Ÿå¯«åœ¨é€™</li>
</ul>
<p><img alt="commitizen-2-w1024" src="/images/posts-image/2020-02-22-python-table-manner-series/commitizen-2.jpg"/></p>
<p>å›ç­”å®Œï¼Œå°±æœƒç”¢ç”Ÿ commit message <strong>feat(blog-post): update python table manners series</strong><br/>
æœ€ä¸‹æ–¹å‰‡æ˜¯ pre-commit hook çš„ commit message æ ¼å¼æª¢æŸ¥é€šé</p>
<h2 id="commit-message_1">å¼·åˆ¶æª¢æŸ¥ commit message</h2>
<p>å‰›é–‹å§‹å¼•å…¥ commitizen æ™‚ï¼Œå¯èƒ½æœƒå¸¸å¸¸å¿˜è¨˜è¦ä½¿ç”¨å®ƒä¾†åš commit<br/>
é€™æ™‚å€™å°±èƒ½ä½¿ç”¨åˆ°å‰ä¸€ç¯‡æåˆ°çš„ <a href="https://pre-commit.com/">pre-commit</a><br/>
é›–ç„¶åœ¨ 2.0.0 å¾Œå¯ä»¥é€é <code>cz init</code> åˆå§‹è¨­å®šå¥½ï¼Œä½†é‚„æ˜¯èªªæ˜å¦‚æœäº‹å¾Œæ‰æƒ³è¨­å®šè¦æ€éº¼åš</p>
<p>æˆ‘åœ¨ <a href="https://github.com/commitizen-tools/commitizen">commitizen</a> ä¸­æœ‰åŠ å…¥ <a href="https://github.com/commitizen-tools/commitizen/blob/master/.pre-commit-hooks.yaml">.pre-commit-hooks.yaml</a><br/>
å› æ­¤åªè¦åœ¨å°ˆæ¡ˆçš„ <code>.pre-commit-config.yaml</code> åŠ å…¥ä»¥ä¸‹é€™æ®µ</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">repos</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- repo</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/commitizen-tools/commitizen</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">rev</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.23.1</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">commitizen</span>
<span class="w">        </span><span class="nt">stages</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">commit-msg</span><span class="p p-Indicator">]</span>
</code></pre></div>
<p>ä¸¦é€é pre-commit è¨­å®š commit-msg éšæ®µçš„ git hook</p>
<div class="highlight"><pre><span></span><code>pipenv<span class="w"> </span>run<span class="w"> </span>pre-commit<span class="w"> </span>install<span class="w"> </span>-t<span class="w"> </span>commit-msg
</code></pre></div>
<p>åœ¨ commit åŸ·è¡Œå®Œï¼Œè¦é€²è¨Šæ¯å¯«å…¥å‰<br/>
git æœƒåŸ·è¡Œ <code>cz check</code> ä¾†ç¢ºèªè¼¸å…¥çš„è¨Šæ¯æ˜¯å¦ç¬¦åˆè¦ç¯„<br/>
å¦‚æœä¸ç¬¦åˆè¦ç¯„å°±æœƒæ‹’çµ•é€™æ¬¡çš„ commit</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯æª¢æŸ¥æœƒåœ¨ç”¢ç”Ÿ commit message å¾Œæ‰èƒ½åŸ·è¡Œ<br/>
å› æ­¤è¦è¨­å®š commit-msg éšæ®µçš„ git hook ï¼ˆi.e., <code>.git/hooks/commit-msg</code>ï¼‰<br/>
å¦‚æœåªä¸‹ <code>pipenv run pre-commit install</code> æ˜¯ä¸æœƒæˆåŠŸçš„</p>
<p>æ¥è‘—å¯ä»¥é–‹å§‹èŠå‹ï¼Œé€™äº› commit message èƒ½åšä»€éº¼æ‡‰ç”¨äº†</p>
<h2 id="_1">è‡ªå‹•æå‡ç‰ˆæœ¬è™Ÿ</h2>
<p>èˆ‡ commit message è¦ç¯„å¯ä»¥åšå®¢è£½åŒ–ä¸åŒ<br/>
commitizen ç›®å‰ä¸¦æ²’æœ‰æä¾›ä¸åŒç‰ˆæœ¬è¡¨ç¤ºæ–¹å¼çš„å®¢è£½åŒ–<br/>
ä¸€å¾‹éƒ½æœƒéµå®ˆ <a href="https://semver.org/">Semantic Version</a> ï¼ˆèªæ„åŒ–ç‰ˆæœ¬ï¼‰<br/>
é€™ç¨®ç‰ˆæœ¬è™Ÿæ¡ç”¨ <code>MAJOR.MINOR.PATCH</code> (e.g., <code>1.10.20</code>) çš„æ ¼å¼</p>
<ul>
<li><code>MAJOR</code>ï¼š é‡å¤§æ”¹å‹•ï¼Œä¸å‘å¾Œç›¸å®¹</li>
<li><code>MINOR</code>ï¼š æ–°å¢åŠŸèƒ½ï¼Œå¿…é ˆå‘å¾Œç›¸å®¹</li>
<li><code>PATCH</code>ï¼š ä¿®æ­£åŠŸèƒ½ï¼Œå¿…é ˆå‘å¾Œç›¸å®¹</li>
</ul>
<p>ä»¥ commitizen é è¨­ä½¿ç”¨çš„ <code>cz_conventional_commits</code> ä¾†èªªï¼Œç›¸å°æ‡‰çš„ commit ç¨®é¡å’Œæ‡‰è©²æå‡çš„ç‰ˆæœ¬è™Ÿå¦‚ä¸‹</p>
<ul>
<li><code>MAJOR</code>: BREAKING CHANGE (æ¯æ¬¡ commit éƒ½æœƒå•çš„ï¼Œé€™æ¬¡æ˜¯å¦ç‚ºé‡å¤§æ”¹å‹•)</li>
<li><code>MINOR</code>: feat</li>
<li><code>PATCH</code>: fix, refactor, perf</li>
</ul>
<p>p.s. conventional commit å¯ä»¥æœ‰å¾ˆå¤šç¨®å»¶ä¼¸ï¼Œé€™è£¡æŒ‡çš„åªæ˜¯ commitizen æ¡ç”¨çš„ç‰ˆæœ¬</p>
<p>æ¯æ¬¡æå‡ç‰ˆæœ¬è™Ÿåªæœƒæå‡ 1 ï¼Œè€Œä¸”ä»¥æœ€å‰é¢çš„ç‚ºä¸»<br/>
e.g., è¦ merge å› master çš„æ”¹å‹•ä¸­å‡ºç¾ BREAKING CHANGEï¼Œä¸ç®¡å…¶ä»–æœ‰å¤šå°‘ feat æˆ– fix ï¼Œéƒ½åªæœƒè®“ <code>MAJOR</code> æå‡ 1</p>
<p>ç›®å‰åªæœ‰ <code>cz_conventional_commits</code> æœ‰é è¨­çš„ç‰ˆæœ¬å°æ‡‰<br/>
å¦‚æœç‚º <code>cz_jira</code>, <code>cz_customize</code> æˆ–è‡ªå·±å®¢è£½åŒ–è¦å‰‡åŠ ä¸Šæå‡ç‰ˆæœ¬çš„åŠŸèƒ½ï¼Œå¯ä»¥åƒè€ƒcommitizen æ–‡ä»¶ä¸­ <a href="https://commitizen-tools.github.io/commitizen/customization/">customization</a> ï¼Œä¸¦åŠ ä¸Š <code>bump_pattern</code>ï¼ˆæ¯”å° commit æ˜¯å“ªå€‹ç¨®é¡ï¼‰ å’Œ <code>bump_map</code> ï¼ˆå“ªå€‹ç¨®é¡çš„ commit è¦æå‡å“ªå€‹ç‰ˆæœ¬è™Ÿï¼‰</p>
<p>ç¨å¾®è§£é‡‹äº†ä¸€ä¸‹æå‡ç‰ˆæœ¬çš„è¦å‰‡ï¼Œæ¥ä¸‹ä¾†è¦ä¾†è¬›è©²å¦‚ä½•ä½¿ç”¨äº†</p>
<div class="highlight"><pre><span></span><code>cz<span class="w"> </span>bump
</code></pre></div>
<p>ç¬¬ä¸€æ¬¡æå‡ç‰ˆæœ¬çš„æ™‚å€™ï¼Œæœƒå…ˆç¢ºèªç›®å‰åœ¨è¨­å®šæª” (e.g., <code>pyproject.toml</code>ï¼‰ä¸­çš„ç‰ˆæœ¬æ˜¯å¦å·²ç¶“æœ‰ç›¸å°æ‡‰çš„ git tag</p>
<p>å¦‚æœæ²’æœ‰å‰‡æœƒç¢ºèªé€™æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡ç‚ºé€™å€‹å°ˆæ¡ˆåŠ ä¸Š git tag</p>
<div class="highlight"><pre><span></span><code>Tag v0.0.1 could not be found.
Possible causes:
- version in configuration is not the current version
- tag_format is missing, check them using 'git tag --list'

? Is this the first tag created?  (Y/n)
</code></pre></div>
<p>å¦‚æœæƒ³è·³éé€™å€‹ç¢ºèªå¯ä»¥åœ¨å¾Œé¢åŠ ä¸Šåƒæ•¸ <code>--yes</code></p>
<div class="highlight"><pre><span></span><code>cz<span class="w"> </span>bump<span class="w"> </span>--yes
</code></pre></div>
<p>æ¥è‘— commitizen å°±æœƒæ–°å¢ä¸€å€‹ç›¸å°æ‡‰çš„ git tag å’Œæ›´æ–°è¨­å®šæª”ä¸­çš„ç‰ˆæœ¬è™Ÿ<br/>
å› ç‚ºè¦å°‡è¨­å®šæª”ä¸­çš„æ”¹å‹•å„²å­˜ï¼Œ commitizen é€™æ™‚æœƒå†æ–°å¢ä¸€å€‹ commit<br/>
(e.g., <code>bump: version 0.0.1 â†’ 0.0.2</code>)</p>
<p>é™¤äº†è¨­å®šæª”ä¸­çš„ç‰ˆæœ¬è™Ÿå¤–ï¼Œæœ‰æ™‚å€™å°ˆæ¡ˆæœ¬èº«ä¹Ÿæœ‰å…¶ä»–åœ°æ–¹æœƒä½¿ç”¨åˆ°ç‰ˆæœ¬è™Ÿ<br/>
å¦‚æœæ¯æ¬¡é€é commitizen æå‡ç‰ˆæœ¬è™Ÿå¾Œï¼Œé‚„è¦æ‰‹å‹•æ›´æ–°å…¶ä»–éƒ¨åˆ†ï¼Œå°±å¤±å»äº†è‡ªå‹•çš„å¥½è™•äº†<br/>
æ‰€ä»¥ commitizen å¦å¤–æä¾›äº† <code>version_files</code> é€™å€‹è¨­å®šï¼Œå°‡éœ€è¦æ”¹å‹•çš„æª”æ¡ˆä¹Ÿå¯«é€²ä¾†<br/>
commitizen æå‡ç‰ˆæœ¬è™Ÿæ™‚ï¼Œå°±æœƒä¸€ä½µæ›´æ–°æª”æ¡ˆçš„å…§å®¹<br/>
ï¼ˆRead More ğŸ‘‰ <a href="https://commitizen-tools.github.io/commitizen/bump/">bump</a> ï¼‰</p>
<p>é€é <code>cz bump</code> æŒ‡ä»¤é›–ç„¶å¯ä»¥çœä¸‹å¾ˆå¤šæ­¥é©Ÿ<br/>
ä½†æ›´å¥½çš„åšæ³•æ˜¯å°‡è‡ªå‹•å‡ç‰ˆåŠ å…¥åˆ°åŠ å…¥åˆ°æŒçºŒæ•´åˆï¼ˆContinuous Integrationï¼‰<br/>
åœ¨ git repo ä¸Šå°‡åˆ†æ”¯ merge åˆ° master æ™‚ï¼Œè‡ªå‹•æå‡ç‰ˆæœ¬è™Ÿ<br/>
å› ç‚ºæœƒç‰½æ¶‰åˆ°å„å€‹ä¸åŒå¹³å°çš„åšæ³•ï¼Œä¸æœƒæ•˜è¿°å¤ªå¤š<br/>
é€™è£¡é™„ä¸Š commitizen æ–‡ä»¶ä¸­ <a href="https://commitizen-tools.github.io/commitizen/tutorials/github_actions/">Github Actions</a>, <a href="https://commitizen-tools.github.io/commitizen/tutorials/gitlab_ci/">Gitlab CI</a> é‚„æœ‰ <a href="https://commitizen-tools.github.io/commitizen/tutorials/jenkins_pipeline/">Jenkins Pipeline</a> çš„åšæ³•</p>
<h2 id="commit">å®¢è£½åŒ– commit è¦ç¯„</h2>
<p>ç›®å‰ commitizen æä¾›å…©ç¨®æ–¹å¼</p>
<ol>
<li>ç›´æ¥åœ¨è¨­å®šæª”è¨­å®š â†’ é©åˆåªéœ€è¦æ”¹å‹•å•é¡Œï¼Œä¸éœ€è¦ä½¿ç”¨åˆ°è¤‡é›œçš„åŠŸèƒ½</li>
<li>å°‡ commit è¦ç¯„å¯«æˆ Python å¥—ä»¶ç™¼ä½ˆ â†’ é©åˆéœ€è¦åŠ å…¥è¤‡é›œçš„é©—è­‰</li>
</ol>
<h3 id="_2">ç›´æ¥åœ¨è¨­å®šæª”è¨­å®š</h3>
<p>é¦–å…ˆå¿…é ˆå…ˆå°‡ name æŒ‡å®šåˆ° <code>cz_customize</code> é€™å¥— commit è¦ç¯„</p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.commitizen]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cz_customize"</span>
</code></pre></div>
<p>å†ä¾†è¦è¨­å®šä¸‹é¢çš„æ¬„ä½<br/>
å…¶ä¸­æœ€é‡è¦çš„æ˜¯ <code>message_template</code>ï¼ˆæ”¯æ´<a href="https://jinja.palletsprojects.com/en/2.11.x/">Jinja</a>ï¼‰<br/>
ä»¥ <code>"{{change_type}}:{% if show_message %} {{message}}{% endif %}"</code> é€™å€‹ä¾‹å­ä¾†èªª<br/>
éœ€è¦ <code>change_type</code>, <code>show_message</code>, <code>message</code> ä¸‰å€‹è®Šæ•¸ä¾†ç”¢ç”Ÿ commit message</p>
<p>ï¼ˆp.s. å¦‚æœæƒ³è¦ä½¿ç”¨é©—è­‰ commit message çš„åŠŸèƒ½ï¼Œå‰‡è¦æ›´æ–° <code>schema_pattern</code>ï¼‰</p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.commitizen.customize]</span>
<span class="n">message_template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"{{change_type}}:{% if show_message %} {{message}}{% endif %}"</span>
<span class="n">example</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"feature: this feature enable customize through config file"</span>
<span class="n">schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&lt;type&gt;: &lt;body&gt;"</span>
<span class="n">schema_pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"(feature|bug fix):(</span><span class="se">\\</span><span class="s2">s.*)"</span>
<span class="n">bump_pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"^(break|new|fix|hotfix)"</span>
<span class="n">bump_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"break"</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"MAJOR"</span><span class="p">,</span><span class="w"> </span><span class="s2">"new"</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"MINOR"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fix"</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="p">,</span><span class="w"> </span><span class="s2">"hotfix"</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="p">}</span>
<span class="n">info_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cz_customize_info.txt"</span>
<span class="n">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"""</span>
<span class="s2">This is customized info</span>
<span class="s2">"""</span>
</code></pre></div>
<p>è®Šæ•¸è¦åœ¨ <code>[[tool.commitizen.customize.questions]]</code> çš„å€æ®µä½œå®šç¾©<br/>
èƒŒå¾Œæ‰€ä½¿ç”¨çš„å¥—ä»¶æ˜¯ <a href="https://github.com/tmbo/questionary">questionary</a></p>
<ul>
<li><code>name</code>ï¼š å¿…é ˆè·Ÿå‰é¢ <code>message_template</code> å®šç¾©çš„ä¸€æ¨¡ä¸€æ¨£ï¼Œè€Œä¸”è£¡é¢ç”¨åˆ°çš„è®Šæ•¸éƒ½è¦æœ‰å°æ‡‰çš„å•é¡Œèƒ½å–å¾—å€¼</li>
<li><code>message</code>ï¼š é¡¯ç¤ºçµ¦ä½¿ç”¨è€…çš„å•é¡Œ</li>
<li><code>type</code>ï¼š <a href="https://github.com/tmbo/questionary">questionary</a> ä¸­çš„å•é¡Œå‹æ…‹</li>
<li>å…¶ä»–æ¬„ä½ (e.g., <code>choice</code>) å‰‡æ˜¯é  <code>type</code> ä¾†æ±ºå®šæ˜¯å¦éœ€è¦</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">[[tool.commitizen.customize.questions]]</span>
<span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"list"</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"change_type"</span>
<span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"feature"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bug fix"</span><span class="p">]</span>
<span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Select the type of change you are committing"</span>

<span class="k">[[tool.commitizen.customize.questions]]</span>
<span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"input"</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"message"</span>
<span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Body."</span>

<span class="k">[[tool.commitizen.customize.questions]]</span>
<span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"confirm"</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"show_message"</span>
<span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Do you want to add body message in commit?"</span>
</code></pre></div>
<p>è¨­å®šå®Œä¹‹å¾Œï¼Œå†ä½¿ç”¨ <code>cz commit</code> å°±å¯ä»¥çœ‹åˆ°å®¢è£½åŒ–éå¾Œçš„å•é¡Œäº†<br/>
<img alt="customize" src="/images/posts-image/2020-02-22-python-table-manner-series/customize.jpg"/></p>
<h3 id="commit-python">å°‡å®¢è£½åŒ–çš„ commit è¦ç¯„å¯«æˆ Python å¥—ä»¶ç™¼ä½ˆ</h3>
<p>é€™å€‹åšæ³•æ¯”è¼ƒè¤‡é›œï¼Œä¹Ÿæ¯”è¼ƒä¸å¸¸æœƒç”¨åˆ°ï¼Œæ‰€ä»¥æˆ‘åªæœƒæ¦‚ç•¥åœ°è¬›<br/>
ï¼ˆRead More ğŸ‘‰ <a href="https://commitizen-tools.github.io/commitizen/customization/">Customization</a>ï¼‰</p>
<p>æˆ‘å·²ç¶“å…ˆå°‡å¥—ä»¶çš„æ¶æ§‹é©Ÿå¯«æˆä¸€å€‹ <a href="https://cookiecutter.readthedocs.io/en/1.7.0/">cookiecutter</a> ç¯„æœ¬<br/>
é€éä»¥ä¸‹æŒ‡ä»¤ï¼Œå¯ä»¥é€²å…¥ cookiecutter çš„äº’å‹•å¼ä»‹é¢ï¼Œä¸¦åˆå§‹åŒ–å°ˆæ¡ˆ</p>
<div class="highlight"><pre><span></span><code>cookiecutter<span class="w"> </span>gh:Lee-W/commitizen_cz_template
</code></pre></div>
<p>æœ€ä¸»è¦éœ€è¦å¯¦ä½œçš„å‡½å¼æœ‰ <code>questions</code>, <code>message</code><br/>
å¯¦ä½œå®Œæˆå¾Œï¼Œå¿…é ˆåœ¨è¦ä½¿ç”¨é€™å€‹ commit è¦ç¯„çš„ç’°å¢ƒå®‰è£é€™å€‹å¥—ä»¶<br/>
å®‰è£ä¹‹å¾Œæœƒåœ¨ <code>cz ls</code> çœ‹åˆ°é€™å€‹æ–°çš„ commit è¦ç¯„<br/>
åœ¨è¨­å®šæª”ä¸­è¨­å®š <code>name</code> æˆ–åœ¨æŒ‡ä»¤åˆ—åŠ ä¸Šåƒæ•¸ <code>-n name</code> (e.g., <code>cz -n cz_test commit</code>) å°±å¯ä»¥é–‹å§‹ä½¿ç”¨</p>
<h2 id="changelog">è‡ªå‹•ç”¢ç”Ÿæ›´æ–°æ—¥èªŒï¼ˆChangelogï¼‰</h2>
<p>commitizen å¯ä»¥é€ééå¾€çš„ commit message ç”¢ç”Ÿ <a href="https://keepachangelog.com/en/1.1.0/">keep a changelog</a> æ ¼å¼çš„æ›´æ–°æ—¥èªŒ</p>
<p>é€éä»¥ä¸‹æŒ‡ä»¤ï¼Œå°±èƒ½å¾æœ€èˆŠåˆ°æœ€æ–°çš„ commit message ç”¢ç”Ÿæ›´æ–°æ—¥èªŒï¼ˆé è¨­æ˜¯ <code>CHANGELOG.md</code>ï¼‰</p>
<div class="highlight"><pre><span></span><code>cz<span class="w"> </span>changelog
</code></pre></div>
<p>å¦‚æœå·²ç¶“æœ‰ç¾æˆçš„ <code>CHANGELOG.md</code>ï¼Œ å‰‡å¯ä»¥ä½¿ç”¨ <code>cz changelog --incremental</code> æŒ‡ä»¤</p>
<p>commitizen æœƒè©¦è‘—æ‰¾å‡ºæ–‡ä»¶ä¸­æœ€æ–°é‡‹å‡ºç‰ˆæœ¬ (e.g., <code>1.0.5</code>) çš„ä½ç½®ï¼Œå°‡æœ€æ–°é‡‹å‡ºç‰ˆæœ¬ä»¥å¾Œçš„ commit åŠ å…¥åˆ°æ›´æ–°æ—¥èªŒçš„æœ€é ‚ç«¯</p>
<p>ä¾‹å¦‚ç›®å‰æœ‰ä¸€å€‹å°ˆæ¡ˆï¼Œæœ€æ–°çš„ç‰ˆæœ¬æ˜¯ 1.0.5ï¼Œä¹‹å¾Œæœ‰ 2 å€‹ commit</p>
<ul>
<li>feat: cool new features</li>
<li>ci: update jenkins file</li>
</ul>
<p>åŸæœ¬çš„æ›´æ–°æ—¥èªŒ</p>
<div class="highlight"><pre><span></span><code><span class="gu">## 1.0.5</span>
<span class="gu">### Feat</span>
<span class="k">-</span><span class="w"> </span>old features
</code></pre></div>
<p>å‰‡ commitizen åœ¨é‡‹å‡º 1.1.0 æ™‚ï¼Œå°±æœƒç”¢ç”Ÿå¦‚ä¸‹çš„æ›´æ–°æ—¥èªŒ</p>
<div class="highlight"><pre><span></span><code><span class="gu">## 1.1.0 (2020-07-19)</span>

<span class="gu">### Feat</span>

<span class="k">-</span><span class="w"> </span>new cool new features

<span class="gu">## 1.0.5</span>
<span class="gu">### Feat</span>
<span class="k">-</span><span class="w"> </span>some old features
</code></pre></div>
<p>å› ç‚ºç”¢ç”Ÿæ›´æ–°æ—¥èªŒï¼Œé€šå¸¸é©åˆåœ¨å‡ç‰ˆå¾ŒåŸ·è¡Œ<br/>
åœ¨ <code>cz bump</code> åŠ ä¸Š <code>--changelog</code> åƒæ•¸å°±å¯ä»¥æå‡ç‰ˆæœ¬çš„åŒæ™‚ï¼Œç”¢ç”Ÿæ›´æ–°æ—¥èªŒ</p>
<h2 id="commitizen_3">å…¶ä»– commitizen æŒ‡ä»¤å’Œå¸¸ç”¨åƒæ•¸</h2>
<ul>
<li><code>cz bump</code>ï¼š æå‡ç‰ˆæœ¬è™Ÿ<ul>
<li><code>--dry-run</code>ï¼š å°‡æå‡ç‰ˆæœ¬è™Ÿçš„è¨Šæ¯è¼¸å‡ºåˆ°çµ‚ç«¯æ©Ÿï¼Œä¸æœƒå¯¦éš›ç”¢ç”Ÿ tag å’Œæ”¹è®Šæª”æ¡ˆ</li>
<li><code>--increment {MAJOR,MINOR,PATCH}</code>ï¼š æå‡ç‰¹å®šç‰ˆæœ¬è™Ÿ</li>
</ul>
</li>
<li><code>cz changelog</code>: ç”¢ç”Ÿæ›´æ–°æ—¥èªŒ<ul>
<li><code>--dry-run</code>: å°‡ç”¢ç”Ÿçš„æ›´æ–°æ—¥èªŒæ›¸è™•åˆ°çµ‚ç«¯æ©Ÿï¼Œä¸ç”¢ç”Ÿæˆ–æ›´æ–° <code>CHANGELOG.md</code></li>
</ul>
</li>
<li><code>cz -n NAME [command]</code>ï¼š ä½¿ç”¨ä¸åŒçš„ commit è¦å‰‡ ï¼ˆe.g., <code>cz -n cz_jira commit</code>ï¼‰</li>
<li><code>cz version</code>ï¼š é¡¯ç¤ºç‰ˆæœ¬<ul>
<li><code>-p</code>ï¼ˆ<code>--project</code>ï¼‰ï¼š é¡¯ç¤ºå°ˆæ¡ˆç‰ˆæœ¬</li>
<li><code>-c</code>ï¼ˆ<code>--commitizen</code>ï¼‰ï¼š é¡¯ç¤º commitizen ç‰ˆæœ¬ï¼ˆé è¨­ï¼‰</li>
</ul>
</li>
</ul>
<h2 id="commitizen_4">é—œæ–¼ commitizen çš„é›œè«‡</h2>
<p>æˆ‘åœ¨ Taipei.py ç¬¬ä¸€æ¬¡è©¦è¬› Python Table Manners æ™‚<br/>
æœ‰ä¸€é å°±æåˆ°äº†ï¼Œé›–ç„¶ Python ä¹Ÿæœ‰ commitizen é€™å€‹å·¥å…·ï¼Œä½†é‚„ä¸å¤ªæˆç†Ÿ</p>
<p><img alt="commitizen is not mature" src="/images/posts-image/2020-02-22-python-table-manner-series/not-mature-1.jpg"/></p>
<p>æ²’æƒ³åˆ°åœ¨ PyCon CA çš„å‰ä¸€å€‹ç¦®æ‹œæˆ‘èªçœŸæ¸¬è©¦æ™‚<br/>
æ‰ç™¼ç¾å…¶å¯¦ commitizen å·²ç¶“å¾ˆå¤ ç”¨äº†ï¼Œè©²æœ‰çš„åŠŸèƒ½éƒ½æœ‰<br/>
åªæ˜¯æˆ‘å‰›å¥½éƒ½ç”¨ä¸€äº›å¥‡æ€ªçš„æ¸¬è©¦æ–¹å¼ï¼Œæ¸¬åˆ°ä¸€äº› edge case<br/>
é€™æ™‚å°±è¦ºå¾—ä¿¡å¥‰ Python ï¼ˆï¼Ÿï¼Ÿï¼Ÿï¼‰çš„æˆ‘ï¼Œå¥½åƒæ‡‰è©²å¥½å¥½çš„ä»‹ç´¹ Python çš„å·¥å…·<br/>
è€Œä¸æ˜¯ JavaScript çš„ <a href="https://github.com/commitizen">commitizen</a></p>
<p><img alt="i am the one who's not mature" src="/images/posts-image/2020-02-22-python-table-manner-series/not-mature-2.jpg"/></p>
<p>æ–¼æ˜¯æˆ‘å°±åœ¨ PyCon CA å‰ä¸€å€‹ç¦®æ‹œï¼Œé–‹å§‹è²¢ç»èµ· <a href="https://github.com/commitizen-tools/commitizen">commitizen</a><br/>
æŠŠæˆ‘é‡åˆ°çš„ issues éƒ½ä¿®äº†ï¼Œå°±é †ä¾¿æŠŠæŠ•å½±ç‰‡ä¸­ç›¸é—œçš„å…§å®¹ä¸€èµ·ç¿»æ–°äº†</p>
<p>è²¢ç»çš„éç¨‹ä¸­ä¹Ÿç™¼ç¾äº†å¾ˆå¤šé‚„èƒ½å†å¢åŠ çš„æ–°åŠŸèƒ½ï¼Œæ–¼æ˜¯å°±åœ¨ PyCon CA 2019 å¸¶äº†é€™å€‹å°ˆæ¡ˆå» Develop Sprint<br/>
ç¬¬ä¸€æ¬¡ç•¶ Sprint Leader é‚„è »å¥½ç©çš„ï¼Œä¹Ÿè »æœ‰æˆå°±æ„Ÿçš„<br/>
ï¼ˆRead More ğŸ‘‰ <a href="https://blog.wei-lee.me/posts/tech/2019/12/pycon-ca-2019">PyCon CA 2019</a>ï¼‰</p>
<h3 id="java-script-commitizen">ç‚ºä»€éº¼ä¸ç”¨ Java Script çš„ commitizen å°±å¥½äº†</h3>
<p><del>å› ç‚ºæˆ‘æ˜¯ Python çš„é–‹ç™¼è€…å•Šï¼ï¼ï¼</del></p>
<p>èµ·åˆæˆ‘ä¹Ÿæ˜¯å¾ JavaScript çš„ç‰ˆæœ¬é–‹å§‹ä½¿ç”¨ ï¼ˆç•¢ç«Ÿå…©å€‹å°ˆæ¡ˆ star çš„æ•¸é‡å·®äº†ä¸€ç™¾å€ï¼‰<br/>
åŸæœ¬æˆ‘å°±æœ‰å¯«å¥½ commit message çš„ç¿’æ…£<br/>
èƒ½æœ‰å·¥å…·å¹«åŠ©æˆ‘æŠŠé€™ä»¶äº‹åšå¾—æ›´å¥½ï¼Œç•¶ç„¶å°±å†å¥½ä¸éäº†</p>
<p>ç”¨äº†ä¸€æ®µæ™‚é–“å¾Œï¼Œæˆ‘é–‹å§‹è¦ºå¾—æˆ‘æ˜æ˜éƒ½å·²ç¶“èªçœŸå¯«å¥½ commit message äº†<br/>
ç‚ºä»€éº¼æ¯æ¬¡ Pull Request / Merge Request é‚„æ˜¯èŠ±é‚£éº¼å¤šæ™‚é–“å¯«<br/>
æ˜¯ä¸æ˜¯æœ‰ä»€éº¼å·¥å…·å¯ä»¥è‡ªå‹•é€éå¯«å¥½çš„ commit ç”¢ç”Ÿä¸€äº›è¨Šæ¯ï¼Ÿ<br/>
å†ä¾†å°±æ‰¾åˆ°äº† <a href="https://github.com/commitizen/cz-conventional-changelog">cz-conventional-changelog</a></p>
<p>ä½† <a href="https://github.com/commitizen/cz-conventional-changelog">cz-conventional-changelog</a> ä¸èƒ½è·Ÿ <a href="https://github.com/leonardoanalista/cz-customizable">cz-customizable</a> åŒæ™‚ä½¿ç”¨<br/>
ï¼ˆRead More ğŸ‘‰ <a href="https://github.com/commitizen/cz-cli/issues/434">Possible to use multiple adapters? #434</a>ï¼‰</p>
<p>è€Œä¸”é€™äº›æ“´å……å¸¸å¸¸è¦ç”¨åˆ° <code>package.json</code> ä¾†åšè¨­å®š<br/>
å¯æ˜¯æˆ‘å°±ä¸æ˜¯ Java Script çš„å°ˆæ¡ˆï¼Œå°±ä¸æƒ³åŠ å…¥é€™å€‹æª”æ¡ˆä¾†è¨­å®šå•Š ğŸ¤·â€â™‚ï¸<br/>
æ‰€ä»¥æ‰é–‹å§‹ä¾†æ‰¾æ˜¯ä¸æ˜¯æœ‰ Python ç‰ˆæœ¬çš„æ›¿ä»£æ–¹æ¡ˆ<br/>
ï¼ˆPython çš„ <a href="https://github.com/commitizen-tools/commitizen">commitizen</a> æ”¯æ´çš„ toml ï¼ˆ<code>.cz.toml</code>ï¼‰æ˜¯é€šç”¨çš„æ ¼å¼ï¼Œè£¡é¢ Python ç›¸é—œçš„å…§å®¹ï¼Œé©ç”¨æ–¼å„èªè¨€ï¼‰</p>
<h3 id="_3">æŒçºŒè²¢ç»</h3>
<p>æ•´é«”ä¾†èªªï¼Œ commitizen æ˜¯ä¸€å€‹è®“æˆ‘è²¢ç»å¾—å¾ˆæœ‰æˆå°±æ„Ÿçš„å°ˆæ¡ˆ<br/>
æœ€ä¸»è¦çš„åŸå› ä¹‹ä¸€å°±æ˜¯é€™æ˜¯æˆ‘æƒ³ç”¨çš„å·¥å…·</p>
<p>è²¢ç»çš„éç¨‹ï¼Œä¹Ÿæœƒå¾ˆå¿«å°±æ”¶åˆ°ä½œè€… <a href="https://github.com/Woile">Woile</a> çš„å›é¥‹<br/>
å®ƒä¹Ÿæœƒç”¨å¾ˆå‹å–„çš„æ–‡å­—ï¼Œè®“æˆ‘è¦ºå¾—è²¢ç» commitizen æ‰€èŠ±çš„æ™‚é–“ï¼Œæ˜¯æœ‰å—åˆ°é‡è¦–çš„</p>
<p><img alt="friendly-response-1" src="/images/posts-image/2020-02-22-python-table-manner-series/friendly-response-1.jpg"/></p>
<p><img alt="friendly-response-2" src="/images/posts-image/2020-02-22-python-table-manner-series/friendly-response-2.jpg"/></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œ commitizen æ¸¬è©¦è¦†è“‹ç‡å¾ˆé«˜ï¼Œæ¯”è¼ƒä¸éœ€è¦æ€•æ”¹éŒ¯äº†æœƒä¸æœƒå¼„å£èˆŠæœ‰çš„åŠŸèƒ½<br/>
ç¨‹å¼ç¢¼é¢¨æ ¼ä¸Šï¼Œé€é black è·Ÿ flake8 ä¾†è¦ç¯„ï¼Œè®“ç¨‹å¼ç¢¼é–±è®€èµ·ä¾†è¼•é¬†å¾ˆå¤š<br/>
åœ¨è²¢ç»çš„éç¨‹ä¸­ï¼Œä¹Ÿå­¸åˆ°äº†ä¸å°‘å¾ˆå¯¦ç”¨çš„å·¥å…·ï¼ˆe.g., pre-commit, cookiecutterï¼‰</p>
<p>æ‰€ä»¥<strong>ä¸€èµ·ä¾†è²¢ç» <a href="https://github.com/commitizen-tools/commitizen">commitizen</a> å§ ğŸ’ª</strong></p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://medium.com/@klauskpm/how-to-create-good-commit-messages-67943d30cced">how to create a good commit message</a></li>
<li><a href="https://www.freecodecamp.org/news/writing-good-commit-messages-a-practical-guide/">How to Write Good Commit Messages: A Practical Git Guide</a></li>
<li><a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commit</a></li>
<li><a href="https://semver.org/">Semantic Version</a></li>
</ul>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message &amp;url=https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen&amp;title=Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message&amp;body=https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/python.html">Python</a><a href="https://blog.wei-lee.me/tag/git.html">Git</a> </aside>
<div class="clear"></div>
<div class="series">
<p>This post is part 8 of the "Python Table Manners" series:</p>
<ol class="parts">
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-series">Python Table Manners ç³»åˆ—</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-dependency-mangement">Python Table Manners - è™›æ“¬ç’°å¢ƒå’Œå¥—ä»¶ç®¡ç†</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-test-1">Python Table Manners - æ¸¬è©¦ (ä¸€)</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-test-2">Python Table Manners - æ¸¬è©¦ (äºŒ)</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-coding-style">Python Table Manners - ç¨‹å¼ç¢¼é¢¨æ ¼</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-manage-trivial-tasks">Python Table Manners - ç®¡ç†ç¹ç‘£ä»»å‹™</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-pre-commit">Python Table Manners - pre-commit: git commit å‰åšå®Œæª¢æŸ¥</a>
</li>
<li class="active">
<a href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen">Python Table Manners - Commitizen: è¦æ ¼åŒ– commit message</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security">Python Table Manners - å®‰å…¨æ€§æª¢æŸ¥</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/04/python-table-manners-documentation">Python Table Manners - æ–‡ä»¶</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2020/12/python-table-manner-continuous-integration">Python Table Manners - æŒçºŒæ•´åˆ/éƒ¨ç½²</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manners-cookiecutter">Python Table Manners - Cookiecutter å°ˆæ¡ˆæ¨¡æ¿</a>
</li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2021/01/python-table-manner-editor">Python Table Manners ç•ªå¤– - ç·¨è¼¯å™¨</a>
</li>
</ol>
</div>
</section>
<aside class="post-nav">
<a class="post-nav-next" href="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-security">
<section class="post-nav-teaser">
<i class="icon icon-arrow-left"></i>
<h2 class="post-nav-title">Python Table Manners - å®‰å…¨æ€§æª¢æŸ¥</h2>
<p class="post-nav-excerpt">æœç„¶åœ¨æ²’æœ‰å¯«ä½œæ¾çš„ç£ä¿ƒä¸‹ï¼Œé¦¬ä¸Šå°±æ‹–ç¨¿äº† XD æ¥ä¸‹ä¾†è¦ä»‹ç´¹åœ¨ Python å°ˆæ¡ˆä¸­åšå®‰å…¨æ€§æª¢æŸ¥çš„å·¥å…·</p>
<p class="post-nav-meta"><time datetime="2020/03/22 - Sun">2020/03/22 - Sun</time></p>
</section>
</a>
<a class="post-nav-prev" href="https://blog.wei-lee.me/posts/tech/2020/02/python-table-manners-pre-commit">
<section class="post-nav-teaser">
<i class="icon icon-arrow-right"></i>
<h2 class="post-nav-title">Python Table Manners - pre-commit: git commit å‰åšå®Œæª¢æŸ¥</h2>
<p class="post-nav-excerpt">å‰ä¸€ç¯‡æåˆ°äº†é€é invoke ç°¡åŒ–ç¹ç‘£çš„æŒ‡ä»¤ ä½†äººé¡é™¤äº†æ˜¯æ‡¶æƒ°çš„ï¼Œé‚„æ˜¯å¥å¿˜çš„ å³ä½¿å·²ç¶“æ›´ç°¡ä¾¿äº†ï¼Œæ²’è¢«ç£ä¿ƒå¸¸å¸¸é‚„æ˜¯æœƒå¿˜äº†åŸ· â€¦</p>
<p class="post-nav-meta"><time datetime="2020/02/28 - Fri">2020/02/28 - Fri</time></p>
</section>
</a>
<div class="clear"></div>
</aside>
</div>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2020/03/python-table-manners-commitizen" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten Â© 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> â€¢ Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> â€¢
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<!-- Add MathJax and FontAwesome for Asciidoc -->\
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    var mdSelector=".highlight pre code";
    var rstSelector=".highlight pre code";
    // For ":source-highlighter: highlight.js`" in asciidoc
    var adocSelector="pre.highlight > code[data-lang]"
    var selector=mdSelector;
    // Format code blocks and add line numbers
    function codestyling() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
        // No lines for plain text blocks
        if (!$(this).hasClass('language-text')) {
          var code = $(this);
          // Calculate amount of lines
          var lines = code.html().split(/\n(?!$)/g).length;
          var numbers = [];
          if (lines > 1) {
            lines++;
          }
          for (i = 1; i < lines; i++) {
            numbers += '<span class="line" aria-hidden="true">' + i + '</span>';
          }
          code.parent().append('<div class="lines">' + numbers + '</div>');
        }
      });
    }

    // Format code blocks only
    function codestylingWithoutLineNumbers() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
      });
    }

    codestylingWithoutLineNumbers();
    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>