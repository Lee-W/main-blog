
<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Create a Telegram EchoBot </title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot" rel="canonical"/>
<!-- Feed -->
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten Full Atom Feed" type="application/atom+xml"/>
<!-- TODO: combine -->
<link href="https://blog.wei-lee.me/theme/css/style.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pygments.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/pagefind-ui-custom.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/code-copy.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<script>
    var siteUrl = 'https://blog.wei-lee.me';
  </script>
<script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>
<meta content="最近當助教要出一個 Telegram Bot 相關的 Project 先來寫一篇簡單的教學，減少之後的問題 XDD" name="description"/>
<meta content="Wei Lee" name="author"/>
<meta content="Chat Bot" name="tags"/>
<meta content="Flask" name="tags"/>
<!-- Open Graph -->
<meta content="Those aren't written down are meant to be forgotten" prefix="og: http://ogp.me/ns#" property="og:site_name">
<meta content="Create a Telegram EchoBot " prefix="og: http://ogp.me/ns#" property="og:title">
<meta content="最近當助教要出一個 Telegram Bot 相關的 Project 先來寫一篇簡單的教學，減少之後的問題 XDD" prefix="og: http://ogp.me/ns#" property="og:description">
<meta content="zh-tw" prefix="og: http://ogp.me/ns#" property="og:locale">
<meta content="https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot" prefix="og: http://ogp.me/ns#" property="og:url"/>
<meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"/>
<meta content="2017-03-31 19:24:00+08:00" prefix="og: http://ogp.me/ns#" property="article:published_time"/>
<meta content="" prefix="og: http://ogp.me/ns#" property="article:modified_time"/>
<meta content="https://blog.wei-lee.me/author/wei-lee.html" prefix="og: http://ogp.me/ns#" property="article:author"/>
<meta content="Tech" prefix="og: http://ogp.me/ns#" property="article:section">
<meta content="Chat Bot" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="Flask" prefix="og: http://ogp.me/ns#" property="article:tag"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" prefix="og: http://ogp.me/ns#" property="og:image"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@clleew" name="twitter:site"/>
<meta content="Create a Telegram EchoBot " name="twitter:title"/>
<meta content="https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot" name="twitter:url"/>
<meta content="https://blog.wei-lee.me//images/cover.jpeg" name="twitter:image:src"/>
<meta content="最近當助教要出一個 Telegram Bot 相關的 Project 先來寫一篇簡單的教學，減少之後的問題 XDD" name="twitter:description"/>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Create a Telegram EchoBot",
  "headline": "Create a Telegram EchoBot",
  "datePublished": "2017-03-31 19:24:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Wei Lee",
    "url": "https://blog.wei-lee.me/author/wei-lee.html"
  },
  "image": "https://blog.wei-lee.me//images/cover.jpeg",
  "url": "https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot",
  "description": "最近當助教要出一個 Telegram Bot 相關的 Project 先來寫一篇簡單的教學，減少之後的問題 XDD"
}
</script>
</meta></meta></meta></meta></meta></link></meta><link href="https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2017", "item": "https://blog.wei-lee.me/posts/tech/2017"}, {"@type": "ListItem", "position": 5, "name": "03", "item": "https://blog.wei-lee.me/posts/tech/2017/03"}, {"@type": "ListItem", "position": 6, "name": "Create a telegram echobot", "item": "https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "Create a Telegram EchoBot", "about": "Tech", "datePublished": "2017-03-31 19:24"}</script></head>
<body class="category-template">
<div class="nav-header">
<nav aria-label="Main" class="nav-wrapper">
<ul>
<li class="nav-Home" role="presentation"><a href="/"><span>Home</span></a></li>
<li class="nav-About Me" role="presentation"><a href="/pages/about-me.html"><span>About Me</span></a></li>
<li class="nav-🗄️ Archives" role="presentation"><a href="/archives.html"><span>🗄️ Archives</span></a></li>
<li class="nav-🔍 Search" role="presentation"><a href="/pages/search.html"><span>🔍 Search</span></a></li>
<li role="presentation"><a href="https://blog.wei-lee.me/category/book.html"><span>Book</span></a></li>
<li role="presentation"><a href="https://blog.wei-lee.me/category/gossiping.html"><span>Gossiping</span></a></li>
<li class="nav-tech active" role="presentation"><a href="https://blog.wei-lee.me/category/tech.html"><span>Tech</span></a></li>
</ul>
<ul class="nav-meta">
<li class="nav-linkedin"><a aria-label="Linkedin" href="https://tw.linkedin.com/in/clleew" target="_blank"><i aria-hidden="true" class="icon icon-linkedin"></i>
<span>Linkedin</span>
</a></li>
<li class="nav-github"><a aria-label="Github" href="https://github.com/Lee-W" target="_blank"><i aria-hidden="true" class="icon icon-github"></i>
<span>GitHub</span>
</a></li>
<li class="nav-twitter"><a aria-label="Twitter" href="https://twitter.com/clleew" target="_blank"><i aria-hidden="true" class="icon icon-twitter"></i>
<span>Twitter</span>
</a></li>
<li class="nav-search" style="display: none;">
<a title="Search">
<i aria-hidden="true" class="icon icon-search"></i>
<span>Search</span>
</a>
</li>
</ul> </nav>
<div class="nav-wrapper-control">
<div class="inner">
<a class="nav-menu" role="button"><i aria-hidden="true" class="icon icon-menu"></i>Menu</a>
<a class="nav-search" role="button" style="display: none;" title="Search"><i aria-hidden="true" class="icon icon-search"></i></a>
</div>
</div>
</div>
<div aria-label="Close" class="nav-close" role="button"></div>
<section class="page-wrapper" id="wrapper">
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="post-header has-cover">
<div class="inner">
<span class="post-info">
<span class="post-type">Article</span>
<span class="post-count">Tech</span>
</span>
<h1 class="post-title">
            Create a Telegram EchoBot
        </h1>
<div class="post-meta">
<div class="post-meta-avatars">
<figure class="post-meta-avatar avatar">
<a class="author-avatar" href="https://blog.wei-lee.me/author/wei-lee.html">
<img alt="Wei Lee" class="author-profile-image" src="https://blog.wei-lee.me//images/avatar.jpeg"/>
</a>
</figure>
</div>
<h4 class="post-meta-author">
            Wei Lee
          </h4>
<time datetime="2017/03/31 - Fri">2017/03/31 - Fri</time>
          • 2 min read
        </div>
<div class="post-cover cover">
<img alt="Category Tech" src="https://blog.wei-lee.me//images/cover.jpeg"/>
</div>
</div>
</header>
<!-- Post content -->
<main class="content" data-pagefind-body="" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<p>最近當助教要出一個 Telegram Bot 相關的 Project<br/>
先來寫一篇簡單的教學，減少之後的問題 XDD</p>
<!--more-->
<div class="toc">
<ul>
<li><a href="#what-is-telegram">What is Telegram</a></li>
<li><a href="#why-telegram">Why Telegram</a></li>
<li><a href="#web-framework">Web Framework</a></li>
<li><a href="#apply-a-telegram-bot">Apply a telegram bot</a></li>
<li><a href="#telegram-bot-api-wrapper">Telegram Bot API Wrapper</a></li>
<li><a href="#star-programming">Star Programming</a><ul>
<li><a href="#setup">Setup</a></li>
<li><a href="#95set95webhook">_set_webhook</a></li>
<li><a href="#wehook95handler">wehook_handler</a></li>
</ul>
</li>
<li><a href="#reference">Reference</a></li>
</ul>
</div>
<p>如果對 Chat Bot 的基本運作概念不太熟<br/>
可以參考<a href="https://blog.wei-lee.me/posts/tech/2016/11/introduction-to-chatbot#introduction-to-chatbot">[Bot] Introduction to Chatbot</a></p>
<h2 id="what-is-telegram">What is Telegram</h2>
<p>在台灣，好像還沒有那麼多人用 Telegram<br/>
簡單來說就跟 Facebook Messenger 或 Line 這類的 IM 差不多</p>
<h2 id="why-telegram">Why Telegram</h2>
<p>至於這次為什麼要選用 Telegram 麻<br/>
是因為上次有聽其他開發者說 Telegram Bot 提供相當多的功能<br/>
就想說來試試看</p>
<h2 id="web-framework">Web Framework</h2>
<p>上次寫 Line EchoBot 的教學是用 django<br/>
這次來試試 Flask</p>
<p>Source Code 一樣放在 GitHub 上<br/>
這篇文章會用<a href="https://github.com/Lee-W/telegram_echobot/tree/minimal-flask">minimal-flask</a> branch 當範例<br/>
只有 31 行 Code，比較容易理解</p>
<p><a href="https://github.com/Lee-W/telegram_echobot/tree/master">master</a> 上也是用 Flask<br/>
只是架構比較複雜，有試一下 Flask 的 blueprint，之後可能還會多加一些奇怪的功能 xd</p>
<h2 id="apply-a-telegram-bot">Apply a telegram bot</h2>
<p>首先當然必須要有<a href="https://telegram.org">Telegram</a> 的帳號<br/>
再來要加<a href="https://telegram.me/botfather">BotFather</a> 為好友</p>
<p>跟他說 <code>/newbot</code><br/>
接著他會問你，Bot 的 name 跟 username</p>
<ul>
<li>name 是 Bot 在聯絡人資訊顯示的名稱</li>
<li>username 則比較像 id 的概念，而且一定要用 Bot 結尾</li>
</ul>
<p>之後就會得到剛申請 Bot 的 API Token<br/>
然後你就可以從 <code>https://telegram.me/&lt;bot_username&gt;</code> 找到剛申請的 bot</p>
<h2 id="telegram-bot-api-wrapper">Telegram Bot API Wrapper</h2>
<p>開發上，我使用的是<a href="https://github.com/python-telegram-bot/python-telegram-bot">python-telegram-bot</a></p>
<div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>python-telegram-bot
</pre></div>
<p>它其中一點設計的很不錯的是<br/>
Telegram API 的命名是 CamelCase (e.g. sendMessage)<br/>
但 Python 的命名 convention 卻是 lowercase_separated_by_underscores (e.g. send_message)<br/>
而它是兩種都支援</p>
<h2 id="star-programming">Star Programming</h2>
<p>先附上全部的 code，後面再慢慢解釋</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">telegram</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">bot</span> <span class="o">=</span> <span class="n">telegram</span><span class="o">.</span><span class="n">Bot</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="s1">'Your API Token'</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_set_webhook</span><span class="p">():</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">bot</span><span class="o">.</span><span class="n">set_webhook</span><span class="p">(</span><span class="s1">'https://Your URL/hook'</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">status</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Webhook setup failed'</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/hook'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">webhook_handler</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">"POST"</span><span class="p">:</span>
        <span class="n">update</span> <span class="o">=</span> <span class="n">telegram</span><span class="o">.</span><span class="n">Update</span><span class="o">.</span><span class="n">de_json</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">bot</span><span class="p">)</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">text</span>

        <span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">reply_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">'ok'</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">_set_webhook</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
<h3 id="setup">Setup</h3>
<p>其中有兩個地方，必須要改成自己的設定</p>
<h4>1. API Token</h4>
<div class="highlight"><pre><span></span><span class="n">bot</span> <span class="o">=</span> <span class="n">telegram</span><span class="o">.</span><span class="n">Bot</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="s1">'Your API Token'</span><span class="p">)</span>
</pre></div>
<p>Your API Token 要改成剛剛取得的 API Token</p>
<h4>2. Webhook URL</h4>
<p>_set_webhook 中的 Your URL</p>
<div class="highlight"><pre><span></span><span class="n">statue</span> <span class="o">=</span> <span class="n">bot</span><span class="o">.</span><span class="n">set_webhook</span><span class="p">(</span><span class="s1">'https://Your URL/hook'</span><span class="p">)</span>
</pre></div>
<p>這裡的 URL 就是設定成你這個 Bot Server 的 URL<br/>
不過 Telegram 一樣要求必須要是 https<br/>
最簡單的方式就是使用 ngrok<br/>
(ngrok 的使用在<a href="https://blog.wei-lee.me/posts/tech/2016/11/line-echo-bot-on-django#line-echo-bot-on-django">[Bot] Line Echo Bot on Django</a> 最後面有介紹 )<br/>
平常測試使用 ngrok 就很足夠了<br/>
之後要 production 的時候，在 deploy 到適當的 server 就好了</p>
<h3 id="95set95webhook">_set_webhook</h3>
<p>Telegram 有兩種接收訊息的方式<br/>
隨時去監聽的 webhook，和主動去要求更新的 <code>get_updates</code><br/>
這裡使用的是 webhook</p>
<p>這個 function 先設定 Bot 的 webhook URL，如果設定失敗就直接終止程式<br/>
也就是告訴 Telegram 要把 Bot 收到的訊息傳到哪<br/>
而 <code>set_webhook</code> 前面要有個 _的原因是我不希望它被其他的 code 使用<br/>
但 Python 本身並不支援 Private 的概念，而是慣例上在前面加一個底線</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_set_webhook</span><span class="p">():</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">bot</span><span class="o">.</span><span class="n">set_webhook</span><span class="p">(</span><span class="s1">'https://Your URL/hook'</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">status</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Webhook setup failed'</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
<p>在最後 run Flask app 前，要先把 webhook URL 設定好</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">_set_webhook</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
<h3 id="wehook95handler">wehook_handler</h3>
<p>這裡就是 bot 收到訊息要怎麼處理</p>
<div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/hook'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">webhook_handler</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">"POST"</span><span class="p">:</span>
        <span class="n">update</span> <span class="o">=</span> <span class="n">telegram</span><span class="o">.</span><span class="n">Update</span><span class="o">.</span><span class="n">de_json</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">bot</span><span class="p">)</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">text</span>

        <span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">reply_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">'ok'</span>
</pre></div>
<p><code>app.route</code> 這個 decorator 是 Flask 的語法<br/>
表示 <code>https:/Your URL/hook</code> 會導到這個 function，而它只能接受 POST<br/>
這裡設定的 <code>/hook</code> 也就是為什麼在 <code>_set_webhook</code> 中的 URL 最後面必須有 <code>/hook</code></p>
<p>另外還可以發現 webhook_handler 是不帶任何參數的<br/>
跟 django 不同的是<br/>
Flask 把 request 這種幾乎所有 view function 都會用到的參數直接變成全域可讀取的變數<br/>
也就是最一開始的</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>
</pre></div>
<p>接下來 <code>webhook_handler</code> 內做的就只是把收到的訊息轉成 <code>update</code><br/>
再從裡面讀到對方傳來的 <code>text</code><br/>
最後用 <code>reply_text</code> 回傳同樣的 text 回去</p>
<hr/>
<p>這是最簡單的 Telegram Bot<br/>
不過我覺得開始學一個東西，還是會希望能在最短時間看到點東西，再慢慢專研<br/>
接下來可以從<a href="https://github.com/python-telegram-bot/python-telegram-bot">python-telegram-bot</a> 的<a href="https://github.com/python-telegram-bot/python-telegram-bot/wiki">wiki</a>，試更多 Telegram Bot 的功能</p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://github.com/sooyhwang/Simple-Echo-Telegram-Bot">Simple-Echo-Telegram-Bot</a></li>
<li><a href="http://blog.30sparks.com/develop-telegram-bot-introduction/">開發 Telegram Bot 簡介</a></li>
</ul>
</section>
<section class="post-footer">
<div class="post-share">
<span class="post-info-label">Share</span>
<a aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=Create a Telegram EchoBot &amp;url=https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter">
<i aria-hidden="true" class="icon icon-twitter"></i><span class="hidden">Twitter</span>
</a>
<a aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Facebook">
<i aria-hidden="true" class="icon icon-facebook"></i><span class="hidden">Facebook</span>
</a>
<a aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot&amp;title=Create a Telegram EchoBot" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;" title="LinkedIn">
<i aria-hidden="true" class="icon icon-linkedin"></i><span class="hidden">LinkedIn</span>
</a>
<a aria-label="Email" class="email" href="mailto:?subject=Create a Telegram EchoBot&amp;body=https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot" title="Email">
<i aria-hidden="true" class="icon icon-mail"></i><span class="hidden">Email</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="https://blog.wei-lee.me/tag/chat-bot.html">Chat Bot</a><a href="https://blog.wei-lee.me/tag/flask.html">Flask</a> </aside>
<div class="clear"></div>
</section>
<script type="text/javascript">var use_utterance = true;</script>
<section class="post-comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2017/03/create-a-telegram-echobot" data-label="blog-comment" data-repo="Lee-W/main-blog" data-theme="github-light" src="https://utteranc.es/client.js">
</script>
</section>
<aside class="post-nav">
<div class="clear"></div>
</aside>
</div>
</article>
</main>
<div class="nav-footer">
<nav aria-label="Footer" class="nav-wrapper">
<span class="nav-copy">Those aren't written down are meant to be forgotten © 2023
          <a class="nav-rss" href="https://blog.wei-lee.me/feeds/all.atom.xml" target="_blank" title="RSS"><i class="icon icon-rss"></i></a>
</span>
<span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> • Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> •
          <a class="menu-item js-theme" data-dark="Dark theme" data-light="Light theme" data-system="System theme" href="#">
<span class="theme-icon"></span><span class="theme-text">System theme</span>
</a>
</span>
</nav>
</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<!-- TODO: minify -->
<script src="https://blog.wei-lee.me/theme/js/jquery.fitvids.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/script.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/clipboard.min.js" type="text/javascript"></script>
<script src="https://blog.wei-lee.me/theme/js/copy-to-clipboard.js" type="text/javascript"></script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3J7XQ46QH5', { 'anonymize_ip': true });
    </script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
      window.addEventListener('DOMContentLoaded', (event) => {
          new PagefindUI({
              element: "#search",
              showImages: false,
          });
      });
  </script>
<!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>
</html>