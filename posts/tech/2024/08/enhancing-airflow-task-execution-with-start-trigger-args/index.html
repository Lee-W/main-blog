<!DOCTYPE html>

<html lang="zh-tw">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" rel="stylesheet"/>
<link href="https://blog.wei-lee.me/theme/css/elegant.prod.9e9d5ce754.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="https://blog.wei-lee.me/theme/css/custom.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="//fonts.googleapis.com" rel="dns-prefetch"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link href="/pagefind/pagefind-ui.css" rel="stylesheet"/>
<meta content="Wei Lee" name="author">
<meta content="article" property="og:type">
<meta content="summary" name="twitter:card"/>
<meta content="Python, Airflow, Airflow 2.10, Tech, " name="keywords">
<meta content="Enhancing Airflow Task Execution with StartTriggerArgs " property="og:title">
<meta content="https://blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args" property="og:url"/>
<meta content="As mentioned in Starts Airflow task execution directly from the triggerer, the syntax of this feature will change after #39585 merged." property="og:description"/>
<meta content="Those aren't written down are meant to be forgotten" property="og:site_name"/>
<meta content="Wei Lee" property="og:article:author"/>
<meta content="2024-08-12T22:54:00+08:00" property="og:article:published_time"/>
<meta content="Enhancing Airflow Task Execution with StartTriggerArgs " name="twitter:title"/>
<meta content="As mentioned in Starts Airflow task execution directly from the triggerer, the syntax of this feature will change after #39585 merged." name="twitter:description"/>
<title>Enhancing Airflow Task Execution with StartTriggerArgs  Â· Those aren't written down are meant to be forgotten
</title>
<link href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="alternate" title="Those aren't written down are meant to be forgotten - Full Atom Feed" type="application/atom+xml">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3J7XQ46QH5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3J7XQ46QH5');
</script>
</link></meta></meta></meta></meta><link href="https://blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Those aren't written down are meant to be forgotten", "item": "https://blog.wei-lee.me"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.wei-lee.me/posts"}, {"@type": "ListItem", "position": 3, "name": "Tech", "item": "https://blog.wei-lee.me/posts/tech"}, {"@type": "ListItem", "position": 4, "name": "2024", "item": "https://blog.wei-lee.me/posts/tech/2024"}, {"@type": "ListItem", "position": 5, "name": "08", "item": "https://blog.wei-lee.me/posts/tech/2024/08"}, {"@type": "ListItem", "position": 6, "name": "Enhancing airflow task execution with start trigger args", "item": "https://blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Wei Lee"}, "publisher": {"@type": "Organization", "name": "Those aren't written down are meant to be forgotten"}, "headline": "Enhancing Airflow Task Execution with StartTriggerArgs", "about": "Tech", "datePublished": "2024-08-12 22:54"}</script></head>
<body>
<div id="content">
<div class="navbar navbar-static-top">
<div class="navbar-inner">
<div class="container-fluid">
<a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</a>
<a class="brand" href="https://blog.wei-lee.me/"><span class="site-name">Those aren't written down are meant to be forgotten</span></a>
<div class="nav-collapse collapse">
<ul class="nav pull-right top-menu">
<li>
<a href="https://blog.wei-lee.me">Home</a>
</li>
<li><a href="https://blog.wei-lee.me/pages/about-me.html">About Me</a></li>
<li><a href="https://blog.wei-lee.me/categories.html">Categories</a></li>
<li><a href="https://blog.wei-lee.me/tags.html">Tags</a></li>
<li><a href="https://blog.wei-lee.me/archives.html">Archives</a></li>
<li><div id="search"></div></li>
</ul>
</div>
</div>
</div>
</div>
<div class="container-fluid">
<div class="row-fluid">
<div class="span1"></div>
<div class="span10">
<article data-pagefind-body="" itemscope="">
<div class="row-fluid">
<header class="page-header span10 offset2">
<h1>
<a href="https://blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args">
                Enhancing Airflow Task Execution with StartTriggerArgs
            </a>
</h1>
</header>
</div>
<div class="row-fluid">
<div class="span2 table-of-content">
<nav>
<h4>Contents</h4>
<div class="toc">
<ul>
<li><a href="#what-does-it-look-like-now">What does it look like now?</a></li>
<li><a href="#whats-changed-under-the-hook">What's changed under the hook</a></li>
</ul>
</div>
</nav>
</div>
<div class="span8 article-content">
<p>As mentioned in <a href="https://blog.wei-lee.me/posts/tech/2024/06/starts-execution-directly-from-triggerer-without-going-to-worker">Starts Airflow task execution directly from the triggerer</a>, the syntax of this feature will change after <a href="https://github.com/apache/airflow/pull/39585">#39585</a> merged.</p>
<!--more-->
<p>This is needed mainly because we don't want to run any user code in the scheduler, which might happen <a href="https://github.com/apache/airflow/pull/38674/files#">here</a>.</p>
<p>This article will cover the following 3 PRs</p>
<ol>
<li><a href="https://github.com/apache/airflow/pull/39585">Prevent start trigger initialization in scheduler</a></li>
<li><a href="https://github.com/apache/airflow/pull/40376">add next_kwargs to StartTriggerArgs</a></li>
<li><a href="https://github.com/apache/airflow/pull/41021">Add start execution from trigger support for existing core sensors</a></li>
</ol>
<p>PR 2 is a minor fix to PR 1. PR 3 is adding this feature to core sensors.</p>
<h2 id="what-does-it-look-like-now">What does it look like now?</h2>
<p>The following code snippet shows how to define an operator that can start task execution directly from the trigger. I have kept the code simple and removed unnecessary details.</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">airflow.sensors.date_time</span> <span class="kn">import</span> <span class="n">DateTimeSensorAsync</span>
<span class="kn">from</span> <span class="nn">airflow.triggers.base</span> <span class="kn">import</span> <span class="n">StartTriggerArgs</span>


<span class="k">class</span> <span class="nc">ExecuteFromTriggerDateTimeSensor</span><span class="p">(</span><span class="n">DateTimeSensor</span><span class="p">):</span>
    <span class="n">start_trigger_args</span><span class="p">:</span> <span class="n">StartTriggerArgs</span> <span class="o">=</span> <span class="n">StartTriggerArgs</span><span class="p">(</span>
        <span class="n">trigger_cls</span><span class="o">=</span><span class="s2">"airflow.triggers.temporal.DateTimeTrigger"</span><span class="p">,</span>
        <span class="n">trigger_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">"moment"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"end_from_trigger"</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
        <span class="n">next_method</span><span class="o">=</span><span class="s2">"execute_complete"</span><span class="p">,</span>
        <span class="n">next_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">start_from_trigger</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">trigger_kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_trigger_args</span><span class="o">.</span><span class="n">trigger_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">moment</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_time</span><span class="p">),</span>
            <span class="n">end_from_trigger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">end_from_trigger</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
</pre></div>
<p>To enable an operator or a sensor with this feature, we must define the attributes <code>start_trigger_args</code> and <code>start_from_trigger</code>. We use <code>start_from_trigger</code> to determine whether we want to enable this feature and <code>start_trigger_args</code> to decide which trigger we want to use and how to use it. <code>start_trigger_args</code> should be an instance of <code>airflow.triggers.base.StartTriggerArgs</code> and it should contain the following arguments.</p>
<ul>
<li><code>trigger_cls</code><ul>
<li>the full import path of the trigger to run</li>
<li>e.g., <code>airflow.triggers.temporal.DateTimeTrigger</code></li>
</ul>
</li>
<li><code>trigger_kwargs</code><ul>
<li>the keyword arguments passed into the trigger for initialization</li>
<li>e.g., <code>{"moment": "", "end_from_trigger": False}</code></li>
</ul>
</li>
<li><code>next_method</code><ul>
<li>the name of the method to run after execution done in the trigger</li>
<li>Most of the time, it's <code>execute_complete</code></li>
</ul>
</li>
<li><code>next_kwargs</code><ul>
<li>the keyword arguments passed into the next method</li>
<li>Most of the time, it's <code>None</code>. I never saw it used. ð¤</li>
</ul>
</li>
<li><code>timeout</code><ul>
<li>the timeout for the trigger</li>
<li>Most of the time, it'll be set to <code>self.execution_timeout</code>.</li>
</ul>
</li>
</ul>
<p>If the attributes <code>start_trigger_args</code> and <code>start_from_trigger</code> are defined as class attributes, we could set <code>trigger_kwargs</code> as a temporary value and update the values in the <code>__init__</code> method. However, implementing a DAG with dynamic task mapping on an operator supporting this feature works differently, which will be detailed in the next article.</p>
<h2 id="whats-changed-under-the-hook">What's changed under the hook</h2>
<p>Let's start from <a href="https://github.com/apache/airflow/blob/9901a065fcd93307d8e1d69e34621966d7313511/airflow/models/dagrun.py#L1541-L1545">airflow/models/dagrun.py</a>. Airflow verifies if the <code>start_from_trigger</code> attribute is set to <code>True</code> and the <code>start_from_trigger</code> attribute is set. If both conditions are met, the <code>defer_task</code> method will be called with <code>exception=None</code>.</p>
<div class="highlight"><pre><span></span>            <span class="k">elif</span> <span class="n">ti</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">start_from_trigger</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">ti</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">start_trigger_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ti</span><span class="o">.</span><span class="n">start_date</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ti</span><span class="o">.</span><span class="n">state</span> <span class="o">!=</span> <span class="n">TaskInstanceState</span><span class="o">.</span><span class="n">UP_FOR_RESCHEDULE</span><span class="p">:</span>
                    <span class="n">ti</span><span class="o">.</span><span class="n">try_number</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">ti</span><span class="o">.</span><span class="n">defer_task</span><span class="p">(</span><span class="n">exception</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
</pre></div>
<p>Then, let's go to <a href="https://github.com/apache/airflow/blob/9901a065fcd93307d8e1d69e34621966d7313511/airflow/models/taskinstance.py#L1607-L1621">airflow/models/taskinstance.py</a>.</p>
<div class="highlight"><pre><span></span>    <span class="k">if</span> <span class="n">exception</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">trigger_row</span> <span class="o">=</span> <span class="n">Trigger</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="n">exception</span><span class="o">.</span><span class="n">trigger</span><span class="p">)</span>
        <span class="n">next_method</span> <span class="o">=</span> <span class="n">exception</span><span class="o">.</span><span class="n">method_name</span>
        <span class="n">next_kwargs</span> <span class="o">=</span> <span class="n">exception</span><span class="o">.</span><span class="n">kwargs</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="n">exception</span><span class="o">.</span><span class="n">timeout</span>
    <span class="k">elif</span> <span class="n">ti</span><span class="o">.</span><span class="n">task</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ti</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">start_trigger_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">trigger_row</span> <span class="o">=</span> <span class="n">Trigger</span><span class="p">(</span>
            <span class="n">classpath</span><span class="o">=</span><span class="n">ti</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">start_trigger_args</span><span class="o">.</span><span class="n">trigger_cls</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">=</span><span class="n">ti</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">start_trigger_args</span><span class="o">.</span><span class="n">trigger_kwargs</span> <span class="ow">or</span> <span class="p">{},</span>
        <span class="p">)</span>
        <span class="n">next_kwargs</span> <span class="o">=</span> <span class="n">ti</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">start_trigger_args</span><span class="o">.</span><span class="n">next_kwargs</span>
        <span class="n">next_method</span> <span class="o">=</span> <span class="n">ti</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">start_trigger_args</span><span class="o">.</span><span class="n">next_method</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="n">ti</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">start_trigger_args</span><span class="o">.</span><span class="n">timeout</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AirflowException</span><span class="p">(</span><span class="s2">"exception and ti.task.start_trigger_args cannot both be None"</span><span class="p">)</span>
</pre></div>
<p>We handle standard task deferral in the first <code>if</code> condition. This happens when a task runs the <code>defer</code> method and raises a <code>TaskDeferred</code> exception. For a more detailed version, you can refer to <a href="https://blog.wei-lee.me/posts/tech/2024/06/starts-execution-directly-from-triggerer-without-going-to-worker#how-did-the-deferrable-operator-work-before-this-change">this link</a>. Therefore, we need to set <code>exception=None</code> in the previous code block, as we are not handling it in the standard way.</p>
<p>The <code>elif</code> statement checks whether this operator has a <code>start_trigger_args</code> attribute, which indicates that this operator supports the "starting execution from the trigger" feature. Airflow will then load the value from <code>start_trigger_args</code> and assign it to the variables that will later be used in the rest of the deferral process, similar to the standard task deferral.</p>
<p>The next article in this series will cover how to utilize this feature with dynamic task mapping (well.. partially). The implementation details will change somewhat, but the core idea remains unchanged.</p>
<p id="post-share-links">
    Share on:
      <a href="https://twitter.com/intent/tweet?text=Enhancing%20Airflow%20Task%20Execution%20with%20StartTriggerArgs&amp;url=https%3A//blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args&amp;hashtags=python,airflow,airflow-210" rel="nofollow noopener noreferrer" target="_blank" title="Share on Twitter">Twitter</a>
 â       <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args" rel="nofollow noopener noreferrer" target="_blank" title="Share on Facebook">Facebook</a>
 â       <a href="mailto:?subject=Enhancing%20Airflow%20Task%20Execution%20with%20StartTriggerArgs&amp;body=https%3A//blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args" rel="nofollow noopener noreferrer" target="_blank" title="Share via Email">Email</a>
<section>
<h6 style="display:none;">Comments</h6>
<p id="comment-message">Do you like this article? What do your tink about it? Leave you comment below </p>
<div class="accordion" id="accordion2">
<div class="accordion-group">
<div class="accordion-heading">
<a class="accordion-toggle disqus-comment-count comment-count collapsed" data-parent="#accordion2" data-toggle="collapse" href="https://blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args#comment_thread" id="comment-accordion-toggle">
                    Comments
                </a>
</div>
<div class="accordion-body collapse" id="comment_thread">
<div class="accordion-inner">
<div class="comments">
<script async="" crossorigin="anonymous" data-issue-term="https://blog.wei-lee.me/posts/tech/2024/08/enhancing-airflow-task-execution-with-start-trigger-args" data-label="comment" data-repo="Lee-W/main-blog" data-theme="" src="https://utteranc.es/client.js">
</script>
</div>
</div>
</div>
</div>
</div>
</section>
<hr/>
</p></div>
<section class="span2" id="article-sidebar">
<h4>Published</h4>
<time datetime="2024-08-12T22:54:00+08:00" itemprop="dateCreated">2024/08/12 - Mon</time>
<h4>What If...? Running Airflow Tasks without the workers</h4>
<ul class="multi-parts-list">
<li>
<a href="https://blog.wei-lee.me/posts/tech/2024/06/starts-execution-directly-from-triggerer-without-going-to-worker" title="Starts Airflow task execution directly from the triggerer">Part 1: Starts Airflow task execution directly from the triggerer</a>
</li>
<li class="active-part">
            Part 2: Enhancing Airflow Task Execution with StartTriggerArgs
            </li>
<li>
<a href="https://blog.wei-lee.me/posts/tech/2024/08/serialize-start-trigger-args" title="Serialize StartTriggerArgs">Part 3: Serialize StartTriggerArgs</a>
</li>
</ul>
<h4>Read Time</h4>
                3 min
            <h4>Category</h4>
<a class="category-link" href="https://blog.wei-lee.me/categories.html#tech-ref">Tech</a>
<h4>Tags</h4>
<ul class="list-of-tags tags-in-article">
<li><a href="https://blog.wei-lee.me/tags.html#airflow-ref">Airflow
                    <span class="superscript">5</span>
</a></li>
<li><a href="https://blog.wei-lee.me/tags.html#airflow-210-ref">Airflow 2.10
                    <span class="superscript">3</span>
</a></li>
<li><a href="https://blog.wei-lee.me/tags.html#python-ref">Python
                    <span class="superscript">39</span>
</a></li>
</ul>
<h4>Keep In Touch</h4>
<div id="sidebar-social-link">
<a href="https://tw.linkedin.com/in/clleew" rel="nofollow noopener noreferrer" target="_blank" title="">
<svg aria-label="LinkedIn" fill="#fff" role="img" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><rect fill="#0077b5" height="512" rx="15%" width="512"></rect><circle cx="142" cy="138" r="37"></circle><path d="M244 194v198M142 194v198" stroke="#fff" stroke-width="66"></path><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"></path></svg>
</a>
<a href="https://github.com/Lee-W" rel="nofollow noopener noreferrer" target="_blank" title="">
<svg aria-label="GitHub" role="img" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><rect fill="#1B1817" height="512" rx="15%" width="512"></rect><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z" fill="#fff"></path></svg>
</a>
<a href="https://twitter.com/clleew" rel="nofollow noopener noreferrer" target="_blank" title="">
<svg aria-label="Twitter" role="img" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><rect fill="#1da1f3" height="512" rx="15%" width="512"></rect><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37" fill="#fff"></path></svg>
</a>
<a href="https://blog.wei-lee.me/feeds/all.atom.xml" rel="nofollow noopener noreferrer" target="_blank" title="">
<svg aria-label="RSS" role="img" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><rect fill="#f80" height="512" rx="15%" width="512"></rect><circle cx="145" cy="367" fill="#fff" r="35"></circle><path d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276" fill="none" stroke="#fff" stroke-width="60"></path></svg>
</a>
</div>
</section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div aria-hidden="true" class="pswp" role="dialog" tabindex="-1">
<!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
<div class="pswp__bg"></div>
<!-- Slides wrapper with overflow:hidden. -->
<div class="pswp__scroll-wrap">
<!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
<div class="pswp__container">
<div class="pswp__item"></div>
<div class="pswp__item"></div>
<div class="pswp__item"></div>
</div>
<!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
<div class="pswp__ui pswp__ui--hidden">
<div class="pswp__top-bar">
<!--  Controls are self-explanatory. Order can be changed. -->
<div class="pswp__counter"></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title="Share"></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
<!-- element will get class pswp__preloader--active when preloader is running -->
<div class="pswp__preloader">
<div class="pswp__preloader__icn">
<div class="pswp__preloader__cut">
<div class="pswp__preloader__donut"></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class="pswp__share-tooltip"></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class="pswp__caption">
<div class="pswp__caption__center"></div>
</div>
</div>
</div>
</div> </div>
<div class="span1"></div>
</div>
</div>
</div>
<footer>
<div>
<a href="http://creativecommons.org/licenses/by/4.0/" rel="license">
<img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" style="border-width:0"/>
</a>
<br/>
This work is licensed under a
<a href="http://creativecommons.org/licenses/by/4.0/" rel="license">
    Creative Commons Attribution 4.0 International License
</a>.

    </div>
<div id="fpowered">
        Powered by: <a href="http://getpelican.com/" rel="nofollow noopener noreferrer" target="_blank" title="Pelican Home Page">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" rel="nofollow noopener noreferrer" target="_blank" title="Theme Elegant Home Page">Elegant</a>
</div>
</footer> <script src="//code.jquery.com/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="https://blog.wei-lee.me/theme/js/elegant.prod.9e9d5ce754.js"></script>
<script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>
<script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>
<script src="/pagefind/pagefind-ui.js"></script>
<script>
            window.addEventListener('DOMContentLoaded', (event) => {
                new PagefindUI({
                    element: "#search",
                    showImages: false,
                });
            });
        </script>
</body>
<!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>